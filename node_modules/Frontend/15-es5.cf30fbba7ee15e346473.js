!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15,26,83],{BcHf:function(t,n,s){"use strict";s.d(n,"a",(function(){return b}));var a=s("XNiG"),r=s("2Vo4"),o=s("AytR"),c=s("fXoL"),u=s("tk/3"),d=s("ndxW"),b=function(){var t=function(){function t(i,n){var s=this;e(this,t),this.http=i,this.ss=n,this.url=o.a.server,this.lock=!1,this.message$=new a.a,this.page$=new a.a,this.ad$=new r.a({}),this.newPlanTaken$=new r.a({}),this.editSubmitionButtonClick$=new a.a,this.routeName="INVALID",this.ss.getUserSessionObservable().subscribe((function(e){s.session=e,s.routeName="agency"==s.session.type?"agency":"sponsor"==s.session.type?"sponsors":"receivers"}))}return i(t,[{key:"newPage",value:function(e){this.page$.next(e)}},{key:"AdObservable",value:function(){return this.ad$.asObservable()}},{key:"NewAdData",value:function(e){null!=e||1!=this.lock?(this._currentAd=e,this.ad$.next(this._currentAd)):console.log(this.lock)}},{key:"messageObserver",value:function(){return this.message$.asObservable()}},{key:"newMessage",value:function(e,t,i){this.message$.next({severity:e,summary:t,detail:i})}},{key:"adPlanTakenObservable",value:function(){return this.newPlanTaken$.asObservable()}},{key:"newPlanTake",value:function(e){e instanceof Object&&this.newPlanTaken$.next(this.create_new_upgrades(e))}},{key:"checkSubmition",value:function(){return this.editSubmitionButtonClick$.asObservable()}},{key:"clickedEditSubmition",value:function(e){return this.editSubmitionButtonClick$.next(e)}},{key:"create_new_upgrades",value:function(e){var t={upgradesSelected:!0,adId:e.adId},i=e.plan,n=e.selectedBump;return i instanceof Object&&i.planId&&0==i.paid&&(t.advertisePlanCheck=!0,t.advertisePlan=this.convert_to_advertisePlan(i)),n instanceof Object&&n._id&&(t.bumpupPlanCheck=!0,t.bumpupPlan=n),t}},{key:"convert_to_advertisePlan",value:function(e){return{adPlanId:e.planId,adPlanCategory:e._id,adPlanName:e.planName,inDays:e.inDays,days:e.days,inHours:e.inHours,hours:e.hours,advertisePrice:e.price,paid:e.paid,advertiseAutoRenewal:!1,purchasedOn:null,purchaseToken:null,refunded:!1,endTime:null}}},{key:"getCategories",value:function(){return this.http.get(this.url+"/layout/categories",{withCredentials:!0})}},{key:"selectCategory",value:function(e,t){return"string"==typeof t?this.http.put("".concat(this.url,"/users/receivers/ads/").concat(t,"/update-category"),{categoryId:e},{withCredentials:!0}):this.http.post(this.url+"/users/receivers/start-new-ad",{categoryId:e},{withCredentials:!0})}},{key:"selectLocation",value:function(e,t,i,n){return this.http.put(this.url+"/users/receivers/ad-location",{countryId:e,country:t,state:i,city:n,adId:this._currentAd._id},{withCredentials:!0})}},{key:"save_ad_content",value:function(e){return this.http.put("".concat(this.url,"/users/receivers/ad/").concat(this._currentAd._id,"/ad-details"),e,{withCredentials:!0})}},{key:"save_ad_images",value:function(e){var t,i=new FormData;return e.forEach((function(e){i.append("adImages",e)})),i.append("adId",null===(t=this._currentAd)||void 0===t?void 0:t._id),this.http.put(this.url+"/users/receivers/ad-media/adImages",i,{withCredentials:!0,observe:"events",reportProgress:!0})}},{key:"deleteAdImage",value:function(e){var t,i={adImage:e,adId:null===(t=this._currentAd)||void 0===t?void 0:t._id};return this.http.put(this.url+"/users/receivers/ad-media/adImages/delete",i,{withCredentials:!0})}},{key:"save_identity_images",value:function(e){var t,i=new FormData;return e.forEach((function(e){i.append("identityImages",e)})),i.append("adId",null===(t=this._currentAd)||void 0===t?void 0:t._id),this.http.put(this.url+"/users/receivers/ad-media/identityImages",i,{withCredentials:!0,observe:"events",reportProgress:!0})}},{key:"save_ad_video",value:function(e){var t,i=new FormData;return i.append("adVideo",e),i.append("adId",null===(t=this._currentAd)||void 0===t?void 0:t._id),this.http.put(this.url+"/users/receivers/ad-media/adVideo",i,{withCredentials:!0,observe:"events",reportProgress:!0})}},{key:"save_ad_video_link",value:function(e){var t,i={adId:null===(t=this._currentAd)||void 0===t?void 0:t._id,videoLink:e};return this.http.put(this.url+"/users/receivers/ad-media/adVideoLink",i,{withCredentials:!0,observe:"events",reportProgress:!0})}},{key:"save_contact",value:function(e){return e.adId=this._currentAd._id,this.http.put(this.url+"/users/receivers/ad-user-details",e,{withCredentials:!0})}},{key:"get_ad_plans",value:function(){return this.http.get(this.url+"/users/ad-plans",{withCredentials:!0})}},{key:"save_plan",value:function(e){return"agency"==this.session.type?this.http.put(this.url+"/users/agency/ad-plans/subscribe",{withCredentials:!0}):"sponsor"==this.session.type?this.http.put(this.url+"/users/sponsors/ad-plans/subscribe",{withCredentials:!0}):this.http.put(this.url+"/users/receivers/ad-plans/subscribe",e,{withCredentials:!0})}},{key:"select_ad_plan",value:function(e,t){return this.http.put(this.url+"/users/receivers/ad-plans/subscribe",{adId:this._currentAd._id,planId:e,categoryId:t},{withCredentials:!0})}},{key:"get_upgrade_payment_intent",value:function(e){return this.http.get("".concat(this.url,"/users/receivers/upgrades/payment-intent/").concat(e),{withCredentials:!0})}},{key:"get_ad",value:function(e){return this.http.get("".concat(this.url,"/users/").concat(this.routeName,"/ads/").concat(e),{withCredentials:!0})}},{key:"delete",value:function(e){return this.http.delete("".concat(this.url,"/users/").concat(this.routeName,"/ads/").concat(e),{withCredentials:!0})}},{key:"delete_with_category",value:function(e,t){return this.http.delete("".concat(this.url,"/users/receivers/ads/ad-with-category/").concat(t,"/").concat(e),{withCredentials:!0})}},{key:"upgrade_plan",value:function(e){return this.http.put("".concat(this.url,"/users/receivers/ads/").concat(e.adId,"/upgrade-card"),e,{withCredentials:!0})}},{key:"publish_ad_with_plan",value:function(e){return this.http.put("".concat(this.url,"/users/receivers/ads/").concat(e.adId,"/publish-with-plan"),e,{withCredentials:!0})}},{key:"publish_normal",value:function(e){return this.http.put("".concat(this.url,"/users/receivers/ads/").concat(e,"/publish"),{},{withCredentials:!0})}},{key:"copy_ad",value:function(e,t){return this.http.get("".concat(this.url,"/users/").concat(this.routeName,"/copy-ad/").concat(e),{withCredentials:!0})}},{key:"ad_status",value:function(e,t,i){return this.http.get("".concat(this.url,"/users/").concat(this.routeName,"/ad-status/").concat(e,"/").concat(t),{withCredentials:!0})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Ub(u.b),c.Ub(d.a))},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},H116:function(t,n,s){"use strict";s.r(n),s.d(n,"AdlistRoutingModule",(function(){return K}));var a,r=s("tyNb"),o=s("XNiG"),c=s("1G5W"),u=s("AytR"),d=s("fXoL"),b=s("BcHf"),l=s("ndxW"),p=s("DPk/"),h=s("5dVO"),v=s("ofXK"),f=((a=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){return e>=0&&e<=50?"ad-profile ad-green-des":e>50&&e<=100?"ad-profile ad-orange-des":!e||e>100?"ad-profile ad-red-des":void 0}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=d.Jb({name:"adPositionColor",type:a,pure:!0}),a),g=s("mASP"),m=s("yi5r"),y=s("V9fG"),P=["formFoodbank"];function k(e,t){1&e&&(d.Qb(0,"li"),d.Qb(1,"a",5),d.Lb(2,"img",18),d.Jc(3," Community Directory "),d.Pb(),d.Pb())}var Q=function(){return["/receiver/find-volunteer"]};function w(e,t){1&e&&(d.Qb(0,"li"),d.Qb(1,"a",19),d.Lb(2,"img",20),d.Jc(3," My Volunteer "),d.Pb(),d.Pb()),2&e&&(d.yb(1),d.ic("routerLink",d.mc(1,Q)))}function _(e,t){1&e&&(d.Qb(0,"a",7),d.Jc(1,"Get verified now!"),d.Pb())}function C(e,t){1&e&&(d.Qb(0,"a",7),d.Jc(1,"Verification is in process"),d.Pb())}function I(e,t){if(1&e&&(d.Qb(0,"section",21),d.Qb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"div",3),d.Qb(4,"div",22),d.Qb(5,"p"),d.Lb(6,"img",23),d.Jc(7," Verify your account to get more donations. "),d.Hc(8,_,2,0,"a",24),d.Hc(9,C,2,0,"a",24),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&e){var i=d.bc();d.yb(8),d.ic("ngIf",0==i.session.verificationStatus),d.yb(1),d.ic("ngIf",1==i.session.verificationStatus)}}function L(e,t){1&e&&d.Lb(0,"img",78)}function J(e,t){1&e&&d.Lb(0,"img",79)}function A(e,t){1&e&&d.Lb(0,"img",80)}function O(e,t){1&e&&(d.Qb(0,"span",50),d.Qb(1,"span",51),d.Qb(2,"p"),d.Jc(3,"You will have 1 bumps left"),d.Pb(),d.Lb(4,"br"),d.Qb(5,"a",81),d.Lb(6,"img",58),d.Jc(7," Bump it! "),d.Pb(),d.Qb(8,"a",82),d.Lb(9,"i",54),d.Pb(),d.Pb(),d.Pb())}function H(e,t){if(1&e){var i=d.Rb();d.Qb(0,"span",52),d.Xb("click",(function(){d.zc(i);var e=d.bc().$implicit;return d.bc().upgrade_plan(e._id,e.approved)})),d.Jc(1," Buy & manage your upgrades "),d.Pb()}}function N(e,t){if(1&e){var i=d.Rb();d.Qb(0,"span",52),d.Xb("click",(function(){d.zc(i);var e=d.bc().$implicit;return d.bc().choose_grocery(e._id,e.categoryName,e.approved)})),d.Jc(1," Buy & manage your groceries "),d.Pb()}}function $(e,t){1&e&&(d.Qb(0,"span"),d.Jc(1,"Not purchased"),d.Pb())}function M(e,t){if(1&e&&(d.Qb(0,"span"),d.Jc(1),d.Pb()),2&e){var i=d.bc(2).$implicit;d.yb(1),d.Lc(" ",i.advertisePlan.days," days ")}}function D(e,t){if(1&e&&(d.Qb(0,"span"),d.Jc(1),d.Pb()),2&e){var i=d.bc(2).$implicit;d.yb(1),d.Lc(" ",i.advertisePlan.hours," hours ")}}function j(e,t){if(1&e&&(d.Qb(0,"span"),d.Hc(1,M,2,1,"span",9),d.Hc(2,D,2,1,"span",9),d.Pb()),2&e){var i=d.bc().$implicit;d.yb(1),d.ic("ngIf",null==i.advertisePlan?null:i.advertisePlan.inDays),d.yb(1),d.ic("ngIf",null==i.advertisePlan?null:i.advertisePlan.inHours)}}function T(e,t){1&e&&(d.Qb(0,"span"),d.Jc(1,"Not purchased"),d.Pb())}function x(e,t){if(1&e&&(d.Qb(0,"span"),d.Jc(1),d.Pb()),2&e){var i=d.bc(2).$implicit;d.yb(1),d.Lc(" ",i.advertisePlan.days," days ")}}function F(e,t){if(1&e&&(d.Qb(0,"span"),d.Jc(1),d.Pb()),2&e){var i=d.bc(2).$implicit;d.yb(1),d.Lc(" ",i.advertisePlan.hours," hours ")}}function X(e,t){if(1&e&&(d.Qb(0,"span"),d.Hc(1,x,2,1,"span",9),d.Hc(2,F,2,1,"span",9),d.Pb()),2&e){var i=d.bc().$implicit;d.yb(1),d.ic("ngIf",null==i.advertisePlan?null:i.advertisePlan.inDays),d.yb(1),d.ic("ngIf",null==i.advertisePlan?null:i.advertisePlan.inHours)}}var B=function(e){return["stats/viewsInMonth/",e]};function E(e,t){if(1&e){var i=d.Rb();d.Ob(0),d.Qb(1,"section",25),d.Qb(2,"div",1),d.Qb(3,"div",26),d.Qb(4,"div",2),d.Qb(5,"div",27),d.Qb(6,"div"),d.cc(7,"adPositionColor"),d.Qb(8,"div",28),d.Lb(9,"img",29),d.cc(10,"thumbnail"),d.Pb(),d.Qb(11,"div",30),d.Qb(12,"p"),d.Jc(13," Ad Position "),d.Pb(),d.Qb(14,"p"),d.Qb(15,"a",5),d.Hc(16,L,1,0,"img",31),d.Hc(17,J,1,0,"img",32),d.Hc(18,A,1,0,"img",33),d.Jc(19),d.Pb(),d.Qb(20,"a",5),d.Lb(21,"img",34),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(22,"div",35),d.Qb(23,"div",36),d.Qb(24,"div",37),d.Qb(25,"a",38),d.Lb(26,"img",39),d.Jc(27," Status "),d.Pb(),d.Qb(28,"a",40),d.Xb("click",(function(){d.zc(i);var e=t.$implicit,n=t.index;return d.bc().ad_status(e._id,!e.status,n)})),d.Lb(29,"i",41),d.Jc(30),d.Pb(),d.Pb(),d.Qb(31,"h1"),d.Jc(32),d.cc(33,"substring"),d.Pb(),d.Qb(34,"p"),d.Jc(35),d.cc(36,"date"),d.cc(37,"expiresInPipe"),d.Pb(),d.Qb(38,"div",42),d.Qb(39,"div",2),d.Qb(40,"div",43),d.Qb(41,"div",44),d.Qb(42,"div",2),d.Qb(43,"div",3),d.Qb(44,"ul"),d.Qb(45,"li"),d.Qb(46,"a",45),d.Xb("click",(function(){d.zc(i);var e=t.$implicit;return d.bc().view_ad(e._id)})),d.Lb(47,"i",41),d.Jc(48," View "),d.Pb(),d.Pb(),d.Qb(49,"li"),d.Qb(50,"a",45),d.Xb("click",(function(){d.zc(i);var e=t.$implicit;return d.bc().edit_ad(e._id,e.categoryName)})),d.Lb(51,"i",46),d.Jc(52," Edit "),d.Pb(),d.Pb(),d.Qb(53,"li"),d.Qb(54,"span",47),d.Qb(55,"span",48),d.Xb("click",(function(e){return d.zc(i),d.bc().show_dialog(e)})),d.Lb(56,"i",49),d.Jc(57," Delete "),d.Pb(),d.Qb(58,"span",50),d.Qb(59,"span",51),d.Jc(60," Are you sure you want to delete this ad?"),d.Lb(61,"br"),d.Qb(62,"a",52),d.Xb("click",(function(){d.zc(i);var e=t.$implicit,n=t.index;return d.bc().delete_ad(e._id,n)})),d.Jc(63,"Yes, Delete it"),d.Pb(),d.Qb(64,"button",53),d.Xb("click",(function(e){return d.zc(i),d.bc().close_dialog(e)})),d.Lb(65,"i",54),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(66,"li"),d.Qb(67,"a",45),d.Xb("click",(function(){d.zc(i);var e=t.$implicit;return d.bc().copy_ad(e._id)})),d.Lb(68,"i",55),d.Jc(69," Copy "),d.Pb(),d.Pb(),d.Qb(70,"li"),d.Qb(71,"span",56),d.Xb("click",(function(){d.zc(i);var e=t.$implicit;return d.bc().bumpAd(e._id)})),d.Qb(72,"span",57),d.Lb(73,"img",58),d.Jc(74," Bump "),d.Pb(),d.Hc(75,O,10,0,"span",59),d.Pb(),d.Pb(),d.Qb(76,"li"),d.Qb(77,"a",60),d.Hc(78,H,2,0,"span",61),d.cc(79,"lowercase"),d.Hc(80,N,2,0,"span",61),d.cc(81,"lowercase"),d.Lb(82,"img",62),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(83,"div",3),d.Qb(84,"div",63),d.Lb(85,"i",64),d.Jc(86," Your ad is now visible "),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(87,"section",65),d.Qb(88,"div",1),d.Qb(89,"div",66),d.Qb(90,"div",2),d.Qb(91,"div",67),d.Qb(92,"div",68),d.Qb(93,"div",2),d.Qb(94,"div",69),d.Qb(95,"div",70),d.Qb(96,"ul"),d.Qb(97,"li"),d.Lb(98,"img",71),d.Pb(),d.Qb(99,"li"),d.Jc(100," Page1 "),d.Hc(101,$,2,0,"span",9),d.Hc(102,j,3,2,"span",9),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(103,"div",69),d.Qb(104,"div",72),d.Qb(105,"ul"),d.Qb(106,"li"),d.Lb(107,"img",73),d.Pb(),d.Qb(108,"li"),d.Jc(109," Auto repost "),d.Qb(110,"span"),d.Jc(111,"Not purchased"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(112,"div",69),d.Qb(113,"div",74),d.Qb(114,"ul"),d.Qb(115,"li"),d.Lb(116,"img",75),d.Pb(),d.Qb(117,"li"),d.Jc(118," Main page "),d.Hc(119,T,2,0,"span",9),d.Hc(120,X,3,2,"span",9),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(121,"div",69),d.Qb(122,"div",76),d.Qb(123,"ul"),d.Qb(124,"li"),d.Lb(125,"img",77),d.Pb(),d.Qb(126,"li",52),d.Xb("click",(function(){return d.zc(i),d.bc().buyBumps()})),d.Jc(127," Bump Ad "),d.Qb(128,"span"),d.Jc(129),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Nb()}if(2&e){var n=t.$implicit,s=d.bc();d.yb(6),d.Bb(d.dc(7,22,n.position)),d.yb(3),d.ic("src",d.dc(10,24,n),d.Cc),d.yb(7),d.ic("ngIf",n.position>=0&&n.position<50),d.yb(1),d.ic("ngIf",n.position>50&&n.position<100),d.yb(1),d.ic("ngIf",!n.position||n.position>100),d.yb(1),d.Lc(" ",n.position||"unavailable"," "),d.yb(6),d.ic("routerLink",d.nc(39,B,n._id)),d.yb(5),d.Lc(" ",n.status?"hide":"show"," "),d.yb(2),d.Mc(" ",d.fc(33,26,n.adTitle,0,50)," ","#"+n._id," "),d.yb(3),d.Nc(" ",n.approvedOn?d.ec(36,30,n.approvedOn,"mediumDate")+" - Expires in "+d.dc(37,33,n.approvedOn)+" D - ":""," ",n.categoryName?n.categoryName:"No Category Chosen"," - City of ",n.city?n.city:"No City Chosen"," "),d.yb(40),d.ic("ngIf",!1),d.yb(3),d.ic("ngIf",d.dc(79,35,n.categoryName)!=s.foodbankName),d.yb(2),d.ic("ngIf",d.dc(81,37,n.categoryName)==s.foodbankName),d.yb(21),d.ic("ngIf",!n.advertisePlanCheck||"Page 1"!=(null==n.advertisePlan?null:n.advertisePlan.adPlanName)),d.yb(1),d.ic("ngIf",n.advertisePlanCheck&&"Page 1"==(null==n.advertisePlan?null:n.advertisePlan.adPlanName)),d.yb(17),d.ic("ngIf",!n.advertisePlanCheck||"Main Page"!=(null==n.advertisePlan?null:n.advertisePlan.adPlanName)),d.yb(1),d.ic("ngIf",n.advertisePlanCheck&&"Main Page"==(null==n.advertisePlan?null:n.advertisePlan.adPlanName)),d.yb(9),d.Lc("",s.session.bumps," bumps left")}}function S(e,t){1&e&&d.Lb(0,"div",83)}var V,z,R,G=[{path:"",component:(z=function(){function t(i,n,s,a,r,c,d){var b;e(this,t),this.ps=i,this.ss=n,this.router=s,this.ds=a,this.ren=r,this.ar=c,this.loader=d,this.submitting=!1,this.query={skip:0,adType:"published"},this.unsubscribe$=new o.a,this.foodbankName=null===(b=u.a.foodbankCategoryName)||void 0===b?void 0:b.toLowerCase()}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.ss.getUserSessionObservable().pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(t){e.session=t,e.get_ads(),"agency"==e.session.type?e.home="/agency":"sponsor"==e.session.type?e.home="/sponsor":"receiver"==e.session.type?e.home="/receiver":"volunteer"==e.session.type?e.home="/volunteer":"doner"==e.session.type&&(e.home="/donor")}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"get_ads",value:function(){var e=this;this.load(),this.query.owner=this.session.type,this.ds.get_user_ads(this.query).pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(t){e.stopload(),t.status?e.ads=e.validatePlan(t.data):alert(t.message)}),this.ErrorHandle.bind(this))}},{key:"view_ad",value:function(e){this.router.navigate(["/ads/full"],{queryParams:{ad:e,mode:"edit"}})}},{key:"edit_ad",value:function(e,t){var i;i="foodbank"==(null==t?void 0:t.toLowerCase())?"foodbank/edit/steps":"post-edit/select-category",this.router.navigate([i],{queryParams:{action:"edit",adId:e},relativeTo:this.ar})}},{key:"show_dialog",value:function(e){this.ren.addClass(this.ren.nextSibling(e.target),"show-dialog")}},{key:"close_dialog",value:function(e){var t=this.ren.parentNode(e.currentTarget),i=this.ren.parentNode(t);this.ren.removeClass(i,"show-dialog")}},{key:"delete_ad",value:function(e,t){var i=this;this.load(),this.ps.delete(e).pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(n){i.stopload(),n.status?(i.deleteFromComponent(e,t),i.router.navigate(["deleted"],{relativeTo:i.ar})):i.ds.newMessage("error","Couldn't Delete Ad",n.message)}),this.ErrorHandle.bind(this))}},{key:"deleteFromComponent",value:function(e,t){this.ads[t]._id==e?this.ads.splice(t,1):this.ads=this.ads.filter((function(t){return t._id!=e}))}},{key:"copy_ad",value:function(e){var t=this,i=this.session.type;this.load(),this.ps.copy_ad(e,i).pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(e){t.stopload(),e.status?(t.ds.newMessage("success","Ad Copied As Draft",e.message,!0),t.ads.unshift(e.data)):t.ds.newMessage("error","Couldn't Copy Ad",e.message)}),this.ErrorHandle.bind(this))}},{key:"bumpAd",value:function(e){var t=this;this.load(),this.ds.bumpAd(e).pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(e){t.stopload(),e.status?(t.ds.newMessage("success","Ad Bumped",e.message),t.ss.bumpsAdd(e.data.bumpsLeft)):t.ds.newMessage("error","Couldn't Bump Ad",e.message)}),this.ErrorHandle.bind(this))}},{key:"upgrade_plan",value:function(e,t){if(2!=t)return this.ds.newMessage("info","Ad Not Approved","This ad is not approved yet.");this.router.navigate([this.home+"/bumps/purchase-bumps/"+e])}},{key:"choose_grocery",value:function(e,t,i){return"foodbank"!=(null==t?void 0:t.toLowerCase())?this.ds.newMessage("info","Invalid Category","Please choose a foodbank ad"):2!=i?this.ds.newMessage("info","Ad not approved","This ad is not approved yet"):void this.router.navigate([this.home+"/manage-groceries/"+e])}},{key:"buyBumps",value:function(){this.router.navigate([this.home+"/bumps/purchase-bumps"])}},{key:"ad_status",value:function(e,t,i){var n=this,s=this.session.type;if(null!=this.ads[i].hiddenCause)return this.ds.newMessage("error","Cannot Show","The ad is hidden by admin",!0);this.load(),this.ps.ad_status(e,t,s).pipe(Object(c.a)(this.unsubscribe$)).subscribe((function(s){n.stopload(),s.status?n.changeStatusInComponent(e,t,i):alert(s.message)}),this.ErrorHandle.bind(this))}},{key:"changeStatusInComponent",value:function(e,t,i){this.ads[i]._id==e?this.ads[i].status=t:this.ads=this.ads.map((function(i){i._id==e&&(i.status=t)}))}},{key:"account",value:function(){"doner"!=this.session.type&&this.router.navigate([this.home+"/withdraw"])}},{key:"ErrorHandle",value:function(e){var t;e.error instanceof ErrorEvent?this.ds.newMessage("error","Error Occured","sorry some unknow error occured"):this.ds.newMessage("error","Error",(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.stopload()}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"showHiddenCause",value:function(e){this.ds.newMessage("info","Hidden",this.ads[e].hiddenCause)}},{key:"showRejectionCause",value:function(e){this.ds.newMessage("info","Rejected",this.ads[e].rejectedCause)}},{key:"validatePlan",value:function(e){var t=this,i=Date.now();return e.map((function(e){if(2==e.approved&&e.advertisePlanCheck){var n=new Date(e.endTime).getTime();n<=i?(e.advertisePlanCheck=!1,delete e.advertisePlan):e.advertisePlan=t.check_remaining_time(e.advertisePlan,n,i)}return console.log(e),e}))}},{key:"check_remaining_time",value:function(e,t,i){return e.inDays?e.days=((t-i)/864e5).toFixed(0):e.inHours&&(e.hours=((t-i)/36e5).toFixed(0)),e}},{key:"gotoFoodbank",value:function(){var e=this,t={email:this.session.email,firstname:this.session.firstname,lastname:this.session.lastname,type:this.session.type,id:this.session._id};this.progress().show(),this.ds.foodbankLogin(t).subscribe((function(t){console.log(t),t?(e.openToken=t.result.open_token,e.apiUrl="http://3.97.194.144/foodbank/user/signin",setTimeout((function(){e.formFoodbank.nativeElement.submit(),e.progress().hide()}),3e3)):window.alert("Login failed! Please try again.")}),(function(e){alert(e)}))}},{key:"progress",value:function(){var e=this;return{show:function(){e.submitting=!0},hide:function(){e.submitting=!1}}}}]),t}(),z.\u0275fac=function(e){return new(e||z)(d.Kb(b.a),d.Kb(l.a),d.Kb(r.f),d.Kb(p.a),d.Kb(d.D),d.Kb(r.a),d.Kb(h.a))},z.\u0275cmp=d.Eb({type:z,selectors:[["app-adlist"]],viewQuery:function(e,t){var i;1&e&&d.Qc(P,!0),2&e&&d.vc(i=d.Yb())&&(t.formFoodbank=i.first)},decls:29,vars:7,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"graph-step-list","delivery-step-list"],["href","javascript:void(0);"],["src","assets/images/manage-icon.png","alt","manage-icon"],["routerLink","verification"],["src","assets/images/verified-icon.png","alt","verified-icon"],[4,"ngIf"],[1,"active"],["href","javascript:void(0);",3,"click"],["class","verify-account",4,"ngIf"],[4,"ngFor","ngForOf"],["id","formFoodbank","method","POST","target","_blank",2,"display","none",3,"action"],["formFoodbank",""],["id","op","name","op","type","hidden",3,"value"],["class","loader-spinner",4,"ngIf"],["src","assets/images/communitydirectory.png","alt","directory-icon"],["href","javascript:void(0);",3,"routerLink"],["src","assets/images/directory-icon.png","alt","directory-icon"],[1,"verify-account"],[1,"verify-des"],["src","assets/images/verify-icon.png","alt","verify-icon"],["routerLink","verification",4,"ngIf"],[1,"ad-detail"],[1,"ad-bg","ad1"],[1,"col-lg-3"],[1,"ad-pro-img","unhide-post","hide-post"],["alt","Pic",1,"pic-img",3,"src"],[1,"ad-profile-des"],["src","assets/images/position-info-green.png","alt","position-info",4,"ngIf"],["src","assets/images/position-info-orange.png","alt","position-info",4,"ngIf"],["src","assets/images/position-info.png","alt","position-info",4,"ngIf"],["src","assets/images/grey-info.png","alt","grey-info"],[1,"col-lg-9"],[1,"ad-detail-des"],[1,"ad-hide-btn"],[3,"routerLink"],["src","assets/images/status-icon-white.png","alt","status-icon-white"],[1,"btn","btn-hide","btn-edit","btn-unhide",3,"click"],[1,"fa","fa-eye"],[1,"buy-manage"],[1,"col-lg-12"],[1,"buy-manage-list"],[1,"btn","btn-edit",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-del","btn-edit","tooltipclassic","tooltipclassic-effect-1",2,"padding","6px"],[1,"tooltipclassic-item",3,"click"],[1,"fa","fa-times"],[1,"tooltipclassic-content","clearfix"],[1,"tooltipclassic-text"],[3,"click"],[1,"btn","btn-close",3,"click"],[1,"fa","fa-close"],[1,"fa","fa-files-o"],[1,"btn","btn-bump","tooltipclassic","tooltipclassic-effect-1",3,"click"],[1,"tooltipclassic-item"],["src","assets/images/bump-icon-1.png","alt","bump-icon"],["class","tooltipclassic-content clearfix",4,"ngIf"],[1,"btn-upgrades"],[3,"click",4,"ngIf"],["src","assets/images/right-arrow.png","alt","right-arrow"],["role","alert",1,"alert","alert-success"],["aria-hidden","true",1,"fa","fa-eye"],[1,"auto-repost"],[1,"auto-bg"],[1,"col-lg-9","offset-lg-3"],[1,"auto-list"],[1,"col-lg-3","col-md-6"],[1,"auto-page-des","page2-des"],["src","assets/images/ad-icon.png","alt","Ad"],[1,"auto-page-des","auto-des"],["src","assets/images/auto-respost.png","alt","auto-respost"],[1,"auto-page-des","featured-des"],["src","assets/images/featured-icon.png","alt","featured-icon"],[1,"auto-page-des","bump-ad-des",2,"cursor","pointer"],["src","assets/images/ad-bump-icon.png","alt","ad-bump-icon"],["src","assets/images/position-info-green.png","alt","position-info"],["src","assets/images/position-info-orange.png","alt","position-info"],["src","assets/images/position-info.png","alt","position-info"],["href","#",1,"bump-link"],[1,"btn","btn-bump-close"],[1,"loader-spinner"]],template:function(e,t){1&e&&(d.Qb(0,"section",0),d.Qb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"div",3),d.Qb(4,"div",4),d.Qb(5,"ul"),d.Qb(6,"li"),d.Qb(7,"a",5),d.Lb(8,"img",6),d.Jc(9," Manage Ads "),d.Pb(),d.Pb(),d.Qb(10,"li"),d.Qb(11,"a",7),d.Lb(12,"img",8),d.Jc(13," Get Verified "),d.Pb(),d.Pb(),d.Hc(14,k,4,0,"li",9),d.Hc(15,w,4,2,"li",9),d.Qb(16,"li",10),d.Qb(17,"a",11),d.Xb("click",(function(){return t.account()})),d.Jc(18," Account "),d.Pb(),d.Pb(),d.Qb(19,"li"),d.Qb(20,"a",11),d.Xb("click",(function(){return t.gotoFoodbank()})),d.Jc(21," Food Bank "),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Hc(22,I,10,2,"section",12),d.Hc(23,E,130,41,"ng-container",13),d.Ob(24),d.Qb(25,"form",14,15),d.Lb(27,"input",16),d.Pb(),d.Nb(),d.Hc(28,S,1,0,"div",17)),2&e&&(d.yb(14),d.ic("ngIf",!1),d.yb(1),d.ic("ngIf","receiver"==t.session.type),d.yb(7),d.ic("ngIf",2!=t.session.verificationStatus),d.yb(1),d.ic("ngForOf",t.ads),d.yb(2),d.jc("action",t.apiUrl,d.Cc),d.yb(2),d.jc("value",t.openToken),d.yb(1),d.ic("ngIf",t.submitting))},directives:[r.i,v.n,v.m],pipes:[f,g.a,m.a,v.d,y.a,v.k],styles:[".tooltipclassic-content[_ngcontent-%COMP%]{display:none}.show-dialog[_ngcontent-%COMP%]{display:block;opacity:1}.ad-pro-img[_ngcontent-%COMP%]{position:relative;opacity:1}.ad-pro-img[_ngcontent-%COMP%], .pic-img[_ngcontent-%COMP%]{min-height:200px!important}"]}),z)},{path:"deleted",component:(V=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}(),V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=d.Eb({type:V,selectors:[["app-ad-deleted"]],decls:42,vars:0,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"graph-step-list","delivery-step-list"],["href","javascript:void(0);"],["src","assets/images/manage-icon.png","alt","manage-icon"],["routerLink","verification"],["src","assets/images/verified-icon.png","alt","verified-icon"],["src","assets/images/directory-icon.png","alt","directory-icon"],[1,"active"],[1,"d-header","cat-header"],[1,"container"],[1,"delivery-form","description-form"],[1,"description-tab","manage-tab"],[1,"top-tip","delete-tab"],[1,"fa","fa-info-circle"],["routerLink","../",1,"btn","btn-back"],["src","assets/images/right-arrow.png","alt","Icons"]],template:function(e,t){1&e&&(d.Qb(0,"section",0),d.Qb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"div",3),d.Qb(4,"div",4),d.Qb(5,"ul"),d.Qb(6,"li"),d.Qb(7,"a",5),d.Lb(8,"img",6),d.Jc(9," Manage Ads "),d.Pb(),d.Pb(),d.Qb(10,"li"),d.Qb(11,"a",7),d.Lb(12,"img",8),d.Jc(13," Get verified "),d.Pb(),d.Pb(),d.Qb(14,"li"),d.Qb(15,"a",5),d.Lb(16,"img",9),d.Jc(17," Directory "),d.Pb(),d.Pb(),d.Qb(18,"li",10),d.Qb(19,"a",5),d.Jc(20," Account "),d.Pb(),d.Pb(),d.Qb(21,"li"),d.Qb(22,"a",5),d.Jc(23," Food Bank "),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(24,"section",11),d.Qb(25,"div",12),d.Qb(26,"div",2),d.Qb(27,"div",3),d.Qb(28,"form"),d.Qb(29,"div",13),d.Qb(30,"div",2),d.Qb(31,"div",3),d.Lb(32,"div",14),d.Qb(33,"div",15),d.Qb(34,"h3"),d.Lb(35,"i",16),d.Jc(36," Your ad has been deleted "),d.Pb(),d.Qb(37,"p"),d.Jc(38," Please note that it take up 10 minutes for your ad to disappear from search. "),d.Pb(),d.Pb(),d.Qb(39,"a",17),d.Jc(40," Back to my ads "),d.Lb(41,"img",18),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb())},directives:[r.i],styles:[""]}),V)}],K=((R=function t(){e(this,t)}).\u0275mod=d.Ib({type:R}),R.\u0275inj=d.Hb({factory:function(e){return new(e||R)},imports:[[r.j.forChild(G)],r.j]}),R)},V9fG:function(t,n,s){"use strict";s.d(n,"a",(function(){return r}));var a=s("fXoL"),r=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){var t=new Date(e);return((new Date(t.setFullYear(t.getFullYear()+1)).getTime()-Date.now())/864e5).toFixed(0)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Jb({name:"expiresInPipe",type:t,pure:!0}),t}()},mASP:function(t,n,s){"use strict";s.d(n,"a",(function(){return o}));var a=s("AytR"),r=s("fXoL"),o=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){var t,i,n=null;return e?(e instanceof Array?e.length>0&&"string"==typeof e[0]&&(n=e[0]):e instanceof Object?(null===(t=e.identityImages)||void 0===t?void 0:t.length)>0?n=e.identityImages[0]:(null===(i=e.adImages)||void 0===i?void 0:i.length)>0&&(n=e.adImages[0]):"string"==typeof e&&(n=e),a.a.server+"/"+n||"assets/images/home-pic.jpg"):n}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Jb({name:"thumbnail",type:t,pure:!0}),t}()},yi5r:function(t,n,s){"use strict";s.d(n,"a",(function(){return r}));var a=s("fXoL"),r=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e){return null==e?void 0:e.substr(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Jb({name:"substring",type:t,pure:!0}),t}()}}])}();