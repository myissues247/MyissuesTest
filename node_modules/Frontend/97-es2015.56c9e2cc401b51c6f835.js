(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{T436:function(e,t,n){"use strict";n.r(t),n.d(t,"ReceiverPostModule",(function(){return Ke}));var i=n("ofXK"),a=n("tyNb"),s=n("7zfz"),o=n("XNiG"),c=n("1G5W"),r=n("fXoL"),d=n("BcHf"),l=n("Gxio");let b=(()=>{class e{constructor(e,t,n){this.ms=e,this.ps=t,this.router=n,this.activeIndex=1,this.currentPage=1,this.unsub$=new o.a,this.items=[{label:"Category",routerLink:"select-category"},{label:"Location",routerLink:"select-location"},{label:"Content",routerLink:"ad-content"},{label:"Images",routerLink:"upload-images"},{label:"Contact",routerLink:"user-details"},{label:"Upgrades",routerLink:"upgrades"},{label:"Finalize",routerLink:"finalize"}]}ngOnInit(){this.ps.lock=!1,this.ps.messageObserver().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.ms.add(e)}),this.ps.page$.asObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.currentPage=e})}new_ad(e){this.currentAd=e}seePreview(){this.ps.lock=!0,this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{if(e._id)return this.router.navigate(["/ads/full"],{queryParams:{mode:"preview"}});this.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting a category")})}ngOnDestroy(){this.ps.NewAdData(null),this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(s.h),r.Kb(d.a),r.Kb(a.f))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-receiver-post"]],features:[r.xb([s.h])],decls:140,vars:28,consts:[[1,"container-fluid"],[1,"row"],["id","ad-builder",1,"col-12","py-5"],[1,"tabs","col-lg-9","mx-auto","pb-5"],[1,"container-fluid","mb-4",2,"padding","0px"],[1,""],[1,"step-menu__list"],[1,"step-menu__item"],[1,"step-menu__link"],[1,"step-menu__icon","active"],[1,"number-1"],[1,"step-menu__description"],[1,"number-2"],[1,"number-4"],[1,"number-5"],[1,"number-6"],["id","preview",1,"btn","btn-primary",2,"min-width","150px !important",3,"click"],[1,"fa","fa-eye"],[1,"agree-sec"],[1,"container"],[1,"agree-head"],["href","javascript:void(0);","data-toggle","modal","data-target","#tcModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#ppModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#rulesModal","data-dismiss","modal"],[1,"understand-sec"],["id","tcModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],["id","ppModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["id","rulesModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Lb(3,"p-toast"),r.Qb(4,"div",3),r.Qb(5,"div",4),r.Qb(6,"div",5),r.Qb(7,"ul",6),r.Qb(8,"li",7),r.Qb(9,"a",8),r.Qb(10,"span",9),r.Qb(11,"i",10),r.Jc(12,"1"),r.Pb(),r.Pb(),r.Qb(13,"span",11),r.Jc(14,"Category"),r.Pb(),r.Pb(),r.Pb(),r.Qb(15,"li",7),r.Qb(16,"a",8),r.Qb(17,"span",9),r.Qb(18,"i",10),r.Jc(19,"2"),r.Pb(),r.Pb(),r.Qb(20,"span",11),r.Jc(21,"Region"),r.Pb(),r.Pb(),r.Pb(),r.Qb(22,"li",7),r.Qb(23,"a",8),r.Qb(24,"span",9),r.Qb(25,"i",12),r.Jc(26,"3"),r.Pb(),r.Pb(),r.Qb(27,"span",11),r.Jc(28,"Description"),r.Pb(),r.Pb(),r.Pb(),r.Qb(29,"li",7),r.Qb(30,"a",8),r.Qb(31,"span",9),r.Qb(32,"i",13),r.Jc(33,"4"),r.Pb(),r.Pb(),r.Qb(34,"span",11),r.Jc(35,"Upload "),r.Lb(36,"br"),r.Jc(37,"Your Images"),r.Pb(),r.Pb(),r.Pb(),r.Qb(38,"li",7),r.Qb(39,"a",8),r.Qb(40,"span",9),r.Qb(41,"i",12),r.Jc(42,"5"),r.Pb(),r.Pb(),r.Qb(43,"span",11),r.Jc(44," Contact Details"),r.Pb(),r.Pb(),r.Pb(),r.Qb(45,"li",7),r.Qb(46,"a",8),r.Qb(47,"span",9),r.Qb(48,"i",14),r.Jc(49,"6"),r.Pb(),r.Pb(),r.Qb(50,"span",11),r.Jc(51,"Choose "),r.Lb(52,"br"),r.Jc(53,"Your Upgrades"),r.Pb(),r.Pb(),r.Pb(),r.Qb(54,"li",7),r.Qb(55,"a",8),r.Qb(56,"span",9),r.Qb(57,"i",15),r.Jc(58,"7"),r.Pb(),r.Pb(),r.Qb(59,"span",11),r.Jc(60,"Finalize "),r.Lb(61,"br"),r.Jc(62,"& Post"),r.Pb(),r.Pb(),r.Pb(),r.Qb(63,"li",7),r.Qb(64,"a",16),r.Xb("click",(function(){return t.seePreview()})),r.Lb(65,"i",17),r.Jc(66," Preview Ad"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Lb(67,"router-outlet"),r.Qb(68,"div",18),r.Qb(69,"div",19),r.Qb(70,"div",20),r.Qb(71,"h4"),r.Jc(72," You agree to the following when on MyIssues.ca "),r.Pb(),r.Qb(73,"p"),r.Jc(74," I agree to the "),r.Qb(75,"a",21),r.Jc(76,"Terms & Conditions,"),r.Pb(),r.Jc(77,"\xa0 "),r.Qb(78,"a",22),r.Jc(79,"Privacy Policy,"),r.Pb(),r.Jc(80," and "),r.Qb(81,"a",23),r.Jc(82,"Rules"),r.Pb(),r.Jc(83," of this site. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(84,"div",24),r.Qb(85,"div",19),r.Qb(86,"div",20),r.Qb(87,"p"),r.Jc(88," You understand and agree that any posts which do not comply with these terms aforementioned may result in the removal of the post without refund or warning. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(89,"div",25),r.Qb(90,"div",26),r.Qb(91,"div",27),r.Qb(92,"div",28),r.Qb(93,"h2",29),r.Jc(94,"Terms & Condtition"),r.Pb(),r.Qb(95,"button",30),r.Qb(96,"span",31),r.Jc(97,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(98,"div",32),r.Qb(99,"div",33),r.Qb(100,"div",1),r.Qb(101,"div",34),r.Qb(102,"p"),r.Jc(103," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Qb(104,"p"),r.Jc(105," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(106,"div",35),r.Qb(107,"div",26),r.Qb(108,"div",27),r.Qb(109,"div",28),r.Qb(110,"h2",29),r.Jc(111,"Privacy Policy"),r.Pb(),r.Qb(112,"button",30),r.Qb(113,"span",31),r.Jc(114,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(115,"div",32),r.Qb(116,"div",33),r.Qb(117,"div",1),r.Qb(118,"div",34),r.Qb(119,"p"),r.Jc(120," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Qb(121,"p"),r.Jc(122," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(123,"div",36),r.Qb(124,"div",26),r.Qb(125,"div",27),r.Qb(126,"div",28),r.Qb(127,"h2",29),r.Jc(128,"Rules"),r.Pb(),r.Qb(129,"button",30),r.Qb(130,"span",31),r.Jc(131,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(132,"div",32),r.Qb(133,"div",33),r.Qb(134,"div",1),r.Qb(135,"div",34),r.Qb(136,"p"),r.Jc(137," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Qb(138,"p"),r.Jc(139," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(8),r.Cb("active",1==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>1),r.yb(5),r.Cb("active",2==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>2),r.yb(5),r.Cb("active",3==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>3),r.yb(5),r.Cb("active",4==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>4),r.yb(7),r.Cb("active",5==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>5),r.yb(5),r.Cb("active",6==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>6),r.yb(7),r.Cb("active",7==t.currentPage),r.yb(2),r.Cb("active1",t.currentPage>7))},directives:[l.a,a.k],styles:[".tabs[_ngcontent-%COMP%]{padding:15px 0}.col-12[_ngcontent-%COMP%]{padding:0;background:#fcfdf8}#ad-builder[_ngcontent-%COMP%]{padding-left:15px!important;padding-right:15px!important}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px rgba(0,0,0,.3)}@media screen and (max-width:600px){.py-3[_ngcontent-%COMP%]{overflow:scroll!important}.step-menu__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:100%!important}.step-menu__item[_ngcontent-%COMP%]{padding-right:15px!important}.step-menu__item[_ngcontent-%COMP%]   .step-menu__link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.step-menu__description[_ngcontent-%COMP%]{text-align:center;padding-top:8px;font-size:14px}#preview[_ngcontent-%COMP%]{margin-bottom:10px;margin-left:0;margin-right:0;width:100%!important}}",".step-menu__list[_ngcontent-%COMP%] {\n                        display: -ms-flexbox;\n                        display: flex;\n                        background: #f2f2ed;\n                        border: 1px solid #ebebe6;\n                        margin: 0;\n                        list-style: none;\n                        border-radius: 6px;\n                        box-shadow: 0 1px 0 0 #fff, inset 0 1px 3px -2px rgba(0,0,0,.3);\n                        overflow: auto;\n                        padding-left: 0px;\n                        margin-top:20px;\n                    }\n                \n                    ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n                    background: #00000017;\n                }\n                ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar {\n                    height: 7px;\n                    backface-visibility: visible;\n                    opacity: 1;\n                }\n                    .step-menu__item.active[_ngcontent-%COMP%] {\n                        background: #fff;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:first-child {\n                        box-shadow: none;\n                        border-radius: 5px 0 0 5px;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%] {\n                        float: left;\n                        padding: 15px 20px 15px 15px;\n                        position: relative;\n                        \n                        flex-grow: 1;\n                        white-space: nowrap;\n                        \n                        user-select: none;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:hover{\n                        background: #fff;\n                        color: #575757;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%]:hover{\n                        color: #575757;\n                    }\n                    .step-menu__item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n                        color: #5e5e5e;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%] {\n                        display: flex;\n                        align-items: center;\n                        line-height: 17px;\n                        text-decoration: none;\n                        font-weight: 700;\n                        font-size: 14px;\n                        color: #b8b8b4;\n                    }\n                    \n                    .step-menu__icon[_ngcontent-%COMP%] {\n                        float: left;\n                        margin-right: 8px;\n                        width: 32px;\n                        height: 32px;\n                        border-radius: 75px;\n                        flex-shrink: 0;\n                        display: -ms-flexbox;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        line-height: 1;\n                        color: #fff;\n                        background: #5e5e5e;\n                    }\n                    .step-menu__icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%] {\n                        background: #b8b8b4;\n                        color: #fff;\n                    }\n                    .step-menu__description[_ngcontent-%COMP%] {\n                        float: left;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__list[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%], .rewards[_ngcontent-%COMP%]   .btn.btn-black[_ngcontent-%COMP%]:hover {\n                        background-color: #6d95aa;\n                        border-color: #6d95aa;\n                        margin: 0 8px;\n                        margin-top: 10px;\n                        padding: 0 12px;\n                        color: #fff;\n                        font-weight: 700;\n                        font-size: 16px;\n                        line-height: 40px;\n                        height: 42px;\n                        vertical-align: top;\n                    }\n                    .step-menu__icon.active1[_ngcontent-%COMP%]{\n                        background: green;\n                    }"]}),e})();var p=n("ndxW"),u=n("5dVO"),g=n("3Pt+"),h=n("bhfF"),m=n("3LrJ");const P=["modalButton"];function f(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",24),r.Qb(1,"li",25),r.Qb(2,"a",26),r.Xb("click",(function(){r.zc(e);const t=r.bc().$implicit;return r.bc().select_category(t._id)})),r.Lb(3,"img",27),r.cc(4,"server"),r.Lb(5,"img",28),r.cc(6,"server"),r.Jc(7),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc().$implicit,t=r.bc();r.yb(1),r.Cb("active",e._id==t.selectedCategory),r.yb(2),r.jc("src",e.imagePath?r.dc(4,7,e.imagePath):"assets/images/banner1.jpg",r.Cc),r.jc("alt",e.title),r.yb(2),r.jc("src",e.imagePath?r.dc(6,9,e.imagePath):"assets/images/banner1.jpg",r.Cc),r.jc("alt",e.title),r.yb(2),r.Lc(" ",e.title," ")}}function v(e,t){1&e&&(r.Ob(0),r.Hc(1,f,8,11,"ng-template",23),r.Nb())}function y(e,t){if(1&e){const e=r.Rb();r.Ob(0),r.Qb(1,"div",29),r.Qb(2,"div",30),r.Xb("click",(function(){r.zc(e);const n=t.$implicit;return r.bc().select_category(n._id)})),r.Qb(3,"a"),r.Jc(4),r.Pb(),r.Pb(),r.Pb(),r.Nb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(2),r.Cb("active",n.selectedCategory==e._id),r.yb(2),r.Lc(" ",e.title,"\t")}}let Q=(()=>{class e{constructor(e,t,n,i,a){this.ps=e,this.router=t,this.ar=n,this.ss=i,this.loader=a,this.customOptions={loop:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:1},740:{items:3},940:{items:4},1100:{items:6}},nav:!0,autoWidth:!0},this.submitting=!1,this.duplicateAdId=null,this.unsub$=new o.a,this.selectedCategory=void 0}ngOnInit(){this.ps.newPage(1),this.getCategories().then(this.checkAction.bind(this)),this.ss.getUserSessionObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{e._id||(this.ps.newMessage("error","Login Needed","Please login to perform this action"),this.router.navigate(["/"]))}),this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad instanceof Object&&this.ad.categoryId&&(this.selectedCategory=this.ad.categoryId)})}checkAction(){}getCategories(){return new Promise((e,t)=>{this.ps.getCategories().pipe(Object(c.a)(this.unsub$)).subscribe(n=>{if(n.status)return this.categories=n.data.categories,e(!0);this.ps.newMessage("error","Failed","couldn't fetch categories"),t(!1)},e=>{this.handle_error(e),t(!1)})})}select_category(e){if(this.selectedCategory=e,this.selected_category_is_foodbank(this.selectedCategory))return;let t=null,n=null;if(this.ad instanceof Object&&this.ad._id){if(this.selectedCategory==this.ad.categoryId)return this.nextPage();if(!confirm("category is already selected, do you want to change ad category?"))return this.selectedCategory=this.ad.categoryId,!1;t=this.ad._id,n="update-category"}this.load(),this.ps.selectCategory(this.selectedCategory,t).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{if(this.stopload(),e.status)return"update-category"==n?(this.ad.categoryId=e.data.categoryId,this.ad.categoryName=e.data.categoryName,e.data.completedSteps instanceof Object&&(this.ad.completedSteps=e.data.completedSteps),this.ps.NewAdData(this.ad)):this.ps.NewAdData(e.data),this.nextPage();this.handle_selection_failure(e,t)},e=>{this.handle_error(e),t&&(this.selectedCategory=this.ad.categoryId)})}handle_selection_failure(e,t){if(e.code){if("duplicate-record"==e.code)return this.duplicateAdId=e.data.adId,this.handle_duplicate();"no-record"==e.code?this.ps.newMessage("info","Category Not Found",e.message+", this category might be deleted"):this.ps.newMessage("error","Error",e.message)}t&&(this.selectedCategory=this.ad.categoryId)}nextPage(){var e;if(!this.selectedCategory)return this.ps.newMessage("error","No Category Selected","Please select a category");if(this.selectedCategory==(null===(e=this.ad)||void 0===e?void 0:e.categoryId)){if(this.ps.newMessage("success","Category Saved","selected category was saved"),this.selected_category_is_foodbank(this.ad.categoryName))return;this.router.navigate(["/receiver/post/select-location"])}else this.select_category(this.selectedCategory)}selected_category_is_foodbank(e){const t=this.categories.find(t=>t._id==e);return"foodbank"==(null==t?void 0:t.title.toLowerCase())&&(setTimeout(()=>{this.router.navigate(["/receiver/foodbank/steps/select-location"])},0),!0)}editAd(e){this.load(),this.ps.get_ad(e).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?this.ps.NewAdData(e.data):alert(e.message)},this.handle_error.bind(this))}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}handle_duplicate(){this.modalButton.nativeElement.click()}delete_previous(){this.load(),this.ps.delete_with_category(this.selectedCategory,this.duplicateAdId).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.stopload(),this.modalButton.nativeElement.click(),e.status?(this.ps.newMessage("success","Previous Ad Deleted","Previous Ad was deleted"),this.select_category(this.selectedCategory)):this.ps.newMessage("error","Couldn't Delete Ad",e.message)},e=>{this.modalButton.nativeElement.click(),this.handle_error(e)})}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",""+e.error.message),this.stopload()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(a.f),r.Kb(a.a),r.Kb(p.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-select-category"]],viewQuery:function(e,t){var n;1&e&&r.Qc(P,!0),2&e&&r.vc(n=r.Yb())&&(t.modalButton=n.first)},decls:34,vars:5,consts:[["type","button","data-toggle","modal","data-target","#exampleModalCenter",1,"btn","btn-primary",2,"display","none"],["modalButton",""],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-header","cat-header",2,"padding","0px"],[1,"container-fluid",2,"padding","0px"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form",2,"margin-top","0px"],[1,"col-lg-12"],[1,"cat-list"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,"item"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"img-white","category_img",3,"src","alt"],[1,"img-red","category_img",3,"src","alt"],[1,"col-lg-3","col-md-6"],[1,"tab-list",2,"height","55px",3,"click"]],template:function(e,t){1&e&&(r.Qb(0,"button",0,1),r.Jc(2," Launch demo modal "),r.Pb(),r.Qb(3,"div",2),r.Qb(4,"div",3),r.Qb(5,"div",4),r.Qb(6,"div",5),r.Qb(7,"h5",6),r.Jc(8,"Action"),r.Pb(),r.Qb(9,"button",7),r.Qb(10,"span",8),r.Jc(11,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(12,"div",9),r.Jc(13," An Ad with this category is already present, Do you want to delete it and continue with this ad? "),r.Pb(),r.Qb(14,"div",10),r.Qb(15,"button",11),r.Jc(16,"Close"),r.Pb(),r.Qb(17,"button",12),r.Xb("click",(function(){return t.delete_previous()})),r.Jc(18,"Delete"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(19,"section",13),r.Qb(20,"div",14),r.Qb(21,"div",15),r.Qb(22,"div",16),r.Qb(23,"div",17),r.Qb(24,"form"),r.Qb(25,"div",15),r.Qb(26,"div",18),r.Qb(27,"div",19),r.Qb(28,"ul",20),r.Qb(29,"owl-carousel-o",21),r.Hc(30,v,2,0,"ng-container",22),r.Pb(),r.Pb(),r.Pb(),r.Qb(31,"div",19),r.Qb(32,"div",15),r.Hc(33,y,5,3,"ng-container",22),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(19),r.Cb("submitting",t.submitting),r.yb(10),r.ic("options",t.customOptions),r.yb(1),r.ic("ngForOf",t.categories),r.yb(3),r.ic("ngForOf",t.categories))},directives:[g.A,g.o,g.p,h.a,i.m,h.c],pipes:[m.a],styles:['.categories[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;justify-content:center}.category[_ngcontent-%COMP%]{min-width:16.66%;max-width:30%;height:140px;position:relative;padding:2px;margin:2px;flex-direction:column;align-items:center;background:#f5f5f5;overflow:hidden}.category[_ngcontent-%COMP%]:hover{cursor:pointer}.category[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;left:0;bottom:0;height:2px;background-color:#962179;transition:.4s;width:0}.category[_ngcontent-%COMP%]:hover:after{width:100%}.category[_ngcontent-%COMP%]:hover   .category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.category-image[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;overflow:hidden;margin:0 auto}.category-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-size:20px;font-weight:bolder;padding:0;margin:0}.category.active[_ngcontent-%COMP%]:after{width:100%}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bd4630!important}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.tab-list.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tab-list[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#bd4630}.subtitle[_ngcontent-%COMP%]{font-weight:400;color:#6c757d}.subtitle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:700!important}.category_img[_ngcontent-%COMP%]{height:100px!important;width:100px!important;border-radius:50%}@media screen and (max-width:700px){.category[_ngcontent-%COMP%]{flex:1;max-width:unset}}@media screen and (max-width:500px){.category[_ngcontent-%COMP%]{min-width:45%}}']}),e})();var _=n("DPk/");function C(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",18),r.Qb(1,"input",19),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedCountry=t}))("click",(function(){r.zc(e);const n=t.$implicit;return r.bc().change_country(n._id)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(1),r.jc("value",e._id),r.ic("ngModel",n.selectedCountry),r.yb(2),r.Kc(e.countryName)}}function M(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",18),r.Qb(1,"input",20),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedState=t}))("click",(function(){r.zc(e);const n=t.$implicit;return r.bc().change_state(n.stateName)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(1),r.jc("value",e.stateName),r.ic("ngModel",n.selectedState),r.yb(2),r.Kc(e.stateName)}}function w(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",18),r.Qb(1,"input",21),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedCity=t}))("click",(function(){r.zc(e);const n=t.$implicit;return r.bc().change_city(n.cityName)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(1),r.jc("value",e.cityName),r.ic("ngModel",n.selectedCity),r.yb(2),r.Kc(e.cityName)}}function x(e,t){1&e&&r.Lb(0,"div",22)}let O=(()=>{class e{constructor(e,t,n,i){this.ds=e,this.ps=t,this.router=n,this.loader=i,this.submitting=!1,this.loading=!0,this.saved=!1,this.unsub$=new o.a,this.cities=[],this.states=[],this.countries=[],this.selectedCountry="",this.selectedState="",this.selectedCity=""}ngOnInit(){this.ps.newPage(2),this.ps.AdObservable().subscribe(e=>{this.ad=e,this.ad._id||(this.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting category"),this.router.navigate(["/receiver/post/select-category"]))}),this.get_country().then(()=>{this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{if(e.country){const t=this.countries.find(t=>e.country==t.countryName);this.selectedCountry=t?t._id:"",this.selectedCountryName=t?t.countryName:"",this.states=t?t.states:[],e.state&&this.change_state(e.state).then(()=>{this.ad.city&&(this.selectedCity=e.city,this.saved=!0)})}})})}get_country(){return new Promise((e,t)=>{this.loading=!0,this.ds.get_countries().pipe(Object(c.a)(this.unsub$)).subscribe(n=>(this.loading=!1,n.status?(this.countries=n.data,e(!0)):(this.ps.newMessage("error","Country Fetch Failed",n.message),t(!1))),e=>(this.handleError(e),t(!1)))})}change_country(e){this.selectedCountry=e;const t=this.find_data_of_selected_country();return t?t.states&&0!=t.states.length?(this.states=t.states,this.selectedCountryName=t.countryName,this.selectedState=null,void(this.saved=!1)):this.ds.newMessage("info","No States","No states in this country"):this.ds.newMessage("info","No Country Data","Sorry selected country not found")}change_state(e){return this.saved=!1,this.loading=!0,this.selectedState=e,this.get_cities_for_selected_state()}change_city(e){this.saved=!1,this.selectedCity=e,this.nextPage()}save_location(){this.emptySelect()||(this.load(),this.ps.selectLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?(this.ps.NewAdData(e.data),this.ps.newMessage("success","Location Saved","Ad location was saved"),this.saved=!0,this.nextPage()):this.ps.newMessage("error","Failed Save","Couldn't save the location")},e=>{this.handleError(e),this.stopload()}))}prevPage(){this.unsavedChangesExists()||this.router.navigate(["/receiver/post/select-category"])}nextPage(){this.saved&&!this.unsavedChangesExists()?this.router.navigate(["/receiver/post/ad-content"]):this.save_location()}emptySelect(){if(""==this.selectedCountry)this.ps.newMessage("info","Country Not Selected","please Select a country");else if(""==this.selectedState)this.ps.newMessage("info","State Not Selected","Please select a state");else{if(""!=this.selectedCity)return!1;this.ps.newMessage("info","City Not Selected","Please select a city")}return!0}unsavedChangesExists(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}find_data_of_selected_country(){return this.countries.find(e=>e._id==this.selectedCountry)}get_cities_for_selected_state(){return new Promise((e,t)=>{this.ds.get_cities(this.selectedCountry,this.selectedState).pipe(Object(c.a)(this.unsub$)).subscribe(n=>{var i;return this.loading=!1,n.status?(this.cities=null===(i=n.data[0])||void 0===i?void 0:i.cities,e(!0)):(this.ps.newMessage("error","Cities Fetch Failed",n.message),t(!1))},e=>(this.handleError(e),t(!1)))})}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}handleError(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(_.a),r.Kb(d.a),r.Kb(a.f),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-location"]],decls:41,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form"],[1,"col-lg-12"],[1,"cat-list"],[1,"cat-sub-list"],[3,"click"],["src","assets/images/left-arrow.png","alt","Icons"],["src","assets/images/no-image.jpg","alt","Icons",2,"width","50px","height","50px","border-radius","50%"],[2,"color","red"],[1,"cat-select-list"],[1,"col-lg-4"],[1,"cat-select-list-des"],[1,"cat-select-head"],[1,"cat-seledt-link"],["class","yes-radio",4,"ngFor","ngForOf"],["class","loader-spinner",4,"ngIf"],[1,"yes-radio"],["type","radio","name","province","id","provines","data-provines","22","data-name","Alberta",3,"ngModel","value","ngModelChange","click"],["type","radio","name","region","id","regions","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],["type","radio","name","city","id","cities","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],[1,"loader-spinner"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"div",3),r.Qb(4,"form"),r.Qb(5,"div",0),r.Qb(6,"div",1),r.Qb(7,"div",4),r.Qb(8,"div",5),r.Qb(9,"ul",6),r.Qb(10,"li"),r.Qb(11,"a",7),r.Xb("click",(function(){return t.prevPage()})),r.Lb(12,"img",8),r.Pb(),r.Pb(),r.Qb(13,"li"),r.Lb(14,"img",9),r.Qb(15,"span",10),r.Jc(16,"Posting in"),r.Pb(),r.Jc(17),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(18,"div",11),r.Qb(19,"div",0),r.Qb(20,"form"),r.Qb(21,"div",1),r.Qb(22,"div",12),r.Qb(23,"div",13),r.Qb(24,"h2",14),r.Jc(25," Select a Province "),r.Pb(),r.Qb(26,"div",15),r.Hc(27,C,4,3,"label",16),r.Pb(),r.Pb(),r.Pb(),r.Qb(28,"div",12),r.Qb(29,"div",13),r.Qb(30,"h2",14),r.Jc(31," Select a Region "),r.Pb(),r.Qb(32,"div",15),r.Hc(33,M,4,3,"label",16),r.Pb(),r.Pb(),r.Pb(),r.Qb(34,"div",12),r.Qb(35,"div",13),r.Qb(36,"h2",14),r.Jc(37," Select a City "),r.Pb(),r.Qb(38,"div",15),r.Hc(39,w,4,3,"label",16),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Hc(40,x,1,0,"div",17)),2&e&&(r.Cb("submitting",t.submitting),r.yb(17),r.Lc(" ",t.ad.categoryName,". "),r.yb(10),r.ic("ngForOf",t.countries),r.yb(6),r.ic("ngForOf",t.states),r.yb(6),r.ic("ngForOf",t.cities),r.yb(1),r.ic("ngIf",t.loading))},directives:[g.A,g.o,g.p,i.m,i.n,g.u,g.c,g.n,g.q],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}section[_ngcontent-%COMP%]{position:relative}.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.select[_ngcontent-%COMP%]{min-width:32%;height:60px;margin:5px}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;background:#f5f5f5}[_nghost-%COMP%]     .p-dropdown-label{display:flex;align-items:center}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.loader-spinner[_ngcontent-%COMP%]{border:10px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:70px;height:70px;-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite;z-index:1000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media screen and (max-width:700px){.select[_ngcontent-%COMP%]{min-width:45%}}@media screen and (max-width:500px){.select[_ngcontent-%COMP%]{width:100%}}']}),e})();var k=n("QIUk"),I=n("dgC2");function J(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please enter a valid advertisement title."),r.Pb(),r.Pb())}function A(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please enter a valid name. (Only alphabets)"),r.Pb(),r.Pb())}function L(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please select a gender"),r.Pb(),r.Pb())}function z(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please enter a valid age. (Numeric age greater than 0)"),r.Pb(),r.Pb())}function N(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please enter a valid tag line."),r.Pb(),r.Pb())}function S(e,t){1&e&&(r.Qb(0,"div",41),r.Qb(1,"span",42),r.Jc(2,"Please enter a valid description."),r.Pb(),r.Pb())}const $=function(){return{height:"320px","font-size":"16px"}};function F(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",10),r.Qb(1,"label",11),r.Jc(2,"Advertisement Title"),r.Pb(),r.Qb(3,"p",12),r.Jc(4),r.Pb(),r.Qb(5,"div",13),r.Qb(6,"input",14,15),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.adTitle=t})),r.Pb(),r.Lb(8,"img",16),r.Pb(),r.Hc(9,J,3,0,"div",17),r.Pb(),r.Qb(10,"div",18),r.Qb(11,"div",19),r.Qb(12,"label",20),r.Jc(13,"Name"),r.Pb(),r.Qb(14,"span",21),r.Jc(15,"First Name Only"),r.Pb(),r.Qb(16,"p",12),r.Jc(17),r.Pb(),r.Qb(18,"input",22,23),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.firstName=t})),r.Pb(),r.Hc(20,A,3,0,"div",17),r.Pb(),r.Qb(21,"div",24),r.Qb(22,"label",25),r.Jc(23,"Sex"),r.Pb(),r.Qb(24,"select",26,27),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.gender=t})),r.Qb(26,"option",28),r.Jc(27,"Select a Gender"),r.Pb(),r.Qb(28,"option",29),r.Jc(29,"Male"),r.Pb(),r.Qb(30,"option",30),r.Jc(31,"Female"),r.Pb(),r.Qb(32,"option",31),r.Jc(33,"Others"),r.Pb(),r.Pb(),r.Hc(34,L,3,0,"div",17),r.Pb(),r.Qb(35,"div",32),r.Qb(36,"label",33),r.Jc(37,"Age"),r.Pb(),r.Qb(38,"input",34,35),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.age=t})),r.Pb(),r.Hc(40,z,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(41,"div",19),r.Qb(42,"label",36),r.Jc(43,"Tag Line"),r.Pb(),r.Qb(44,"input",37,38),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.tagline=t})),r.Pb(),r.Hc(46,N,3,0,"div",17),r.Pb(),r.Qb(47,"div",10),r.Qb(48,"label",39),r.Jc(49,"Description"),r.Pb(),r.Qb(50,"p-editor",40),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.description=t})),r.Pb(),r.Hc(51,S,3,0,"div",17),r.Pb()}if(2&e){const e=r.wc(7),t=r.wc(19),n=r.wc(25),i=r.wc(39),a=r.wc(45),s=r.bc(),o=r.wc(1);r.yb(4),r.Lc("",100-((null==s.adContent.adTitle?null:s.adContent.adTitle.length)||0)," characters left"),r.yb(2),r.ic("ngModel",s.adContent.adTitle),r.yb(3),r.ic("ngIf",o.submitted&&e.invalid),r.yb(8),r.Lc("",25-((null==s.adContent.firstName?null:s.adContent.firstName.length)||0)," charaters left"),r.yb(1),r.ic("ngModel",s.adContent.firstName),r.yb(2),r.ic("ngIf",o.submitted&&t.invalid),r.yb(4),r.ic("ngModel",s.adContent.gender),r.yb(2),r.ic("selected",""==s.adContent.gender),r.yb(2),r.ic("selected","male"==s.adContent.gender),r.yb(2),r.ic("selected","female"==s.adContent.gender),r.yb(2),r.ic("selected","others"==s.adContent.gender),r.yb(2),r.ic("ngIf",o.submitted&&n.invalid),r.yb(4),r.ic("ngModel",s.adContent.age),r.yb(2),r.ic("ngIf",o.submitted&&i.invalid&&i>0&&i<150),r.yb(4),r.ic("ngModel",s.adContent.tagline),r.yb(2),r.ic("ngIf",o.submitted&&a.invalid),r.yb(4),r.Fc(r.mc(20,$)),r.ic("ngModel",s.adContent.description),r.yb(1),r.ic("ngIf",o.submitted&&!s.adContent.description)}}let j=(()=>{class e{constructor(e,t,n,i){this.ren=e,this.ps=t,this.router=n,this.loader=i,this.submitting=!1,this.saved=!1,this.unsub$=new o.a,this.adContent={adTitle:"",firstName:"",description:"",gender:"",tagline:"",age:""}}ngOnInit(){this.ps.newPage(3),this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad._id||(this.ps.newMessage("info","Ad Not Initialized","Please start an ad by selecting category"),this.router.navigate(["/receiver/post/select-category"])),this.presetData(e)})}presetData(e){this.adContent.adTitle=e.adTitle?e.adTitle:"",this.adContent.firstName=e.firstName?e.firstName:"",this.adContent.age=e.age?e.age:"",this.adContent.description=e.description?e.description:"",this.adContent.gender=e.gender?e.gender:"",this.adContent.tagline=e.tagline?e.tagline:"",e.adTitle&&e.gender&&e.description&&e.firstName&&e.age&&(this.saved=!0)}ngAfterViewInit(){const e=document.getElementsByClassName("ql-formats"),t=this.ren.parentNode(e[0]);this.ren.removeChild(t,e[0]),this.ren.removeChild(t,e[2]),this.ren.removeChild(t,e[4])}save_ad_content(){return new Promise((e,t)=>{this.ps.save_ad_content(this.adContent).pipe(Object(c.a)(this.unsub$)).subscribe(n=>n.status?(this.ps.newMessage("success","Ad Content Saved","The content was saved!"),this.ps.NewAdData(n.data),this.stopload(),e(!0)):(this.ps.newMessage("error","Content Save Failed",n.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}prevPage(){this.router.navigate(["/receiver/post/select-location"])}nextPage(e,t="/receiver/post/upload-images"){if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.load(),this.saveAndMove(t)}checkAndHandleUnsavedChanges(e){this.checkUnsavedChanges()?this.handleUnsavedChanges().then(()=>{this.stopload(),this.router.navigate([e])}).catch(()=>this.stopload()):(this.stopload(),this.router.navigate([e]))}checkUnsavedChanges(){return this.ad.firstName!=this.adContent.firstName||this.ad.description!=this.adContent.description||this.ad.gender!=this.adContent.gender||this.ad.adTitle!=this.adContent.adTitle||this.ad.tagline!=this.adContent.tagline}handleUnsavedChanges(){return new Promise((e,t)=>{this.saveAndMove("/receiver/post/upload-images"),e(!0)})}saveAndMove(e){this.save_ad_content().then(()=>{this.stopload(),this.router.navigate([e])}).catch(()=>{this.stopload()})}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.D),r.Kb(d.a),r.Kb(a.f),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-ad-content"]],decls:18,vars:2,consts:[[1,"input-container",3,"ngSubmit"],["sadForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","content"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit","name","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"form-group"],["for","adTitle"],[1,"left-char"],[1,"form-icon","right-icon"],["type","text","name","adTitle","placeholder","","maxlength","60","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["adTitle","ngModel"],["src","assets/images/emoji-icon.png","alt","Icons"],["class","errors",4,"ngIf"],[1,"group"],["id","name-input",1,"form-group"],["for","name"],[1,"badge"],["type","text","autocapitalize","words","name","name","placeholder","","maxlength","25","pattern","[a-zA-Z ]+","required","","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name","ngModel"],["id","gender-input",1,"form-group","mx-md-3"],["for","gender"],["name","gender","id","selectGender","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["gender","ngModel"],["value","","disabled","",3,"selected"],["value","male",3,"selected"],["value","female",3,"selected"],["value","others",3,"selected"],["id","age-input",1,"form-group"],["for","age"],["type","number","name","age","pattern","[0-9]+","min","0","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["age","ngModel"],["for","tag"],["type","text","name","tag","placeholder","Describe your best attribute in short and catchy way","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["tag","ngModel"],["for","description"],["name","description","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.zc(e);const n=r.wc(1);return t.nextPage(n)})),r.Qb(2,"section",2),r.Qb(3,"p-card"),r.Hc(4,F,52,21,"ng-template",3),r.Pb(),r.Pb(),r.Qb(5,"div",4),r.Qb(6,"ul"),r.Qb(7,"li"),r.Qb(8,"button",5),r.Xb("click",(function(){return t.prevPage()})),r.Lb(9,"i",6),r.Jc(10,"Previous step"),r.Pb(),r.Pb(),r.Qb(11,"li"),r.Qb(12,"button",7),r.Xb("click",(function(){r.zc(e);const n=r.wc(1);return t.nextPage(n,"/receiver/")})),r.Jc(13," Save & Exit "),r.Pb(),r.Pb(),r.Qb(14,"li"),r.Qb(15,"button",8),r.Jc(16," Next step "),r.Lb(17,"i",9),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}2&e&&(r.yb(2),r.Cb("submitting",t.submitting))},directives:[g.A,g.o,g.p,k.a,s.j,g.c,g.k,g.w,g.n,g.q,i.n,g.t,g.x,g.r,g.z,g.s,I.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{flex:3;margin-right:5px}.group[_ngcontent-%COMP%]   #gender-input[_ngcontent-%COMP%]{flex:2;margin-right:5px}.group[_ngcontent-%COMP%]   #age-input[_ngcontent-%COMP%]{flex:1}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700;font-size:24px!important}.form-control[_ngcontent-%COMP%]{height:50px!important}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{min-width:100%;margin-right:0}}']}),e})();var D=n("mrSG"),X=n("tk/3"),B=n("JP5V");const H=["adImagesModalClose"],T=["identityImagesModalClose"],E=["adVideoModalClose"];function U(e,t){if(1&e){const e=r.Rb();r.Qb(0,"ul"),r.Qb(1,"li"),r.Qb(2,"a"),r.Lb(3,"i",57),r.Pb(),r.Pb(),r.Qb(4,"li"),r.Lb(5,"img",58),r.cc(6,"server"),r.Pb(),r.Qb(7,"li"),r.Jc(8),r.Pb(),r.Qb(9,"li"),r.Qb(10,"a",59),r.Xb("click",(function(){r.zc(e);const n=t.$implicit,i=t.index;return r.bc().deleteAdImage(n,i)})),r.Jc(11,"-"),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=t.index;r.yb(5),r.jc("src",r.dc(6,2,e),r.Cc),r.yb(3),r.Lc("Ad Image ",n+1,"/10 ")}}function K(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",60),r.Qb(1,"label",61),r.Lb(2,"img",62),r.Qb(3,"input",63),r.Xb("click",(function(){r.zc(e);const n=t.$implicit,i=t.index;return r.bc().ad_image_selection_change(n.imagePath,i)})),r.Pb(),r.Lb(4,"span",64),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit;r.yb(2),r.jc("src",e.imgPath,r.Cc)}}function V(e,t){if(1&e&&(r.Qb(0,"div",65),r.Qb(1,"label",61),r.Lb(2,"img",62),r.cc(3,"server"),r.Pb(),r.Pb()),2&e){const e=t.$implicit;r.yb(2),r.jc("src",r.dc(3,1,e),r.Cc)}}function R(e,t){if(1&e&&(r.Qb(0,"div",60),r.Qb(1,"label",61),r.Lb(2,"img",62),r.Pb(),r.Pb()),2&e){const e=t.$implicit;r.yb(2),r.jc("src",e.imgPath,r.Cc)}}let q=(()=>{class e{constructor(e,t,n){this.ps=e,this.router=t,this.loader=n,this.submitting=!1,this.currentSelectedAdImages=[],this.newlyAddedAdImages=0,this.maxAdImages=10,this.currentSelectedIdentityImages=[],this.newlyAddedIdentityImages=0,this.uploadedAdVideo=null,this.newVideoLink=null,this.unsub$=new o.a,this.uploadedAdImages=[],this.uploadedIdentityImages=[]}ngOnInit(){this.ps.newPage(4),this.load(),this.get_ad_data_from_service()}get_ad_data_from_service(){this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{var t;this.ad=e,this.stopload(),(null===(t=this.ad)||void 0===t?void 0:t._id)||(this.ps.newMessage("info","Ad Not Initialized","Please start a new ad by selecting category"),this.router.navigate(["/receiver/post/select-category"])),e.adImages instanceof Array&&(this.uploadedAdImages=e.adImages,this.maxAdImages=10-this.uploadedAdImages.length),e.identityImages instanceof Array&&(this.uploadedIdentityImages=e.identityImages),e.adVideo&&(this.uploadedAdVideo=e.adVideo)})}uploadAdImages(e){this.load();const t=e;this.ps.save_ad_images(t).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.handle_ad_image_upload_http_events(e,t)},this.handle_error.bind(this))}handle_ad_image_upload_http_events(e,t){if(e.type==X.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof X.f){const n=e.body;this.stopload(),n.status?this.handle_ad_images_upload_success(n,t):this.ps.newMessage("error","Couldn't Upload",n.message)}}handle_ad_images_upload_success(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedAdImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedAdImages=[],this.adImagesModalCloseButton.nativeElement.click()}uploadIdentityImages(e){if(this.ad.identityImages.length>0&&!confirm("A photo identity image is already Uploaded, Do You want to ReUpload?"))return;const t=e;this.ps.save_identity_images(t).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.handle_identity_images_upload_http_events(e,t)},e=>{this.handle_error(e)})}handle_identity_images_upload_http_events(e,t){if(e.type==X.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total),"Uploading.....");else if(e instanceof X.f){const n=e.body;this.stopload(),n.status?this.handle_identity_images_upload_success(n,t):this.ps.newMessage("error","Couldn't Upload",n.message)}}handle_identity_images_upload_success(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedIdentityImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedIdentityImages=[],this.identityImagesModalCloseButton.nativeElement.click()}uploadAdVideo(){this.confirmVideoReupload()&&this.ps.save_ad_video_link(this.newVideoLink).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.handle_ad_video_upload_http_events(e)},e=>{this.handle_error(e),this.stopload()})}confirmVideoReupload(){return!this.ad.adVideo||confirm("A Video is already saved, Do You want to save new video?")}handle_ad_video_upload_http_events(e){if(e.type==X.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof X.f){const t=e.body;this.stopload(),t.status?this.handle_ad_video_upload(t):this.ps.newMessage("error","Couldn't Upload",t.message)}}handle_ad_video_upload(e){this.ps.newMessage("success","Video Was Added","The Video was successfully Added"),this.newVideoLink=null,this.adVideoModalCloseButton.nativeElement.click(),this.ps.NewAdData(e.data)}nextPage(e="/receiver/post/user-details"){this.uploadedAdImages.length>0&&this.uploadedIdentityImages.length>0&&this.uploadedAdVideo?this.checkUnuploadedFiles()?this.confirm_to_discard_selected_images()&&this.router.navigate([e]):this.router.navigate([e]):this.ps.newMessage("error","Media Files Missing","Please upload required media")}prevPage(){this.router.navigate(["/receiver/post/ad-content"])}checkUnuploadedFiles(){return this.currentSelectedAdImages.length>0||this.currentSelectedIdentityImages.length>0||null!=this.newVideoLink}select_new_image_for_ad_images(e,t){return Object(D.a)(this,void 0,void 0,(function*(){this.submitting=!0;const n=e.target.files;for(let e of n)if(this.currentSelectedAdImages.length<=10-this.uploadedAdImages.length){const t=yield this.convertToBase64(e);this.currentSelectedAdImages.push({imgPath:t,blob:e,selected:!0})}else this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");t.reset(),this.submitting=!1}))}select_new_image_for_identity_images(e,t){return Object(D.a)(this,void 0,void 0,(function*(){const n=e.target.files[0],i=yield this.convertToBase64(n);this.currentSelectedIdentityImages=[{imgPath:i,blob:n}],t.reset()}))}convertToBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{t(i.result)},i.onerror=()=>{n("error in parsing")}})}ad_image_selection_change(e,t){var n;if((null===(n=this.currentSelectedAdImages[t])||void 0===n?void 0:n.imgPath)==e)this.currentSelectedAdImages[t].selected=!this.currentSelectedAdImages[t].selected;else{const t=this.currentSelectedAdImages.find(t=>t.imgPath==e);t.selected=!t.selected}}finalize_selected_ad_images(){const e=this.currentSelectedAdImages.map(e=>{if(1==e.selected)return e.blob});this.uploadAdImages(e)}finalize_selected_identity_images(){this.uploadIdentityImages([this.currentSelectedIdentityImages[0].blob])}confirm_to_discard_selected_images(){return!1}deleteAdImage(e,t){this.load(),this.ps.deleteAdImage(e).pipe(Object(c.a)(this.unsub$)).subscribe(n=>{n.status?(this.ps.newMessage("success","Delete Ad Image","Image was deleted from server"),this.remove_image_from_views(e,t),this.ad.adImages=this.uploadedAdImages,this.ps.NewAdData(this.ad)):(this.ps.newMessage("error","Failed To Delete",n.message),this.stopload())},this.handle_error.bind(this))}remove_image_from_views(e,t){if(this.uploadedAdImages[t]==e)this.uploadedAdImages.splice(t,1);else{const t=this.uploadedAdImages.indexOf(e);this.uploadedAdImages.splice(t,1)}}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Couldn't Save",e.error.message),this.stopload()}openFileDialog(e){e.click()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){var e,t,n;this.unsub$.next(!0),this.unsub$.complete(),null===(e=this.adImagesModalCloseButton)||void 0===e||e.nativeElement.click(),null===(t=this.identityImagesModalCloseButton)||void 0===t||t.nativeElement.click(),null===(n=this.adVideoModalCloseButton)||void 0===n||n.nativeElement.click()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(a.f),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-photos"]],viewQuery:function(e,t){var n;1&e&&(r.Qc(H,!0),r.Qc(T,!0),r.Qc(E,!0)),2&e&&(r.vc(n=r.Yb())&&(t.adImagesModalCloseButton=n.first),r.vc(n=r.Yb())&&(t.identityImagesModalCloseButton=n.first),r.vc(n=r.Yb())&&(t.adVideoModalCloseButton=n.first))},decls:133,vars:12,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form"],[1,"col-lg-12"],[1,"upload-img","text-center"],["data-toggle","modal","data-name1","photo","id","pic1","data-target",".adImg-modal"],["aria-hidden","true",1,"fa","fa-picture-o"],["data-toggle","modal","data-target",".video-modal"],["aria-hidden","true",1,"fa","fa-video-camera"],["data-toggle","modal","data-name","photo","id","pic","data-target",".identityImg-modal"],[1,"img-list"],[1,"img-sub-list"],["id","show_image"],[4,"ngFor","ngForOf"],[1,"top-tip"],[1,"fa","fa-info-circle"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","adImg-modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["adImagesInputForm",""],[1,"modal-header","text-left",2,"border-bottom","none"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["adImagesModalClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"upload-file"],["id","saved-pictures",1,"moderation__grid"],[1,"row","gallery-img-id"],["class","col-sm-2 selectedImages",4,"ngFor","ngForOf"],["id","prepend_div",1,"col-sm-2"],["for","gallery-photo-add",1,"label-head"],["type","file","name","adImages","multiple","","id","gallery-photo-add","accept","image/jpg, image/png",3,"change"],[1,"modal-footer"],["type","button","name","submit",1,"btn","btn-select",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","identityImg-modal","fade","bd-example-modal-lg"],["identityImagesInputForm",""],["identityImagesModalClose",""],["class","col-sm-2 uploadedImages",4,"ngFor","ngForOf"],["for","gallery-photo-add-identity",1,"label-head"],["type","file","name","identityImages","id","gallery-photo-add-identity","accept","image/jpg, image/png",2,"display","none",3,"change"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","img-modal","fade","video-modal","bd-example-modal-lg"],[1,"modal-header","text-left",2,"border-bottom","0px"],["adVideoModalClose",""],[1,"cssform"],[1,"col-12","px-0"],["type","url","name","video","required","","placeholder","e.g. http://youtube.com/JDJSU72 or http://vimeo.com/8273612",1,"form-control",3,"ngModel","ngModelChange"],[1,"video-container"],[1,"loading-message"],["id","cartoonVideo","width","100%","height","250","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","frameborder","0","allowfullscreen","",1,"embed-responsive-item",3,"src"],["type","submit","name","submit",1,"btn","btn-select",3,"click"],[1,"fa","fa-bars"],["alt","Images",3,"src"],["href","javascript:void(0)",1,"minus-btn",3,"click"],[1,"col-sm-2","selectedImages"],[1,"image-with-selection"],[1,"image-with-selection__image",3,"src"],["type","checkbox","checked","",1,"image-with-selection__checkbox",3,"click"],[1,"image-with-selection__checkmark"],[1,"col-sm-2","uploadedImages"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form"),r.Qb(4,"div",3),r.Qb(5,"div",0),r.Qb(6,"div",1),r.Qb(7,"div",4),r.Qb(8,"div",5),r.Qb(9,"ul"),r.Qb(10,"li",6),r.Lb(11,"i",7),r.Jc(12," Add Pictures"),r.Qb(13,"span"),r.Jc(14),r.Pb(),r.Pb(),r.Qb(15,"li",8),r.Lb(16,"i",9),r.Jc(17," Add Video"),r.Qb(18,"span"),r.Jc(19),r.Pb(),r.Pb(),r.Qb(20,"li",10),r.Lb(21,"i",7),r.Jc(22," Profile ID"),r.Qb(23,"span"),r.Jc(24,"Photo"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(25,"div",11),r.Qb(26,"div",12),r.Qb(27,"span",13),r.Hc(28,U,12,4,"ul",14),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(29,"div",15),r.Qb(30,"h3"),r.Lb(31,"i",16),r.Jc(32," Top tip for a successful advertisement "),r.Pb(),r.Qb(33,"p"),r.Jc(34," It's obvious that adding a good photo will increase your ad's potential for success, but it's equally important to have agood number of photos, especially from different angles,perspectives,and locations. Experiment. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(35,"div",17),r.Qb(36,"ul"),r.Qb(37,"li"),r.Qb(38,"button",18),r.Xb("click",(function(){return t.prevPage()})),r.Lb(39,"i",19),r.Jc(40,"Previous step"),r.Pb(),r.Pb(),r.Qb(41,"li"),r.Qb(42,"button",20),r.Xb("click",(function(){return t.nextPage("/receiver/")})),r.Jc(43," Save & Exit "),r.Pb(),r.Pb(),r.Qb(44,"li"),r.Qb(45,"button",20),r.Xb("click",(function(){return t.nextPage()})),r.Jc(46," Next step "),r.Lb(47,"i",21),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(48,"div",22),r.Qb(49,"div",23),r.Qb(50,"div",24),r.Qb(51,"div",24),r.Qb(52,"form",null,25),r.Qb(54,"div",26),r.Qb(55,"h5",27),r.Jc(56,"Select from your computer"),r.Pb(),r.Qb(57,"button",28,29),r.Qb(59,"span",30),r.Jc(60,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(61,"div",31),r.Qb(62,"div",32),r.Qb(63,"div",33),r.Qb(64,"div",34),r.Hc(65,K,5,1,"div",35),r.Qb(66,"div",36),r.Qb(67,"label",37),r.Qb(68,"span"),r.Jc(69,"+"),r.Pb(),r.Jc(70,"Add"),r.Pb(),r.Qb(71,"input",38),r.Xb("change",(function(n){r.zc(e);const i=r.wc(53);return t.select_new_image_for_ad_images(n,i)})),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(72,"div",39),r.Qb(73,"button",40),r.Xb("click",(function(){return t.finalize_selected_ad_images()})),r.Jc(74,"Use selected Pics "),r.Lb(75,"i",21),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(76,"div",41),r.Qb(77,"div",23),r.Qb(78,"div",24),r.Qb(79,"div",24),r.Qb(80,"form",null,42),r.Qb(82,"div",26),r.Qb(83,"h5",27),r.Jc(84,"Provide To Passport Like Photos No Head Or Face Covering. For Verification Delivery And Cash Pickups"),r.Pb(),r.Qb(85,"button",28,43),r.Qb(87,"span",30),r.Jc(88,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(89,"div",31),r.Qb(90,"div",32),r.Qb(91,"div",33),r.Qb(92,"div",34),r.Hc(93,V,4,3,"div",44),r.Hc(94,R,3,1,"div",35),r.Qb(95,"div",36),r.Qb(96,"label",45),r.Qb(97,"span"),r.Jc(98,"+"),r.Pb(),r.Jc(99,"Add"),r.Pb(),r.Qb(100,"input",46),r.Xb("change",(function(n){r.zc(e);const i=r.wc(81);return t.select_new_image_for_identity_images(n,i)})),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(101,"div",39),r.Qb(102,"button",40),r.Xb("click",(function(){return t.finalize_selected_identity_images()})),r.Jc(103,"Use selected Pics "),r.Lb(104,"i",21),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(105,"div",47),r.Qb(106,"div",23),r.Qb(107,"div",24),r.Qb(108,"div",24),r.Qb(109,"div",48),r.Qb(110,"h5",27),r.Jc(111,"Video URL"),r.Pb(),r.Qb(112,"button",28,49),r.Qb(114,"span",30),r.Jc(115,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(116,"form",50),r.Qb(117,"div",31),r.Qb(118,"div",32),r.Qb(119,"ul"),r.Qb(120,"li",51),r.Qb(121,"input",52),r.Xb("ngModelChange",(function(e){return t.newVideoLink=e})),r.Pb(),r.Pb(),r.Pb(),r.Qb(122,"div",53),r.Qb(123,"div",54),r.Qb(124,"h4"),r.Qb(125,"small"),r.Jc(126,"Preview will load here."),r.Pb(),r.Pb(),r.Pb(),r.Lb(127,"iframe",55),r.cc(128,"safe"),r.Pb(),r.Pb(),r.Pb(),r.Qb(129,"div",39),r.Qb(130,"button",56),r.Xb("click",(function(){return t.uploadAdVideo()})),r.Jc(131," Use selected Video "),r.Lb(132,"i",21),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}2&e&&(r.Cb("submitting",t.submitting),r.yb(14),r.Lc("",10-t.uploadedAdImages.length," Left"),r.yb(5),r.Lc("",t.uploadedAdVideo?"0":"1"," Left"),r.yb(9),r.ic("ngForOf",t.uploadedAdImages),r.yb(37),r.ic("ngForOf",t.currentSelectedAdImages),r.yb(28),r.ic("ngForOf",t.uploadedIdentityImages),r.yb(1),r.ic("ngForOf",t.currentSelectedIdentityImages),r.yb(27),r.ic("ngModel",t.newVideoLink),r.yb(6),r.ic("src",r.dc(128,10,t.newVideoLink||t.uploadedAdVideo),r.Bc))},directives:[g.A,g.o,g.p,i.m,g.c,g.w,g.n,g.q],pipes:[B.a,m.a],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}button.btn.btn-select[_ngcontent-%COMP%]{color:#fff;font-weight:700;background:#01768a;padding:9px 30px 5px}.image-with-selection__checkmark[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:18px;height:18px;top:4.5px;right:4.5px;border:1.5px solid hsla(0,0%,100%,.9);background-color:rgba(0,0,0,.5);z-index:10;border-radius:50%}.image-with-selection__checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute}.image-with-selection__checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]:after{left:6.5px;top:3.5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.image-with-selection[_ngcontent-%COMP%]{width:100%;border-radius:6px;overflow:hidden;display:flex;position:relative;margin-right:15px;margin-bottom:15px}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]{background-color:#58a688;box-shadow:0 2px 9px 0 rgba(0,0,0,.76);border:none}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:4px 0 0;margin-top:1px\\9;line-height:normal}.image-with-selection__image[_ngcontent-%COMP%]{width:100px;height:100px}']}),e})();var G=n("CwEU"),Y=n("arFO");function Z(e,t){1&e&&r.Jc(0," Any information provided below is used by myissues Inc. ")}function W(e,t){1&e&&r.Jc(0," This will be use for verification for cash and food delivery items. The information must be correct in order to collect any donations make to on this website. ")}function ee(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid first name"),r.Pb(),r.Pb())}function te(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid last name"),r.Pb(),r.Pb())}function ne(e,t){1&e&&(r.Qb(0,"div",96),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid date of birth"),r.Pb(),r.Pb())}function ie(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid age"),r.Pb(),r.Pb())}function ae(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please select a valid country"),r.Pb(),r.Pb())}function se(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please select a valid state"),r.Pb(),r.Pb())}function oe(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please select a valid city"),r.Pb(),r.Pb())}function ce(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid address"),r.Pb(),r.Pb())}function re(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid zip code"),r.Pb(),r.Pb())}function de(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid emergency number"),r.Pb(),r.Pb())}function le(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid contact number"),r.Pb(),r.Pb())}function be(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid reference name(Only alphabets and numerics)"),r.Pb(),r.Pb())}function pe(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid contact number"),r.Pb(),r.Pb())}function ue(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid reference extension"),r.Pb(),r.Pb())}function ge(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid Reference Occupation(Only alphabets and spaces)"),r.Pb(),r.Pb())}function he(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid Organization Name(Only alphabets and spaces)"),r.Pb(),r.Pb())}function me(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid reference name (Only Alphabets and spaces)"),r.Pb(),r.Pb())}function Pe(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid reference extension"),r.Pb(),r.Pb())}function fe(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid reference occupation(Only alphabets and spaces)"),r.Pb(),r.Pb())}function ve(e,t){1&e&&(r.Qb(0,"div",95),r.Qb(1,"span",96),r.Jc(2,"Please enter a valid Organization Name(Only alphanumeric and spaces)"),r.Pb(),r.Pb())}function ye(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",12),r.Qb(1,"div",13),r.Qb(2,"label",14),r.Jc(3,"First Name*"),r.Pb(),r.Qb(4,"input",15,16),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.firstName=t})),r.Pb(),r.Hc(6,ee,3,0,"div",17),r.Pb(),r.Qb(7,"div",18),r.Qb(8,"label",19),r.Jc(9,"Last Name*"),r.Pb(),r.Qb(10,"input",20,21),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.lastName=t})),r.Pb(),r.Hc(12,te,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(13,"div",12),r.Qb(14,"div",22,23),r.Qb(16,"label",14),r.Jc(17,"Date Of Birth*"),r.Pb(),r.Qb(18,"div",24),r.Qb(19,"p-inputMask",25,26),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().dob=t})),r.Pb(),r.Hc(21,ne,3,0,"div",27),r.Pb(),r.Pb(),r.Qb(22,"div",18),r.Qb(23,"label",28),r.Jc(24,"Age*"),r.Pb(),r.Qb(25,"input",29,30),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.age=t})),r.Pb(),r.Hc(27,ie,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(28,"div",12),r.Qb(29,"div",22),r.Qb(30,"label",31),r.Jc(31,"Province*"),r.Pb(),r.Qb(32,"div",32),r.Qb(33,"p-dropdown",33),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.country=t}))("onChange",(function(t){return r.zc(e),r.bc().change_country(t)})),r.Pb(),r.Pb(),r.Hc(34,ae,3,0,"div",17),r.Pb(),r.Qb(35,"div",22),r.Qb(36,"label",34),r.Jc(37,"State*"),r.Pb(),r.Qb(38,"div",35),r.Qb(39,"p-dropdown",36),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.state=t}))("onChange",(function(t){return r.zc(e),r.bc().change_state(t)})),r.Pb(),r.Hc(40,se,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(41,"div",22),r.Qb(42,"label",37),r.Jc(43,"City*"),r.Pb(),r.Qb(44,"div",38),r.Qb(45,"p-dropdown",39),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.city=t}))("onChange",(function(t){return r.zc(e),r.bc().change_city(t)})),r.Pb(),r.Hc(46,oe,3,0,"div",17),r.Pb(),r.Pb(),r.Pb(),r.Qb(47,"div",12),r.Qb(48,"div",13),r.Qb(49,"label",40),r.Jc(50,"Address*"),r.Pb(),r.Qb(51,"input",41,42),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.address=t})),r.Pb(),r.Hc(53,ce,3,0,"div",17),r.Pb(),r.Qb(54,"div",13),r.Qb(55,"label",43),r.Jc(56,"Zip Code*"),r.Pb(),r.Qb(57,"input",44,45),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.zipCode=t})),r.Pb(),r.Hc(59,re,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(60,"div",12),r.Qb(61,"div",22),r.Qb(62,"label",46),r.Jc(63,"Emergency Number*"),r.Pb(),r.Qb(64,"p-inputMask",47),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.emergencyContact=t})),r.Pb(),r.Hc(65,de,3,0,"div",17),r.Pb(),r.Qb(66,"div",13),r.Qb(67,"label",48),r.Jc(68,"Contact Number*"),r.Pb(),r.Qb(69,"p-inputMask",49),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.contact=t})),r.Pb(),r.Hc(70,le,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(71,"div",12),r.Qb(72,"div",22),r.Qb(73,"label",50),r.Jc(74,"Email*"),r.Pb(),r.Qb(75,"input",51),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.email=t})),r.Pb(),r.Pb(),r.Pb(),r.Qb(76,"p"),r.Qb(77,"strong"),r.Jc(78,"Note: "),r.Pb(),r.Jc(79," Provide Us with someone in the community that can verify that you're in crisis and need help. This person must work in the community in any capacity. "),r.Pb(),r.Qb(80,"h4"),r.Qb(81,"small"),r.Qb(82,"strong"),r.Jc(83,"Reference 1"),r.Pb(),r.Pb(),r.Pb(),r.Qb(84,"div",52),r.Qb(85,"div",53),r.Qb(86,"label",54),r.Jc(87,"Name*"),r.Pb(),r.Qb(88,"input",55,56),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours1.name=t})),r.Pb(),r.Hc(90,be,3,0,"div",17),r.Pb(),r.Qb(91,"div",57),r.Qb(92,"label",58),r.Jc(93,"Contact Number*"),r.Pb(),r.Qb(94,"p-inputMask",59,60),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours1.contact=t})),r.Pb(),r.Hc(96,pe,3,0,"div",17),r.Pb(),r.Qb(97,"div",61),r.Qb(98,"label",62),r.Jc(99,"Ext.*"),r.Pb(),r.Qb(100,"input",63,64),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours1.extension=t})),r.Pb(),r.Hc(102,ue,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(103,"div",12),r.Qb(104,"div",13),r.Qb(105,"label",65),r.Jc(106,"Occupation*"),r.Pb(),r.Qb(107,"input",66,67),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours1.occupation=t})),r.Pb(),r.Hc(109,ge,3,0,"div",17),r.Pb(),r.Qb(110,"div",18),r.Qb(111,"label",68),r.Jc(112,"Organization Name*"),r.Pb(),r.Qb(113,"input",69,70),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours1.organization=t})),r.Pb(),r.Hc(115,he,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(116,"h4"),r.Qb(117,"small"),r.Qb(118,"strong"),r.Jc(119,"Reference 2"),r.Pb(),r.Pb(),r.Pb(),r.Qb(120,"div",52),r.Qb(121,"div",53),r.Qb(122,"label",71),r.Jc(123,"Name"),r.Pb(),r.Qb(124,"input",72,73),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours2.name=t})),r.Pb(),r.Hc(126,me,3,0,"div",17),r.Pb(),r.Qb(127,"div",57),r.Qb(128,"label",74),r.Jc(129,"Contact Number"),r.Pb(),r.Qb(130,"p-inputMask",75),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours2.contact=t})),r.Pb(),r.Pb(),r.Qb(131,"div",61),r.Qb(132,"label",76),r.Jc(133,"Ext."),r.Pb(),r.Qb(134,"input",77,78),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours2.extension=t})),r.Pb(),r.Hc(136,Pe,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(137,"div",12),r.Qb(138,"div",13),r.Qb(139,"label",79),r.Jc(140,"Occupation"),r.Pb(),r.Qb(141,"input",80,81),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours2.occupation=t})),r.Pb(),r.Hc(143,fe,3,0,"div",17),r.Pb(),r.Qb(144,"div",18),r.Qb(145,"label",82),r.Jc(146,"Organization Name"),r.Pb(),r.Qb(147,"input",83,78),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().contact.neighbours2.organization=t})),r.Pb(),r.Hc(149,ve,3,0,"div",17),r.Pb(),r.Pb(),r.Qb(150,"div",84),r.Qb(151,"div",85),r.Lb(152,"input",86),r.Qb(153,"div",87),r.Lb(154,"div",88),r.Qb(155,"div",89),r.Qb(156,"div",90),r.Qb(157,"output",91),r.Jc(158," 50 "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(159,"div",12),r.Qb(160,"div",22),r.Qb(161,"p",92),r.Lb(162,"i",93),r.Jc(163," For your privacy, please only provide your approximate location. "),r.Pb(),r.Lb(164,"iframe",94),r.Pb(),r.Pb()}if(2&e){const e=r.wc(5),t=r.wc(11),n=r.wc(26),i=r.wc(52),a=r.wc(58),s=r.wc(89),o=r.wc(101),c=r.wc(108),d=r.wc(114),l=r.wc(125),b=r.wc(135),p=r.wc(142),u=r.bc(),g=r.wc(1);r.yb(4),r.ic("ngModel",u.contact.firstName),r.yb(2),r.ic("ngIf",g.submitted&&e.invalid),r.yb(4),r.ic("ngModel",u.contact.lastName),r.yb(2),r.ic("ngIf",g.submitted&&t.invalid),r.yb(7),r.ic("styleClass","form-control")("ngModel",u.dob),r.yb(2),r.ic("ngIf",g.submitted&&!u.contact.dob),r.yb(4),r.ic("ngModel",u.contact.age),r.yb(2),r.ic("ngIf",g.submitted&&n.invalid),r.yb(6),r.ic("options",u.countries)("filter",!0)("ngModel",u.contact.country)("dataKey",u._id)("showClear",!1),r.yb(1),r.ic("ngIf",g.submitted&&!u.contact.country),r.yb(5),r.ic("options",u.states)("filter",!0)("ngModel",u.contact.state),r.yb(1),r.ic("ngIf",g.submitted&&!u.contact.state),r.yb(5),r.ic("options",u.cities)("filter",!0)("ngModel",u.contact.city),r.yb(1),r.ic("ngIf",g.submitted&&!u.contact.city),r.yb(5),r.ic("ngModel",u.contact.address),r.yb(2),r.ic("ngIf",g.submitted&&i.invalid),r.yb(4),r.ic("ngModel",u.contact.zipCode),r.yb(2),r.ic("ngIf",g.submitted&&a.invalid),r.yb(5),r.ic("styleClass","form-control")("ngModel",u.contact.emergencyContact),r.yb(1),r.ic("ngIf",g.submitted&&!u.contact.emergencyContact),r.yb(4),r.ic("styleClass","form-control")("ngModel",u.contact.contact),r.yb(1),r.ic("ngIf",g.submitted&&!u.contact.contact),r.yb(5),r.ic("ngModel",u.contact.email),r.yb(13),r.ic("ngModel",u.contact.neighbours1.name),r.yb(2),r.ic("ngIf",g.submitted&&s.invalid),r.yb(4),r.ic("styleClass","form-control")("ngModel",u.contact.neighbours1.contact),r.yb(2),r.ic("ngIf",g.submitted&&!u.contact.neighbours1.contact),r.yb(4),r.ic("ngModel",u.contact.neighbours1.extension),r.yb(2),r.ic("ngIf",g.submitted&&o.invalid),r.yb(5),r.ic("ngModel",u.contact.neighbours1.occupation),r.yb(2),r.ic("ngIf",g.submitted&&c.invalid),r.yb(4),r.ic("ngModel",u.contact.neighbours1.organization),r.yb(2),r.ic("ngIf",g.submitted&&d.invalid),r.yb(9),r.ic("ngModel",u.contact.neighbours2.name),r.yb(2),r.ic("ngIf",g.submitted&&l.invalid),r.yb(4),r.ic("styleClass","form-control")("ngModel",u.contact.neighbours2.contact),r.yb(4),r.ic("ngModel",u.contact.neighbours2.extension),r.yb(2),r.ic("ngIf",g.submitted&&b.invalid),r.yb(5),r.ic("ngModel",u.contact.neighbours2.occupation),r.yb(2),r.ic("ngIf",g.submitted&&p.invalid),r.yb(4),r.ic("ngModel",u.contact.neighbours2.organization),r.yb(2),r.ic("ngIf",g.submitted&&b.invalid)}}let Qe=(()=>{class e{constructor(e,t,n,i,a){this.ps=e,this.ds=t,this.router=n,this.loader=i,this.ss=a,this.submitting=!1,this.saved=!1,this.unsub$=new o.a,this.countries=[],this.states=[],this.cities=[],this.initialize_contact()}set dob(e){this.contact.dob=e;let t=new Date(e);"Invalid Date"!=t&&this.setAge(t)}get dob(){return this.contact.dob}ngOnInit(){this.ps.newPage(5),this.check_session(),this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.isAdInitialized(e),this.contact=Object.assign({},e)})}isAdInitialized(e){e._id||(this.ps.newMessage("error","Ad Not Initialized","Please initialize the ad first"),this.router.navigate(["/receiver/post/select-category"]))}check_session(){this.ss.getUserSessionObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.contact.firstName=e.firstname,this.contact.lastName=e.lastname,this.contact.email=e.email})}ngAfterViewInit(){this.get_country().then(()=>{setTimeout(()=>this.preset_selectors(),1e3)})}save_contact(){return new Promise((e,t)=>{this.ps.save_contact(this.contact).pipe(Object(c.a)(this.unsub$)).subscribe(n=>{this.handle_response(n,e,t)},e=>(this.handle_error(e),t(!1)))})}handle_response(e,t,n){return e.status?(this.ps.newMessage("success","Details Saved","Contact details are successfully saved"),this.ps.NewAdData(e.data),t(!0)):(this.ps.newMessage("error","Couldn't Save Details",e.message),n(!1))}get_country(){return new Promise((e,t)=>{this.ds.get_countries().pipe(Object(c.a)(this.unsub$)).subscribe(n=>n.status?(this.countries=n.data,e(!0)):(this.ps.newMessage("error","Country Fetch Failed",n.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}change_country(e){const t=this.countries.find(e=>e._id==this.contact.country);this.states=t.states,this.contact.state=t.countryName}change_state(e){return new Promise((e,t)=>{this.ds.get_cities(this.contact.country,this.contact.state).pipe(Object(c.a)(this.unsub$)).subscribe(n=>n.status?(this.cities=n.data[0].cities,e(!0)):(this.ps.newMessage("error","Cities Fetch Failed",n.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}change_city(e){}preset_selectors(){if(this.ad.country){const e=this.countries.find(e=>this.ad.country==e.countryName);this.contact.country=e?e._id:"",this.states=e?e.states:[],this.ad.state&&(this.contact.state=this.ad.state,this.preset_city_selector())}}preset_city_selector(){this.change_state({}).then(()=>{this.ad.city&&(this.contact.city=this.ad.city,this.saved=!0)})}nextPage(e,t="/receiver/post/upgrades"){if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.valid_dob(e)&&(this.load(),this.save_contact().then(()=>{this.stopload(),this.router.navigate([t],{queryParams:{mode:"preview"}})}).catch(()=>{this.stopload()}))}valid_dob(e){var t=new Date(e.value.dob),n=Date.now()-t.getTime(),i=new Date(n);let a=Math.abs(i.getUTCFullYear()-1970);return"Invalid Date"==t?(this.ps.newMessage("error","Invalid DOB","Invalid date of birth"),!1):(a!=e.value.age&&(this.contact.age=a),!(e.value.age<=0&&(this.ps.newMessage("error","Invalid Age","Age cannot be less than or equal to 0"),1)))}setAge(e){var t=e,n=Date.now()-t.getTime();if(n<0)this.contact.age=-1,this.ds.newMessage("error","Invalid Date","Please select valid date of birth");else{var i=new Date(n);let e=Math.abs(i.getUTCFullYear()-1970);this.contact.age=e}}prevPage(){this.router.navigate(["/receiver/post/upload-images"])}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","Sorry some error occured"):this.ps.newMessage("error","Error Occured",e.error.message)}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}initialize_contact(){this.contact={firstName:"",lastName:"",age:null,dob:"",country:"",state:"",city:"",zipCode:"",contact:"",emergencyContact:"",email:"",neighbours1:{name:"",contact:"",extension:"",occupation:"",organization:""},neighbours2:{name:"",contact:"",extension:"",occupation:"",organization:""}}}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(_.a),r.Kb(a.f),r.Kb(u.a),r.Kb(p.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-user-details"]],decls:20,vars:2,consts:[["action","",1,"input-container",3,"ngSubmit"],["detailsForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","title"],["pTemplate","subtitle"],["pTemplate","content"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"group"],["id","name-input",1,"form-group"],["for","name"],["type","text","autocapitalize","words","name","firstName","placeholder","Only your first name","pattern","[a-zA-Z]+ *","ngModel","","disabled","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["firstName","ngModel"],["class","errors",4,"ngIf"],["id","gender-input",1,"form-group"],["for","gender"],["type","text","name","lastName","autocapitalize","words","placeholder","Only your last name","pattern","[a-zA-Z]+","pattern","[a-zA-Z]+ *","ngModel","","required","","disabled","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["lastName","ngModel"],[1,"form-group"],["inputMask",""],[1,"p-inputmask-control"],["inputId","inputmask","placeholder","mm/dd/yyyy","name","dob","mask","99/99/9999","styleClass","form-control","ngModel","",3,"styleClass","ngModel","ngModelChange"],["dob1","ngModel"],["class","error",4,"ngIf"],["for","age"],["type","number","min","0","name","age","placeholder","","pattern","[0-9]+","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["age","ngModel"],["for","selectCountry"],[1,"select","select-country","form-group"],["placeholder","Select a Country","optionLabel","countryName","optionValue","_id","name","selectCountry",3,"options","filter","ngModel","dataKey","showClear","ngModelChange","onChange"],["for","state"],[1,"select","select-state"],["placeholder","Select a state","optionLabel","stateName","optionValue","stateName","name","selectState",3,"options","filter","ngModel","ngModelChange","onChange"],["for","city"],[1,"select","select-city"],["placeholder","Select a city","optionLabel","cityName","optionValue","cityName","name","selectCity",3,"options","filter","ngModel","ngModelChange","onChange"],["for","address"],["type","text","autocapitalize","words","name","address","placeholder","your address","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["address","ngModel"],["for","zipCode"],["type","text","name","zipCode","placeholder","","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","emergencyNumber"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","emergencyNumber",3,"styleClass","ngModel","ngModelChange"],["for","contactNumber"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","contactNumber",3,"styleClass","ngModel","ngModelChange"],["for","email"],["type","email","disabled","true","name","email","placeholder","abcd@abcd.abc","pattern","^([a-z0-9_\\.\\+-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"group","reference"],[1,"form-group","name-input"],["for","name1"],["type","text","autocapitalize","words","name","name1","placeholder","full name","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name1","ngModel"],[1,"form-group","contact-input"],["for","contactNumber1"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","refContact1","ngModel","","required","",3,"styleClass","ngModel","ngModelChange"],["refContact1","ngModel"],[1,"form-group","ext-input"],["for","ext1"],["type","text","name","ext1","placeholder","","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["ext1","ngModel"],["for","occupation1"],["type","text","autocapitalize","words","name","occupation1","placeholder","","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["occupation1","ngModel"],["for","orgName"],["type","text","autocapitalize","words","name","orgName","placeholder","","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["orgName","ngModel"],["for","name2"],["type","text","autocapitalize","words","name","name2","placeholder","full name","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name2","ngModel"],["for","contactNumber2"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","refContact2",3,"styleClass","ngModel","ngModelChange"],["for","ext2"],["type","text","name","ext2","placeholder","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["ext2","ngModel"],["for","occupation2"],["type","text","autocapitalize","words","name","occupation2","placeholder","","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["occupation2","ngModel"],["for","orgName2"],["type","text","autocapitalize","words","name","orgName2","placeholder","","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],[1,"col-lg-12"],[1,"range"],["name","range","type","range","min","0","max","100000",2,"position","absolute","width","1px","height","1px","overflow","hidden","opacity","0"],["id","js-rangeslider-0",1,"rangeslider","rangeslider-horizontal"],[1,"rangeslider-fill-lower",2,"width","143px"],[1,"rangeslider-thumb",2,"left","133.5px"],[1,"range-output"],["name","output","for","range",1,"output"],[1,"cat-des-p"],[1,"fa","fa-info-circle"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d32616.372608782793!2d-79.76631770197883!3d43.7332529531104!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x882b15eaa5d05abf%3A0x352d31667cc38677!2sBrampton%2C%20ON%2C%20Canada!5e0!3m2!1sen!2sin!4v1592690766209!5m2!1sen!2sin","width","100%","height","700","frameborder","0","allowfullscreen","","aria-hidden","false","tabindex","0",2,"border","0"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.zc(e);const n=r.wc(1);return t.nextPage(n)})),r.Qb(2,"section",2),r.Qb(3,"p-card"),r.Hc(4,Z,1,0,"ng-template",3),r.Hc(5,W,1,0,"ng-template",4),r.Hc(6,ye,165,55,"ng-template",5),r.Pb(),r.Pb(),r.Qb(7,"div",6),r.Qb(8,"ul"),r.Qb(9,"li"),r.Qb(10,"button",7),r.Xb("click",(function(){return t.prevPage()})),r.Lb(11,"i",8),r.Jc(12,"Previous step"),r.Pb(),r.Pb(),r.Qb(13,"li"),r.Qb(14,"button",9),r.Xb("click",(function(){return t.nextPage("/receiver/")})),r.Jc(15," Save & Exit "),r.Pb(),r.Pb(),r.Qb(16,"li"),r.Qb(17,"button",10),r.Jc(18," Next step "),r.Lb(19,"i",11),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}2&e&&(r.yb(2),r.Cb("submitting",t.submitting))},directives:[g.A,g.o,g.p,k.a,s.j,g.c,g.t,g.n,g.q,i.n,g.w,G.a,g.s,Y.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}form[_ngcontent-%COMP%]{width:100%}.select[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;margin:0;font-size:16px}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}[_nghost-%COMP%]     .p-inputtext{margin:0;height:49px;padding:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700;font-size:24px}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;padding:0 2px}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:first-child{flex:3!important}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(2){flex:2!important}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(3){flex:1!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]:not(textarea){height:50px!important}.ref-head[_ngcontent-%COMP%], .var-head[_ngcontent-%COMP%]{font-weight:700;font-size:30px}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:100%;padding:0}}']}),e})();const _e=["paymentOption"],Ce=["optionClose"],Me=["paymentStatus"];function we(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",94),r.Qb(1,"div",95),r.Xb("click",(function(){r.zc(e);const n=t.$implicit,i=r.bc();return i.select_plan(i.adPlans[0]._id,i.adPlans[0].planName,n)})),r.Qb(2,"a",96),r.Jc(3),r.Qb(4,"span"),r.Jc(5),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(2),r.Cb("active",e._id==n.categoryId),r.yb(1),r.Lc(" ",e.inDays?e.days+" Day":e.hours+" Hour"," "),r.yb(2),r.Lc("$ ",e.price,"")}}function xe(e,t){if(1&e){const e=r.Rb();r.Ob(0),r.Qb(1,"li",97),r.Xb("click",(function(){r.zc(e);const n=t.$implicit,i=r.bc();return i.select_plan(i.adPlans[1]._id,i.adPlans[1].planName,n)})),r.Qb(2,"a",98),r.Jc(3),r.Pb(),r.Pb(),r.Nb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(2),r.Cb("active",e._id==n.categoryId),r.yb(1),r.Lc(" ",e.inHours?e.hours+" Hour":e.days+" Days"," ")}}function Oe(e,t){if(1&e){const e=r.Rb();r.Qb(0,"li"),r.Qb(1,"a",99),r.Xb("click",(function(){r.zc(e);const n=t.$implicit;return r.bc().select_bump(n)})),r.Jc(2),r.Qb(3,"span"),r.Jc(4),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,n=r.bc();r.yb(1),r.Cb("active",e._id==n.selectedBump._id),r.yb(1),r.Lc(" ",e.count," bumps "),r.yb(2),r.Lc("$ ",e.price,"/each")}}function ke(e,t){if(1&e&&(r.Qb(0,"ul"),r.Qb(1,"li"),r.Qb(2,"h4"),r.Jc(3),r.Qb(4,"span"),r.Jc(5),r.Pb(),r.Pb(),r.Qb(6,"p"),r.Jc(7),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.bc();r.yb(3),r.Lc(" ",e.plan.planName," "),r.yb(2),r.Lc("$ ",e.plan.price,""),r.yb(2),r.Lc(" ",e.plan.inDays?e.plan.days+" Day":e.plan.hours+" Hour"," ")}}function Ie(e,t){if(1&e&&(r.Qb(0,"ul"),r.Qb(1,"li"),r.Qb(2,"h4"),r.Jc(3," Additional Bump Ups "),r.Qb(4,"span"),r.Jc(5),r.Pb(),r.Pb(),r.Qb(6,"p"),r.Jc(7),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.bc();r.yb(5),r.Lc(" $ ",e.selectedBump.price,""),r.yb(2),r.Lc(" ",e.selectedBump.count+" Bumps"," ")}}function Je(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",100),r.Qb(1,"p",101),r.Jc(2),r.Pb(),r.Qb(3,"button",102),r.Xb("click",(function(){return r.zc(e),r.bc().close_modal()})),r.Jc(4,"Cancel"),r.Pb(),r.Qb(5,"button",103),r.Xb("click",(function(){return r.zc(e),r.bc().buyBumpWithBalance()})),r.Jc(6,"Pay"),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.yb(2),r.Mc("You will be charge $",e.selectedBump.price," for ",e.selectedBump.count," bumps from your balance.")}}let Ae=(()=>{class e{constructor(e,t,n,i,a,s){this.router=e,this.ps=t,this.ss=n,this.ds=i,this.ar=a,this.loader=s,this.unsub$=new o.a,this.submitting=!1,this.adPlans=[],this.showPlan=!1,this.bumps=[],this.selectedBump={},this.showBumps=!1,this.FlagPlanAdded=!1,this.FlagPlanChanged=!1,this.FlagPlanPaid=!1,this.showMainPageOptions=!1,this.showPage1Options=!1,this.showBumpsOptions=!1,this.transactionDetails={}}ngOnInit(){this.ps.newPage(6),this.check_and_handle_ad(),this.getAdPlan(),this.ss.getUserSessionObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.balance=e.balance})}check_and_handle_ad(){this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{if(this.ad=e,!this.ad._id)return this.checkParamForAdId()})}checkParamForAdId(){this.ar.queryParams.pipe(Object(c.a)(this.unsub$)).subscribe(e=>{if(e.adId)return this.getAdData(e.adId);this.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting category"),this.router.navigate(["/receiver/post/select-category"])})}getAdData(e){this.ps.get_ad(e).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{e.status?this.ps.NewAdData(e.data):this.ps.newMessage("error","No Data",e.message)},this.errorHandle.bind(this))}getAdPlan(){this.ps.get_ad_plans().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{e.status?(this.adPlans=e.data.adPlans,this.bumps=e.data.bumps,this.fillPrePurchasedPlan()):this.ps.newMessage("error","No Plan Found",e.message)},this.errorHandle.bind(this))}fillPrePurchasedPlan(){if(this.check_ad_plan_selected(),this.ad.bumpupPlanCheck){const e=this.bumps.find(e=>{var t;return e._id==(null===(t=this.ad.bumpupPlan)||void 0===t?void 0:t._id)});this.selectedBump=e,this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,this.showBumpsOptions=!0}}check_ad_plan_selected(){var e,t,n;if(this.ad.advertisePlanCheck){const i=this.adPlans.find(e=>{var t,n,i;return(null===(t=e.planName)||void 0===t?void 0:t.toLowerCase())==(null===(i=null===(n=this.ad.advertisePlan)||void 0===n?void 0:n.adPlanName)||void 0===i?void 0:i.toLowerCase())});i||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0));const a=null===(e=this.ad.advertisePlan)||void 0===e?void 0:e.adPlanCategory,s=i.categories.find(e=>a==e._id);s||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0)),this.select_plan(i._id,i.planName,s,null===(t=this.ad.advertisePlan)||void 0===t?void 0:t.paid),this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,i.planName==(null===(n=this.adPlans[0])||void 0===n?void 0:n.planName)?this.showMainPageOptions=!0:this.showPage1Options=!0,this.ad.advertisePlan.paid&&(this.FlagPlanPaid=!0)}}select_plan(e,t,n,i=!1){e==this.planId&&n._id==this.categoryId||(this.planId=e,this.categoryId=n._id,this.plan=Object.assign({planId:e,planName:t,paid:i},n),this.FlagPlanChanged=!0)}select_bump(e){this.selectedBump=e,this.FlagPlanChanged=!0}buyBumps(){this.ps.lock=!0;const e=this.selectedBump;this.router.navigate(["/receiver/bumps/pay-with-card"],{queryParams:{bumpId:e._id,price:e.price,count:e.count,back:"/receiver/post/upgrades",adId:this.ad._id}})}nextPage(e="/receiver/post/finalize"){this.load(),this.save_plan().then(()=>{this.stopload(),this.router.navigate([e])}).catch(()=>{this.stopload()})}prevPage(){this.router.navigate(["/receiver/post/user-details"])}save_plan(){return new Promise((e,t)=>this.FlagPlanAdded&&!this.FlagPlanChanged?e(!0):this.FlagPlanAdded&&this.FlagPlanPaid&&!window.confirm("you have already purchased a plan, upgrading will cost you extra")?(this.planId=this.ad.advertisePlan.adPlanId,this.categoryId=this.ad.advertisePlan.adPlanCategory,t(!1)):(this.ps.newPlanTake(this.plan),void this.save_plans_to_server(e,t)))}save_plans_to_server(e,t){var n;const i={adId:this.ad._id,adPlan:{planId:this.planId,categoryId:this.categoryId},bumps:{bumpId:null===(n=this.selectedBump)||void 0===n?void 0:n._id}};this.ps.save_plan(i).subscribe(n=>{n.status?(this.ad.completedSteps instanceof Object&&(this.ad.completedSteps[6]=!0),this.ps.NewAdData(Object.assign(Object.assign({},this.ad),n.data)),e(!0)):(this.ds.newMessage("error","Couldn't Save Plan",n.message),t(!1))},e=>{this.errorHandle(e),t(!1)})}upgrade(){this.showPlan=!0}cancelPlan(){this.showPlan=!1,this.plan=null,this.ps.newPlanTake({})}errorHandle(e){e instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",e.status+":"+e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){var e,t;this.unsub$.next(!0),this.unsub$.complete(),null===(t=null===(e=this.closeModal)||void 0===e?void 0:e.nativeElement)||void 0===t||t.click()}buyBumpWithBalance(){const e=this.selectedBump;this.ds.purchase_bump_up_with_bal({bumpId:this.selectedBump._id}).pipe(Object(c.a)(this.unsub$)).subscribe(t=>{t.status?(this.ss.bumpsAdd(t.data.totalBumps),this.closeModal.nativeElement.click(),this.transactionDetails={transactionId:t.data.transactionId,count:e.count,price:e.price,date:new Date},this.paymentStatusModalOpener.nativeElement.click()):this.ds.newMessage("error","Failed",t.message)},this.errorHandle.bind(this))}close_page1_selection(){this.showPage1Options=!1,this.plan.planName==this.adPlans[1].planName&&(this.plan={},this.planId=null,this.categoryId=null)}close_main_page_selection(){this.showMainPageOptions=!1,this.plan.planName==this.adPlans[0].planName&&(this.plan={},this.planId=null,this.categoryId=null)}close_bumps_selection(){this.showBumpsOptions=!1,this.selectedBump={}}close_modal(){this.closeModal.nativeElement.click(),this.showConfirm=!1,this.selectedBump=null}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.f),r.Kb(d.a),r.Kb(p.a),r.Kb(_.a),r.Kb(a.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-upgrades"]],viewQuery:function(e,t){var n;1&e&&(r.Qc(_e,!0),r.Qc(Ce,!0),r.Qc(Me,!0)),2&e&&(r.vc(n=r.Yb())&&(t.paymentOptionModal=n.first),r.vc(n=r.Yb())&&(t.closeModal=n.first),r.vc(n=r.Yb())&&(t.paymentStatusModalOpener=n.first))},decls:265,vars:36,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"panl-list-sec","upgrade-list"],["alt","home-pic",3,"src"],[1,"cancer-des"],[1,"delivery-form"],[1,"col-lg-9"],[1,"upgrade-sec"],[1,"top-tip"],[1,"col-md-2"],["href","javascript:void(0);",1,"tip-links"],[1,"col-md-10"],[1,"up-common-header","upgrade-purple-header"],["src","assets/images/upgrade-1.png","alt","Icons"],[1,"common-page-des","upgrade-des"],[1,"btn","btn-featured",3,"click"],[1,"fa","fa-angle-right"],[1,"upgrade-hide-sec","common-hide-sec"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3",3,"click"],[1,"hide-sec-des","upgrade-close"],["href","javascript:void(0);"],[1,"fa","fa-close"],[1,"upgrade-sec","page-up-sec"],[1,"up-common-header","upgrade-black-header"],["src","assets/images/upgrade-2.png","alt","Icons"],[1,"common-page-des","page-sec-des"],[1,"btn","btn-page",3,"click"],[1,"page-hide-sec","common-hide-sec"],[1,"up-page-head"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[4,"ngFor","ngForOf"],[1,"upgrade-close",3,"click"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"page-tab-des"],["id","hour_bumps"],["id","pg_one"],[1,"upgrade-sec","bump-up-sec"],[1,"up-common-header","upgrade-blue-header"],["src","assets/images/bump-icon-1.png","alt","Icons"],[1,"badge"],[1,"common-page-des","bump-page-des"],[1,"btn","btn-bumps-des",3,"click"],[1,"bumps-hide-sec","common-hide-sec"],[1,"bump-tab-list"],[1,"top-tip","yellow-tip"],[1,"fa","fa-info-circle"],[1,"understand-sec"],[1,"agree-head"],["href","javascript:void(0);",1,"contact-link"],[1,"col-lg-3"],["id","upgrades_invoice",1,"upgrades-invoice"],["id","calc_credit"],["type","hidden","id","credit","name","credit","value",""],[4,"ngIf"],["id","main_page_add"],["id","page11"],["id","additional_bumps"],[1,"grand-total"],["id","grand_total"],["type","hidden","id","grand_tl"],["type","hidden","id","user_main_balance","name","user_main_balance","value",""],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["name","submit",1,"btn","btn-next",3,"click"],["href","javascript:void(0)","data-toggle","modal","data-target","#reportModal",1,"btn","btn-report",2,"visibility","hidden"],["paymentOption",""],["id","reportModal","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head","pl-3"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["optionClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],[1,"btn","btn-success","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-dollar"],[1,"btn","btn-primary","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-payment"],["class","form-group mt-2",4,"ngIf"],["href","javascript:void(0)","data-toggle","modal","data-target","#paymentStatus",1,"btn","btn-report",2,"visibility","hidden"],["paymentStatus",""],["id","paymentStatus","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"text-center","text-dark"],[1,"table","my-2"],[1,"color"],[1,"col-md-3"],[1,"hide-sec-des",3,"click"],["href","javascript:void(0);","id","main_page"],[1,"nav-item",3,"click"],["id","home-tab",1,"nav-link"],["id","add_bumps",3,"click"],[1,"form-group","mt-2"],[1,"text-danger"],[1,"btn","btn-danger","px-3","mr-1",3,"click"],[1,"btn","btn-warning","text-center","px-3",3,"click"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form"),r.Qb(4,"div",3),r.Qb(5,"ul"),r.Qb(6,"li"),r.Lb(7,"img",4),r.cc(8,"server"),r.Pb(),r.Qb(9,"li"),r.Qb(10,"div",5),r.Jc(11),r.Qb(12,"p"),r.Jc(13),r.cc(14,"date"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(15,"div",6),r.Qb(16,"div",1),r.Qb(17,"div",7),r.Qb(18,"div",8),r.Qb(19,"div",9),r.Qb(20,"div",1),r.Qb(21,"div",10),r.Qb(22,"a",11),r.Jc(23," TIP "),r.Pb(),r.Pb(),r.Qb(24,"div",12),r.Qb(25,"p"),r.Qb(26,"strong"),r.Jc(27,"Paid for features:"),r.Pb(),r.Jc(28," money for ads will be deducted from your account at a later point in time if you choose to use these features. "),r.Pb(),r.Qb(29,"p"),r.Jc(30," By using this features it will help increase your chances of more people viewing your profile issues. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(31,"div",13),r.Lb(32,"img",14),r.Jc(33," Main Page Ad "),r.Pb(),r.Qb(34,"div",15),r.Qb(35,"p"),r.Qb(36,"strong"),r.Jc(37,"Do you want maximum for your ad ?"),r.Pb(),r.Jc(38,"Your ad will be displayed in our highest visiblit Featured Ad format in the panhandlers category of Greater Toronto Area. "),r.Pb(),r.Qb(39,"a",16),r.Xb("click",(function(){return t.showMainPageOptions=!0})),r.Jc(40," Upgrade to Main Page Ad "),r.Lb(41,"i",17),r.Pb(),r.Pb(),r.Qb(42,"div",18),r.Qb(43,"div",1),r.Hc(44,we,6,4,"div",19),r.Qb(45,"div",20),r.Xb("click",(function(){return t.close_main_page_selection()})),r.Qb(46,"div",21),r.Qb(47,"a",22),r.Lb(48,"i",23),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(49,"div",24),r.Qb(50,"div",25),r.Qb(51,"ul"),r.Qb(52,"li"),r.Lb(53,"img",26),r.Jc(54," Page 1 "),r.Pb(),r.Qb(55,"li"),r.Jc(56," From "),r.Qb(57,"span"),r.Jc(58,"$ 2"),r.Pb(),r.Jc(59," / Bump "),r.Pb(),r.Pb(),r.Pb(),r.Qb(60,"div",27),r.Qb(61,"p"),r.Qb(62,"strong"),r.Jc(63,"Put your Ad on Autopilot."),r.Pb(),r.Jc(64,"MyIssues will monitor your ad so that it always stays on page 1. No more babysitting your ad. The most effective and hands off approach. "),r.Pb(),r.Qb(65,"a",28),r.Xb("click",(function(){return t.showPage1Options=!0})),r.Jc(66," Get page 1 "),r.Lb(67,"i",17),r.Pb(),r.Pb(),r.Qb(68,"div",29),r.Qb(69,"div",1),r.Qb(70,"div",2),r.Qb(71,"div",30),r.Qb(72,"h3"),r.Jc(73," How many Hours do you want to keep your ad on main page? "),r.Pb(),r.Pb(),r.Qb(74,"ul",31),r.Hc(75,xe,4,3,"ng-container",32),r.Qb(76,"li"),r.Qb(77,"div",33),r.Xb("click",(function(){return t.close_page1_selection()})),r.Qb(78,"a",22),r.Lb(79,"i",23),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(80,"div",34),r.Qb(81,"div",35),r.Qb(82,"div",30),r.Qb(83,"h3"),r.Jc(84," How many days do you want to keep your ad on main page? "),r.Pb(),r.Pb(),r.Qb(85,"div",36),r.Qb(86,"ul"),r.Lb(87,"span",37),r.Pb(),r.Qb(88,"ul"),r.Lb(89,"span",38),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(90,"div",39),r.Qb(91,"div",40),r.Qb(92,"ul"),r.Qb(93,"li"),r.Lb(94,"img",41),r.Jc(95," Bumps "),r.Qb(96,"label",42),r.Jc(97,"New 2 bumps package"),r.Pb(),r.Pb(),r.Qb(98,"li"),r.Jc(99," From "),r.Qb(100,"span"),r.Jc(101,"$ 2"),r.Pb(),r.Jc(102," / Bump "),r.Pb(),r.Pb(),r.Pb(),r.Qb(103,"div",43),r.Qb(104,"p"),r.Qb(105,"strong"),r.Jc(106,"Do you want to be able to Bump your ad to the top with one click any time you like?"),r.Pb(),r.Jc(107," When you click Bump, your ad will instantly be posted to the top. "),r.Pb(),r.Qb(108,"a",44),r.Xb("click",(function(){return t.showBumpsOptions=!0})),r.Jc(109," Let me bumps "),r.Lb(110,"i",17),r.Pb(),r.Pb(),r.Qb(111,"div",45),r.Qb(112,"div",1),r.Qb(113,"div",2),r.Qb(114,"div",30),r.Qb(115,"h3"),r.Jc(116," How many Bumps do you want? "),r.Qb(117,"span"),r.Jc(118,"(select one)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(119,"ul",46),r.Hc(120,Oe,5,4,"li",32),r.Qb(121,"li"),r.Qb(122,"div",33),r.Xb("click",(function(){return t.close_bumps_selection()})),r.Qb(123,"a",22),r.Lb(124,"i",23),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(125,"div",47),r.Qb(126,"p"),r.Lb(127,"i",48),r.Jc(128," 2 Bump Package, limited time offer "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(129,"div",49),r.Qb(130,"div",50),r.Qb(131,"h5"),r.Jc(132," Price listed are in CAD $ "),r.Pb(),r.Qb(133,"p"),r.Jc(134," MyIssues charges will Services on your Acc. Need help with payments? "),r.Qb(135,"a",51),r.Jc(136,"Contact Us"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(137,"div",52),r.Qb(138,"div",53),r.Qb(139,"ul"),r.Qb(140,"li"),r.Qb(141,"h4"),r.Jc(142," Advertisement "),r.Qb(143,"span"),r.Jc(144," $ Free"),r.Pb(),r.Pb(),r.Qb(145,"p"),r.Jc(146," Panhandlers / Greater toronto $ "),r.Lb(147,"span",54),r.Lb(148,"input",55),r.Pb(),r.Pb(),r.Pb(),r.Hc(149,ke,8,3,"ul",56),r.Hc(150,Ie,8,2,"ul",56),r.Lb(151,"span",57),r.Lb(152,"span",58),r.Lb(153,"span",59),r.Qb(154,"ul"),r.Qb(155,"li"),r.Qb(156,"h4"),r.Jc(157," Transaction fee "),r.Qb(158,"span"),r.Jc(159," $1.00"),r.Pb(),r.Pb(),r.Qb(160,"p"),r.Jc(161," You pay in if the total is less than $ 50.00 "),r.Pb(),r.Pb(),r.Pb(),r.Qb(162,"ul"),r.Qb(163,"li"),r.Qb(164,"h4"),r.Jc(165," Gift card "),r.Qb(166,"span"),r.Jc(167," - $1.00"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(168,"ul",60),r.Qb(169,"li"),r.Qb(170,"h4"),r.Jc(171," Grand Total "),r.Qb(172,"span",61),r.Jc(173),r.Pb(),r.Lb(174,"input",62),r.Lb(175,"input",63),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(176,"div",64),r.Qb(177,"ul"),r.Qb(178,"li"),r.Qb(179,"button",65),r.Xb("click",(function(){return t.prevPage()})),r.Lb(180,"i",66),r.Jc(181," Previous step "),r.Pb(),r.Pb(),r.Qb(182,"li"),r.Qb(183,"button",67),r.Xb("click",(function(){return t.nextPage("/receiver/")})),r.Jc(184," Save & Exit "),r.Pb(),r.Pb(),r.Qb(185,"li"),r.Qb(186,"button",68),r.Xb("click",(function(){return t.nextPage()})),r.Jc(187," Next step "),r.Lb(188,"i",17),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Lb(189,"a",69,70),r.Qb(191,"div",71),r.Qb(192,"div",72),r.Qb(193,"div",73),r.Qb(194,"div",74),r.Qb(195,"h3",75),r.Jc(196,"Payment Options"),r.Pb(),r.Qb(197,"button",76,77),r.Xb("click",(function(){return t.close_modal()})),r.Qb(199,"span",78),r.Jc(200,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(201,"div",79),r.Qb(202,"div",80),r.Qb(203,"div",1),r.Qb(204,"div",81),r.Qb(205,"form"),r.Qb(206,"h3"),r.Qb(207,"small"),r.Jc(208,"Pay using card or account balance."),r.Pb(),r.Pb(),r.Qb(209,"button",82),r.Xb("click",(function(){return t.showConfirm=!0})),r.Qb(210,"h4"),r.Lb(211,"i",83),r.Qb(212,"small"),r.Jc(213),r.Pb(),r.Pb(),r.Pb(),r.Qb(214,"button",84),r.Xb("click",(function(){return t.buyBumps()})),r.Qb(215,"h4"),r.Lb(216,"i",85),r.Qb(217,"small"),r.Jc(218,"Pay With Card"),r.Pb(),r.Pb(),r.Pb(),r.Hc(219,Je,7,2,"div",86),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Lb(220,"a",87,88),r.Qb(222,"div",89),r.Qb(223,"div",72),r.Qb(224,"div",73),r.Qb(225,"div",74),r.Qb(226,"h3",75),r.Jc(227,"Payment Status"),r.Pb(),r.Qb(228,"button",90,77),r.Qb(230,"span",78),r.Jc(231,"\xd7"),r.Pb(),r.Pb(),r.Pb(),r.Qb(232,"div",79),r.Qb(233,"div",80),r.Qb(234,"div",1),r.Qb(235,"div",81),r.Qb(236,"form"),r.Qb(237,"h2",91),r.Qb(238,"small"),r.Jc(239,"Bumps Purchased"),r.Pb(),r.Pb(),r.Qb(240,"table",92),r.Qb(241,"tr"),r.Qb(242,"td",93),r.Jc(243,"Transaction Id"),r.Pb(),r.Qb(244,"td"),r.Jc(245),r.Pb(),r.Pb(),r.Qb(246,"tr"),r.Qb(247,"td",93),r.Jc(248,"Bumps Count"),r.Pb(),r.Qb(249,"td"),r.Jc(250),r.Pb(),r.Pb(),r.Qb(251,"tr"),r.Qb(252,"td",93),r.Jc(253,"Bump Price"),r.Pb(),r.Qb(254,"td"),r.Jc(255),r.Pb(),r.Pb(),r.Qb(256,"tr"),r.Qb(257,"td",93),r.Jc(258,"Date"),r.Pb(),r.Qb(259,"td"),r.Jc(260),r.cc(261,"date"),r.Pb(),r.Pb(),r.Qb(262,"tr"),r.Lb(263,"td"),r.Lb(264,"td"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(7),r.jc("src",(null==t.ad||null==t.ad.identityImages?null:t.ad.identityImages.length)>0?r.dc(8,28,t.ad.identityImages[0]):"assets/images/home-pic.jpg",r.Cc),r.yb(4),r.Lc(" Hello ",t.ad.adTitle," "),r.yb(2),r.Mc(" Start date ",r.ec(14,30,t.ad.createdOn,"medium")," - ",t.ad.categoryName+"-"+t.ad.city," "),r.yb(21),r.Gc("display",t.showMainPageOptions?"none":"block"),r.yb(8),r.Gc("display",t.showMainPageOptions?"block":"none"),r.yb(2),r.ic("ngForOf",null==t.adPlans[0]?null:t.adPlans[0].categories),r.yb(16),r.Gc("display",t.showPage1Options?"none":"block"),r.yb(8),r.Gc("display",t.showPage1Options?"block":"none"),r.yb(7),r.ic("ngForOf",null==t.adPlans[1]?null:t.adPlans[1].categories),r.yb(28),r.Gc("display",t.showBumpsOptions?"none":"block"),r.yb(8),r.Gc("display",t.showBumpsOptions?"block":"none"),r.yb(9),r.ic("ngForOf",t.bumps),r.yb(29),r.ic("ngIf",(null==t.plan?null:t.plan.planName)&&0==(null==t.plan?null:t.plan.paid)),r.yb(1),r.ic("ngIf",null==t.selectedBump?null:t.selectedBump.count),r.yb(23),r.Lc(" $ ",((null==t.plan?null:t.plan.price)||0)+((null==t.selectedBump?null:t.selectedBump.price)||0)+1," "),r.yb(40),r.Lc("Current Balance: $",t.balance.toFixed(2),""),r.yb(6),r.ic("ngIf",t.showConfirm),r.yb(26),r.Kc(t.transactionDetails.transactionId),r.yb(5),r.Kc(t.transactionDetails.count),r.yb(5),r.Kc(t.transactionDetails.price),r.yb(5),r.Kc(r.ec(261,33,t.transactionDetails.date,"medium")))},directives:[g.A,g.o,g.p,i.m,i.n],pipes:[m.a,i.d],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.center[_ngcontent-%COMP%]{display:block;margin:0 auto;width:auto}.btn-purple[_ngcontent-%COMP%]{background:#b367c9;font-size:20px;font-weight:900;color:#fff;padding:10px 30px}.deck[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#737574;font-size:20px;font-weight:700;border:1px solid #e3e3e3;border-top:5px solid #e3e3e3;padding:40px 10px;border-radius:5px;min-height:140px;width:auto}.deck[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{color:#615f5f}.deck-link[_ngcontent-%COMP%]{text-decoration:none;outline:none}.active[_ngcontent-%COMP%], .deck[_ngcontent-%COMP%]:hover{border-top-width:1px;border-color:#58a788;border-bottom:5px solid #58a788;color:#58a788}.card-body.hide[_ngcontent-%COMP%]{display:none}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}@media screen and (max-width:600px){.upgrade-card[_ngcontent-%COMP%]{width:95%!important}}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.upgrades-invoice-sticky[_ngcontent-%COMP%]{width:16.4%}.delivery-form[_ngcontent-%COMP%]{position:relative}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-29px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-10px}#remove3[_ngcontent-%COMP%], #removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%]{position:absolute;left:-18px;height:40px;width:40px;background:#fff;color:#424242;border-radius:50%;text-align:center;padding-top:8px;font-size:20px;border:none;box-shadow:-1px 0 0 0 rgba(0,0,0,.2)}#removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #remove3[_ngcontent-%COMP%]{left:-22px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #removed[_ngcontent-%COMP%]{left:-21px}.btn-page[_ngcontent-%COMP%], .upgrade-black-header[_ngcontent-%COMP%]{background-color:#4d493c}.btn-bumps-des[_ngcontent-%COMP%], .upgrade-blue-header[_ngcontent-%COMP%]{background-color:#59a8ea}']}),e})();function Le(e,t){if(1&e&&(r.Qb(0,"div",5),r.Qb(1,"ul"),r.Qb(2,"li"),r.Qb(3,"span"),r.Jc(4),r.Pb(),r.Jc(5),r.Pb(),r.Qb(6,"li"),r.Jc(7),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.bc();r.yb(4),r.Kc(null==e.adPlan?null:e.adPlan.adPlanName),r.yb(1),r.Lc(" ",e.adPlan.inDays?e.adPlan.days+" Day":e.adPlan.hours+" Hour"," "),r.yb(2),r.Lc(" $ ",e.adPlan.advertisePrice," ")}}function ze(e,t){if(1&e&&(r.Qb(0,"div",5),r.Qb(1,"ul"),r.Qb(2,"li"),r.Qb(3,"span"),r.Jc(4,"Bump Up Plan"),r.Pb(),r.Jc(5),r.Pb(),r.Qb(6,"li"),r.Jc(7),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.bc();r.yb(5),r.Lc(" ",e.bumpupPlan.count||0," Bump "),r.yb(2),r.Lc(" $ ",e.bumpupPlan.price," ")}}let Ne=(()=>{class e{constructor(e,t,n,i){this.router=e,this.ss=t,this.ps=n,this.loader=i,this.submitting=!1,this.adPlan=null,this.bumpupPlan=null,this.unsub$=new o.a,this.total=0}ngOnInit(){this.ps.newPage(7),this.ps.AdObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{var t,n,i;this.ad=e,this.ad._id||(alert("ad is not initialized"),this.router.navigate(["/receiver/post/select-category"])),this.ad.advertisePlanCheck&&0==(null===(t=this.ad.advertisePlan)||void 0===t?void 0:t.paid)&&(this.adPlan=this.ad.advertisePlan),this.ad.bumpupPlanCheck&&(this.bumpupPlan=this.ad.bumpupPlan),this.total=((null===(n=this.adPlan)||void 0===n?void 0:n.advertisePrice)||0)+((null===(i=this.bumpupPlan)||void 0===i?void 0:i.price)||0),this.total>0&&(this.total+=1)}),this.ss.getUserSessionObservable().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.session=e})}nextPage(){this.ad.advertisePlanCheck||this.ad.bumpupPlanCheck?this.handle_upgrade():"published"==this.ad.adState?setTimeout(()=>{this.router.navigate(["/receiver/post/edited"])},100):this.publish()}publish(){this.load(),this.ps.publish_normal(this.ad._id).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{e.status?(this.stopload(),this.router.navigate(["/receiver/post/complete/"+this.ad._id])):(this.stopload(),alert(e.message))},this.errorHandle.bind(this))}handle_upgrade(){this.router.navigate(["/receiver/post/pay-via-card"])}prevPage(){this.router.navigate(["/receiver/post/upgrades"])}errorHandle(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",e.status+":"+(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.stopload()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(a.f),r.Kb(p.a),r.Kb(d.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-finalize"]],decls:68,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","ad-sub-cat"],[1,"cat-list"],[1,"ad-sub-list"],["class","ad-sub-list",4,"ngIf"],[1,"border-0"],[1,"col-lg-6"],[1,"price-sec"],[3,"click"],[1,"fa","fa-angle-left"],[1,"price-btn","text-right"],[1,"understand-sec","finalize-sec"],[1,"agree-head"],["href","#"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form"),r.Qb(4,"div",3),r.Qb(5,"div",4),r.Qb(6,"div",5),r.Qb(7,"ul"),r.Qb(8,"li"),r.Qb(9,"span"),r.Jc(10,"Advertisement"),r.Pb(),r.Jc(11," Panhandlers / greater toronto area "),r.Pb(),r.Qb(12,"li"),r.Jc(13," $00.00 "),r.Pb(),r.Pb(),r.Pb(),r.Hc(14,Le,8,3,"div",6),r.Hc(15,ze,8,2,"div",6),r.Qb(16,"div",5),r.Qb(17,"ul"),r.Qb(18,"li"),r.Qb(19,"span"),r.Jc(20,"Transactions fee"),r.Pb(),r.Jc(21," You pay it if the total is less than $50.00 "),r.Pb(),r.Qb(22,"li"),r.Jc(23," $00.00 "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(24,"div",3),r.Qb(25,"div",4),r.Qb(26,"div",5),r.Qb(27,"ul"),r.Qb(28,"li"),r.Qb(29,"span"),r.Jc(30,"Sub Total"),r.Pb(),r.Pb(),r.Qb(31,"li"),r.Jc(32," $00.00 "),r.Pb(),r.Pb(),r.Pb(),r.Qb(33,"div",5),r.Qb(34,"ul"),r.Qb(35,"li"),r.Qb(36,"span"),r.Jc(37,"Account Balance"),r.Pb(),r.Pb(),r.Qb(38,"li"),r.Jc(39),r.Pb(),r.Pb(),r.Pb(),r.Qb(40,"div",5),r.Qb(41,"ul",7),r.Qb(42,"li"),r.Qb(43,"span"),r.Jc(44,"Grand Total to Pay"),r.Pb(),r.Pb(),r.Qb(45,"li"),r.Jc(46),r.Pb(),r.Pb(),r.Pb(),r.Qb(47,"div",1),r.Qb(48,"div",8),r.Qb(49,"div",9),r.Qb(50,"a",10),r.Xb("click",(function(){return t.prevPage()})),r.Lb(51,"i",11),r.Pb(),r.Jc(52," All price are listed in "),r.Qb(53,"span"),r.Jc(54,"CAD"),r.Pb(),r.Pb(),r.Pb(),r.Qb(55,"div",8),r.Qb(56,"div",12),r.Qb(57,"a",10),r.Xb("click",(function(){return t.nextPage()})),r.Jc(58," Post Now "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(59,"div",13),r.Qb(60,"div",0),r.Qb(61,"div",14),r.Qb(62,"h5"),r.Jc(63," Prices listed are in CAD "),r.Pb(),r.Qb(64,"p"),r.Jc(65," MyIssues charges wil read MyIssues services on your statement. Need help with payments?"),r.Qb(66,"a",15),r.Jc(67,"Contact Us"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.Cb("submitting",t.submitting),r.yb(14),r.ic("ngIf",null==t.adPlan?null:t.adPlan.adPlanId),r.yb(1),r.ic("ngIf",t.ad.bumpupPlanCheck),r.yb(24),r.Lc(" $",t.session.balance?t.session.balance.toFixed(2):"0.00"," "),r.yb(7),r.Lc(" $ ",t.total," "))},directives:[g.A,g.o,g.p,i.n],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.fixcolor[_ngcontent-%COMP%]{color:#737574}.card-footer[_ngcontent-%COMP%]{padding:.75rem 2rem!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}@media only screen and (max-width:767px){.ad-sub-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding-left:5px;float:none;padding-top:15px;font-size:30px}}']}),e})();var Se=n("ukGE");let $e=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-edited"]],decls:9,vars:0,consts:[[1,"ad-post"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"ad-post-des"],["src","assets/images/ad-edited.png","alt","Images"],[1,"view-ad"],["routerLink","/receiver"]],template:function(e,t){1&e&&(r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"div",3),r.Qb(4,"div",4),r.Lb(5,"img",5),r.Qb(6,"div",6),r.Qb(7,"a",7),r.Jc(8,"Back to Ad Center"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb())},directives:[a.i],styles:[""]}),e})(),Fe=(()=>{class e{constructor(e,t,n){this.adService=e,this.ds=t,this.router=n}canActivate(e,t){var n,i;const a=null===(n=this.adService._currentAd)||void 0===n?void 0:n._id;return!!(null===(i=e.data)||void 0===i?void 0:i.isStartStep)||(a?this.validateRoute.apply(this,[e]):(setTimeout(()=>{this.router.navigate(["/receiver/post/select-category"])},5),!1))}validateRoute(e){const t=this.lastCompletedStep(),n=e.data.moveToStep;if(1==n)return setTimeout(()=>{this.router.navigate(["/receiver/post/select-category"])},5),!1;if(5==n&&t>=4.3)return!0;if(6==n&&t>=5){if("draft"==this.adService._currentAd.adState)return!0}else if(t>=n-1)return!0;return!1}lastCompletedStep(){var e;const t=null===(e=this.adService._currentAd)||void 0===e?void 0:e.completedSteps;console.log(t);const n={1:1,2:2,3:3,5:5,6:6,"4Images":4.1,"4Video":4.2,"4Identity":4.3};let i=0;for(let a in t)t[a]&&n[a]>i&&(i=n[a]);return i>4&&i<5&&(t["4Images"]&&t["4Video"]&&t["4Identity"]||(i=3)),i}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(d.a),r.Ub(_.a),r.Ub(a.f))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const je=[{path:"",component:b,children:[{path:"",redirectTo:"select-category",pathMatch:"full"},{path:"select-category",canActivate:[Fe],data:{moveToStep:1,isStartStep:!0},component:Q},{path:"select-location",canActivate:[Fe],data:{moveToStep:2},component:O},{path:"ad-content",canActivate:[Fe],data:{moveToStep:3},component:j},{path:"upload-images",canActivate:[Fe],data:{moveToStep:4},component:q},{path:"user-details",canActivate:[Fe],data:{moveToStep:5},component:Qe},{path:"upgrades",canActivate:[Fe],data:{moveToStep:6},component:Ae},{path:"finalize",canActivate:[Fe],data:{moveToStep:7},component:Ne},{path:"pay-via-card",loadChildren:()=>n.e(95).then(n.bind(null,"Dgc4")).then(e=>e.CardPaymentModule)}]},{path:"complete/:adId",component:Se.a},{path:"edited",component:$e},{path:"add",loadChildren:()=>n.e(96).then(n.bind(null,"HFxQ")).then(e=>e.ReceiverPostAddModule)}];let De=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(je)],a.j]}),e})();var Xe=n("FMpt"),Be=n("jIHw"),He=n("7kUa"),Te=n("dPl2"),Ee=n("eO1q"),Ue=n("qxW0");let Ke=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.b,De,a.j,l.b,Xe.a,k.b,Be.c,Y.b,g.j,He.b,I.b,Te.c,G.b,Ee.b,Ue.a,h.b]]}),e})()}}]);