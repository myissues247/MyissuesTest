!function(){function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,s=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{ktWd:function(t,a,o){"use strict";o.r(a),o.d(a,"ReceiverPostModule",(function(){return ct}));var s,c=o("ofXK"),r=o("tyNb"),d=o("7zfz"),l=o("XNiG"),b=o("1G5W"),u=o("fXoL"),p=o("H8Sc"),g=o("Gxio"),h=((s=function(){function e(t,a,i){n(this,e),this.ms=t,this.ps=a,this.router=i,this.activeIndex=1,this.currentPage=2,this.unsub$=new l.a,this.items=[{label:"Location",routerLink:"select-location"},{label:"Content",routerLink:"ad-content"},{label:"Images",routerLink:"upload-images"},{label:"contact",routerLink:"user-details"},{label:"Upgrades",routerLink:"upgrades"},{label:"finalize",routerLink:"finalize"}]}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.lock=!1,this.ps.messageObserver().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ms.add(t)})),this.ps.page$.asObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.currentPage=t,console.log(t)}))}},{key:"new_ad",value:function(e){this.currentAd=e}},{key:"seePreview",value:function(){var e=this;this.ps.lock=!0,this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){if(t._id)return e.router.navigate(["/ads/full"],{queryParams:{mode:"preview"}});e.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting a category")}))}},{key:"ngOnDestroy",value:function(){this.ps.NewAdData(null),this.unsub$.next(),this.unsub$.complete()}}]),e}()).\u0275fac=function(e){return new(e||s)(u.Kb(d.h),u.Kb(p.a),u.Kb(r.f))},s.\u0275cmp=u.Eb({type:s,selectors:[["app-receiver-post"]],features:[u.xb([d.h])],decls:140,vars:28,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","py-5"],[1,"tabs","col-lg-9","mx-auto","pb-5"],[1,"container-fluid","mb-4",2,"padding","0px"],[1,""],[1,"step-menu__list"],[1,"step-menu__item"],[1,"step-menu__link"],[1,"step-menu__icon","active"],[1,"number-1"],[1,"step-menu__description"],[1,"number-2"],[1,"number-4"],[1,"number-5"],[1,"number-6"],[1,"btn","btn-primary",2,"min-width","150px !important",3,"click"],[1,"fa","fa-eye"],[1,"agree-sec"],[1,"container"],[1,"agree-head"],["href","javascript:void(0);","data-toggle","modal","data-target","#tcModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#ppModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#rulesModal","data-dismiss","modal"],[1,"understand-sec"],["id","tcModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],["id","ppModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["id","rulesModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Lb(3,"p-toast"),u.Qb(4,"div",3),u.Qb(5,"div",4),u.Qb(6,"div",5),u.Qb(7,"ul",6),u.Qb(8,"li",7),u.Qb(9,"a",8),u.Qb(10,"span",9),u.Qb(11,"i",10),u.Jc(12,"1"),u.Pb(),u.Pb(),u.Qb(13,"span",11),u.Jc(14,"Category"),u.Pb(),u.Pb(),u.Pb(),u.Qb(15,"li",7),u.Qb(16,"a",8),u.Qb(17,"span",9),u.Qb(18,"i",10),u.Jc(19,"2"),u.Pb(),u.Pb(),u.Qb(20,"span",11),u.Jc(21,"Region"),u.Pb(),u.Pb(),u.Pb(),u.Qb(22,"li",7),u.Qb(23,"a",8),u.Qb(24,"span",9),u.Qb(25,"i",12),u.Jc(26,"3"),u.Pb(),u.Pb(),u.Qb(27,"span",11),u.Jc(28,"Description"),u.Pb(),u.Pb(),u.Pb(),u.Qb(29,"li",7),u.Qb(30,"a",8),u.Qb(31,"span",9),u.Qb(32,"i",13),u.Jc(33,"4"),u.Pb(),u.Pb(),u.Qb(34,"span",11),u.Jc(35,"Upload "),u.Lb(36,"br"),u.Jc(37,"Your Images"),u.Pb(),u.Pb(),u.Pb(),u.Qb(38,"li",7),u.Qb(39,"a",8),u.Qb(40,"span",9),u.Qb(41,"i",12),u.Jc(42,"5"),u.Pb(),u.Pb(),u.Qb(43,"span",11),u.Jc(44," Contact Details"),u.Pb(),u.Pb(),u.Pb(),u.Qb(45,"li",7),u.Qb(46,"a",8),u.Qb(47,"span",9),u.Qb(48,"i",14),u.Jc(49,"6"),u.Pb(),u.Pb(),u.Qb(50,"span",11),u.Jc(51,"Choose "),u.Lb(52,"br"),u.Jc(53,"Your Upgrades"),u.Pb(),u.Pb(),u.Pb(),u.Qb(54,"li",7),u.Qb(55,"a",8),u.Qb(56,"span",9),u.Qb(57,"i",15),u.Jc(58,"7"),u.Pb(),u.Pb(),u.Qb(59,"span",11),u.Jc(60,"Finalize "),u.Lb(61,"br"),u.Jc(62,"& Post"),u.Pb(),u.Pb(),u.Pb(),u.Qb(63,"li"),u.Qb(64,"a",16),u.Xb("click",(function(){return t.seePreview()})),u.Lb(65,"i",17),u.Jc(66," Preview Ad"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Lb(67,"router-outlet"),u.Qb(68,"div",18),u.Qb(69,"div",19),u.Qb(70,"div",20),u.Qb(71,"h4"),u.Jc(72," You agree to the following when on MyIssues.ca "),u.Pb(),u.Qb(73,"p"),u.Jc(74," I agree to the "),u.Qb(75,"a",21),u.Jc(76,"Terms & Conditions,"),u.Pb(),u.Jc(77,"\xa0 "),u.Qb(78,"a",22),u.Jc(79,"Privacy Policy,"),u.Pb(),u.Jc(80," and "),u.Qb(81,"a",23),u.Jc(82,"Rules"),u.Pb(),u.Jc(83," of this site. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(84,"div",24),u.Qb(85,"div",19),u.Qb(86,"div",20),u.Qb(87,"p"),u.Jc(88," You understand and agree that any posts which do not comply with these terms aforementioned may result in the removal of the post without refund or warning. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(89,"div",25),u.Qb(90,"div",26),u.Qb(91,"div",27),u.Qb(92,"div",28),u.Qb(93,"h2",29),u.Jc(94,"Terms & Condtition"),u.Pb(),u.Qb(95,"button",30),u.Qb(96,"span",31),u.Jc(97,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(98,"div",32),u.Qb(99,"div",33),u.Qb(100,"div",1),u.Qb(101,"div",34),u.Qb(102,"p"),u.Jc(103," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Qb(104,"p"),u.Jc(105," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(106,"div",35),u.Qb(107,"div",26),u.Qb(108,"div",27),u.Qb(109,"div",28),u.Qb(110,"h2",29),u.Jc(111,"Privacy Policy"),u.Pb(),u.Qb(112,"button",30),u.Qb(113,"span",31),u.Jc(114,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(115,"div",32),u.Qb(116,"div",33),u.Qb(117,"div",1),u.Qb(118,"div",34),u.Qb(119,"p"),u.Jc(120," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Qb(121,"p"),u.Jc(122," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(123,"div",36),u.Qb(124,"div",26),u.Qb(125,"div",27),u.Qb(126,"div",28),u.Qb(127,"h2",29),u.Jc(128,"Rules"),u.Pb(),u.Qb(129,"button",30),u.Qb(130,"span",31),u.Jc(131,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(132,"div",32),u.Qb(133,"div",33),u.Qb(134,"div",1),u.Qb(135,"div",34),u.Qb(136,"p"),u.Jc(137," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Qb(138,"p"),u.Jc(139," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.yb(8),u.Cb("active",1==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>1),u.yb(5),u.Cb("active",2==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>2),u.yb(5),u.Cb("active",3==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>3),u.yb(5),u.Cb("active",4==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>4),u.yb(7),u.Cb("active",5==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>5),u.yb(5),u.Cb("active",6==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>6),u.yb(7),u.Cb("active",7==t.currentPage),u.yb(2),u.Cb("active1",t.currentPage>7))},directives:[g.a,r.k],styles:['.tabs[_ngcontent-%COMP%]{padding:15px 0}.col-12[_ngcontent-%COMP%]{padding:0;background:#fcfdf8}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px rgba(0,0,0,.3)}[_nghost-%COMP%]     .p-card{box-shadow:0 0 4px rgba(0,0,0,.3)}[_nghost-%COMP%]     .p-steps{width:98%;margin:0 auto;border-radius:7px}[_nghost-%COMP%]     .p-steps .p-steps-item{padding-top:5px;padding-bottom:5px;overflow:hidden!important}[_nghost-%COMP%]     .p-steps .p-steps-current{overflow:hidden!important}[_nghost-%COMP%]     .p-steps .p-steps-item:before{bottom:0;top:0;background:#ccc;opacity:1%;color:#000}[_nghost-%COMP%]     .p-steps .p-steps-current:before{content:"";opacity:0}@media screen and (max-width:600px){[_nghost-%COMP%]     .p-steps{width:900px!important}.py-3[_ngcontent-%COMP%]{overflow:scroll!important}}',".step-menu__list[_ngcontent-%COMP%] {\n                        display: -ms-flexbox;\n                        display: flex;\n                        background: #f2f2ed;\n                        border: 1px solid #ebebe6;\n                        margin: 0;\n                        list-style: none;\n                        border-radius: 6px;\n                        box-shadow: 0 1px 0 0 #fff, inset 0 1px 3px -2px rgba(0,0,0,.3);\n                        overflow: auto;\n                        padding-left: 0px;\n                        margin-top:20px;\n                    }\n                \n                    ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n                    background: #00000017;\n                }\n                ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar {\n                    height: 7px;\n                    backface-visibility: visible;\n                    opacity: 1;\n                }\n                    .step-menu__item.active[_ngcontent-%COMP%] {\n                        background: #fff;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:first-child {\n                        box-shadow: none;\n                        border-radius: 5px 0 0 5px;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%] {\n                        float: left;\n                        padding: 15px 20px 15px 15px;\n                        position: relative;\n                        \n                        flex-grow: 1;\n                        white-space: nowrap;\n                        \n                        user-select: none;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:hover{\n                        background: #fff;\n                        color: #575757;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%]:hover{\n                        color: #575757;\n                    }\n                    .step-menu__item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n                        color: #5e5e5e;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%] {\n                        display: flex;\n                        align-items: center;\n                        line-height: 17px;\n                        text-decoration: none;\n                        font-weight: 700;\n                        font-size: 14px;\n                        color: #b8b8b4;\n                    }\n                    \n                    .step-menu__icon[_ngcontent-%COMP%] {\n                        float: left;\n                        margin-right: 8px;\n                        width: 32px;\n                        height: 32px;\n                        border-radius: 75px;\n                        flex-shrink: 0;\n                        display: -ms-flexbox;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        line-height: 1;\n                        color: #fff;\n                        background: #5e5e5e;\n                    }\n                    .step-menu__icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%] {\n                        background: #b8b8b4;\n                        color: #fff;\n                    }\n                    .step-menu__description[_ngcontent-%COMP%] {\n                        float: left;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__list[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%], .rewards[_ngcontent-%COMP%]   .btn.btn-black[_ngcontent-%COMP%]:hover {\n                        background-color: #6d95aa;\n                        border-color: #6d95aa;\n                        margin: 0 8px;\n                        margin-top: 10px;\n                        padding: 0 12px;\n                        color: #fff;\n                        font-weight: 700;\n                        font-size: 16px;\n                        line-height: 40px;\n                        height: 42px;\n                        vertical-align: top;\n                    }\n                    .step-menu__icon.active1[_ngcontent-%COMP%]{\n                        background: green;\n                    }"]}),s),m=o("ndxW"),f=o("5dVO"),P=o("3Pt+"),v=o("bhfF"),y=o("3LrJ"),Q=["modalButton"];function _(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",24),u.Qb(1,"li",25),u.Qb(2,"a",26),u.Xb("click",(function(){u.zc(n);var e=u.bc().$implicit;return u.bc().select_category(e._id)})),u.Lb(3,"img",27),u.cc(4,"server"),u.Lb(5,"img",28),u.cc(6,"server"),u.Jc(7),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=u.bc().$implicit,i=u.bc();u.yb(1),u.Cb("active",a._id==i.selectedCategory),u.yb(2),u.jc("src",a.imagePath?u.dc(4,7,a.imagePath):"assets/images/banner1.jpg",u.Cc),u.jc("alt",a.title),u.yb(2),u.jc("src",a.imagePath?u.dc(6,9,a.imagePath):"assets/images/banner1.jpg",u.Cc),u.jc("alt",a.title),u.yb(2),u.Lc(" ",a.title," ")}}function C(e,t){1&e&&(u.Ob(0),u.Hc(1,_,8,11,"ng-template",23),u.Nb())}function M(e,t){if(1&e){var n=u.Rb();u.Ob(0),u.Qb(1,"div",29),u.Qb(2,"div",30),u.Xb("click",(function(){u.zc(n);var e=t.$implicit;return u.bc().select_category(e._id)})),u.Qb(3,"a"),u.Jc(4),u.Pb(),u.Pb(),u.Pb(),u.Nb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(2),u.Cb("active",i.selectedCategory==a._id),u.yb(2),u.Lc(" ",a.title,"\t")}}var w,k=((w=function(){function e(t,a,i,o,s){n(this,e),this.ps=t,this.router=a,this.ar=i,this.ss=o,this.loader=s,this.customOptions={loop:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:1},740:{items:3},940:{items:4},1100:{items:6}},nav:!0,autoWidth:!0},this.submitting=!1,this.duplicateAdId=null,this.unsub$=new l.a,this.selectedCategory=void 0}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(1),this.getCategories().then(this.checkAction.bind(this)),this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){t._id||(e.ps.newMessage("error","Login Needed","Please login to perform this action"),e.router.navigate(["/"]))})),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ad=t,e.ad instanceof Object&&e.ad.categoryId&&(e.selectedCategory=e.ad.categoryId)}))}},{key:"checkAction",value:function(){var e=this;this.ar.queryParams.pipe(Object(b.a)(this.unsub$)).subscribe((function(t){"edit"==t.action&&(t.adId?e.editAd(t.adId):alert("no ad choosen to edit"))}))}},{key:"getCategories",value:function(){var e=this;return new Promise((function(t,n){e.ps.getCategories().pipe(Object(b.a)(e.unsub$)).subscribe((function(a){if(a.status)return e.categories=a.data.categories,t(!0);e.ps.newMessage("error","Failed","couldn't fetch categories"),n(!1)}),(function(t){e.handle_error(t),n(!1)}))}))}},{key:"select_category",value:function(e){var t=this;if(this.selectedCategory=e,!this.selected_category_is_foodbank(this.selectedCategory)){var n=null,a=null;if(this.ad instanceof Object&&this.ad._id){if(this.selectedCategory==this.ad.categoryId)return this.nextPage();if(!confirm("category is already selected, do you want to change ad category?"))return this.selectedCategory=this.ad.categoryId,!1;n=this.ad._id,a="update-category"}this.load(),this.ps.selectCategory(this.selectedCategory,n).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){if(t.stopload(),e.status)return"update-category"==a?(t.ad.categoryId=e.data.categoryId,t.ad.categoryName=e.data.categoryName,e.data.completedSteps instanceof Object&&(t.ad.completedSteps=e.data.completedSteps),t.ps.NewAdData(t.ad)):t.ps.NewAdData(e.data),t.nextPage();t.handle_selection_failure(e,n)}),(function(e){t.handle_error(e),n&&(t.selectedCategory=t.ad.categoryId)}))}}},{key:"handle_selection_failure",value:function(e,t){if(e.code){if("duplicate-record"==e.code)return this.duplicateAdId=e.data.adId,this.handle_duplicate();"no-record"==e.code?this.ps.newMessage("info","Category Not Found",e.message+", this category might be deleted"):this.ps.newMessage("error","Error",e.message)}t&&(this.selectedCategory=this.ad.categoryId)}},{key:"nextPage",value:function(){var e;if(!this.selectedCategory)return this.ps.newMessage("error","No Category Selected","Please select a category");if(this.selectedCategory==(null===(e=this.ad)||void 0===e?void 0:e.categoryId)){if(this.ps.newMessage("success","Category Saved","selected category was saved"),this.selected_category_is_foodbank(this.ad.categoryName))return;this.router.navigate(["/sponsor/post/select-location"])}else this.select_category(this.selectedCategory)}},{key:"selected_category_is_foodbank",value:function(e){var t=this,n=this.categories.find((function(t){return t._id==e}));return"foodbank"==(null==n?void 0:n.title.toLowerCase())&&(setTimeout((function(){t.router.navigate(["/sponsor/foodbank/steps/select-location"])}),0),!0)}},{key:"editAd",value:function(e){var t=this;this.load(),this.ps.get_ad(e).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){t.stopload(),e.status?t.ps.NewAdData(e.data):alert(e.message)}),this.handle_error.bind(this))}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"handle_duplicate",value:function(){this.modalButton.nativeElement.click()}},{key:"delete_previous",value:function(){var e=this;this.load(),this.ps.delete_with_category(this.selectedCategory,this.duplicateAdId).pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.stopload(),e.modalButton.nativeElement.click(),t.status?(e.ps.newMessage("success","Previous Ad Deleted","Previous Ad was deleted"),e.select_category(e.selectedCategory)):e.ps.newMessage("error","Couldn't Delete Ad",t.message)}),(function(t){e.modalButton.nativeElement.click(),e.handle_error(t)}))}},{key:"handle_error",value:function(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",""+((null===(t=e.error)||void 0===t?void 0:t.message)||e.message)),this.stopload()}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}}]),e}()).\u0275fac=function(e){return new(e||w)(u.Kb(p.a),u.Kb(r.f),u.Kb(r.a),u.Kb(m.a),u.Kb(f.a))},w.\u0275cmp=u.Eb({type:w,selectors:[["app-select-category"]],viewQuery:function(e,t){var n;1&e&&u.Qc(Q,!0),2&e&&u.vc(n=u.Yb())&&(t.modalButton=n.first)},decls:34,vars:5,consts:[["type","button","data-toggle","modal","data-target","#exampleModalCenter",1,"btn","btn-primary",2,"display","none"],["modalButton",""],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-header","cat-header",2,"padding","0px"],[1,"container-fluid",2,"padding","0px"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form",2,"margin-top","0px"],[1,"col-lg-12"],[1,"cat-list"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,"item"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"img-white","category_img",3,"src","alt"],[1,"img-red","category_img",3,"src","alt"],[1,"col-lg-3","col-md-6"],[1,"tab-list",2,"height","55px",3,"click"]],template:function(e,t){1&e&&(u.Qb(0,"button",0,1),u.Jc(2," Launch demo modal "),u.Pb(),u.Qb(3,"div",2),u.Qb(4,"div",3),u.Qb(5,"div",4),u.Qb(6,"div",5),u.Qb(7,"h5",6),u.Jc(8,"Action"),u.Pb(),u.Qb(9,"button",7),u.Qb(10,"span",8),u.Jc(11,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(12,"div",9),u.Jc(13," An Ad with this category is already present, Do you want to delete it and continue with this ad? "),u.Pb(),u.Qb(14,"div",10),u.Qb(15,"button",11),u.Jc(16,"Close"),u.Pb(),u.Qb(17,"button",12),u.Xb("click",(function(){return t.delete_previous()})),u.Jc(18,"Delete"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(19,"section",13),u.Qb(20,"div",14),u.Qb(21,"div",15),u.Qb(22,"div",16),u.Qb(23,"div",17),u.Qb(24,"form"),u.Qb(25,"div",15),u.Qb(26,"div",18),u.Qb(27,"div",19),u.Qb(28,"ul",20),u.Qb(29,"owl-carousel-o",21),u.Hc(30,C,2,0,"ng-container",22),u.Pb(),u.Pb(),u.Pb(),u.Qb(31,"div",19),u.Qb(32,"div",15),u.Hc(33,M,5,3,"ng-container",22),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.yb(19),u.Cb("submitting",t.submitting),u.yb(10),u.ic("options",t.customOptions),u.yb(1),u.ic("ngForOf",t.categories),u.yb(3),u.ic("ngForOf",t.categories))},directives:[P.A,P.o,P.p,v.a,c.m,v.c],pipes:[y.a],styles:['.categories[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;justify-content:center}.category[_ngcontent-%COMP%]{min-width:16.66%;max-width:30%;height:140px;position:relative;padding:2px;margin:2px;flex-direction:column;align-items:center;background:#f5f5f5;overflow:hidden}.category[_ngcontent-%COMP%]:hover{cursor:pointer}.category[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;left:0;bottom:0;height:2px;background-color:#962179;transition:.4s;width:0}.category[_ngcontent-%COMP%]:hover:after{width:100%}.category[_ngcontent-%COMP%]:hover   .category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.category-image[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;overflow:hidden;margin:0 auto}.category-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-size:20px;font-weight:bolder;padding:0;margin:0}.category.active[_ngcontent-%COMP%]:after{width:100%}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bd4630!important}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.tab-list.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tab-list[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#bd4630}.subtitle[_ngcontent-%COMP%]{font-weight:400;color:#6c757d}.subtitle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:700!important}.category_img[_ngcontent-%COMP%]{height:100px!important;width:100px!important;border-radius:50%}@media screen and (max-width:700px){.category[_ngcontent-%COMP%]{flex:1;max-width:unset}}@media screen and (max-width:500px){.category[_ngcontent-%COMP%]{min-width:45%}}']}),w),x=o("DPk/");function O(e,t){if(1&e){var n=u.Rb();u.Qb(0,"label",18),u.Qb(1,"input",19),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().selectedCountry=e}))("click",(function(){u.zc(n);var e=t.$implicit;return u.bc().change_country(e._id)})),u.Pb(),u.Qb(2,"span"),u.Jc(3),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(1),u.jc("value",a._id),u.ic("ngModel",i.selectedCountry),u.yb(2),u.Kc(a.countryName)}}function J(e,t){if(1&e){var n=u.Rb();u.Qb(0,"label",18),u.Qb(1,"input",20),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().selectedState=e}))("click",(function(){u.zc(n);var e=t.$implicit;return u.bc().change_state(e.stateName)})),u.Pb(),u.Qb(2,"span"),u.Jc(3),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(1),u.jc("value",a.stateName),u.ic("ngModel",i.selectedState),u.yb(2),u.Kc(a.stateName)}}function I(e,t){if(1&e){var n=u.Rb();u.Qb(0,"label",18),u.Qb(1,"input",21),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().selectedCity=e}))("click",(function(){u.zc(n);var e=t.$implicit;return u.bc().change_city(e.cityName)})),u.Pb(),u.Qb(2,"span"),u.Jc(3),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(1),u.jc("value",a.cityName),u.ic("ngModel",i.selectedCity),u.yb(2),u.Kc(a.cityName)}}function A(e,t){1&e&&u.Lb(0,"div",22)}var L,z=((L=function(){function e(t,a,i,o,s){n(this,e),this.ds=t,this.ps=a,this.router=i,this.loader=o,this.ss=s,this.submitting=!1,this.loading=!1,this.saved=!1,this.unsub$=new l.a,this.cities=[],this.states=[],this.countries=[],this.selectedCountry="",this.selectedState="",this.selectedCity=""}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(2),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ad=t})),this.check_session(),this.check_action(),this.get_country().then((function(){e.prefill_selected_options()}))}},{key:"check_session",value:function(){var e=this;this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){t._id||(e.ps.newMessage("error","Login Needed","Please login to perform this action"),e.router.navigate(["/"]))}))}},{key:"check_action",value:function(){}},{key:"prefill_selected_options",value:function(){var e=this;this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){(null==t?void 0:t.country)&&e.prefill_country(t)}))}},{key:"prefill_country",value:function(e){var t=this.countries.find((function(t){return e.country==t.countryName}));this.selectedCountry=t?t._id:"",this.selectedCountryName=t?t.countryName:"",this.prefill_state(t,e)}},{key:"prefill_state",value:function(e,t){this.states=e?e.states:[],t.state&&(this.selectedState=t.state,this.prefill_city(t))}},{key:"prefill_city",value:function(e){var t=this;this.change_state(e.state).then((function(){t.ad.city&&(t.selectedCity=e.city,t.saved=!0)}))}},{key:"getAdData",value:function(e){var t=this;this.ps.get_ad(e).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){e.status?t.ps.NewAdData(e.data):t.ps.newMessage("error","No Data",e.message)}),this.handle_error.bind(this))}},{key:"get_country",value:function(){var e=this;return new Promise((function(t,n){e.ds.get_countries().pipe(Object(b.a)(e.unsub$)).subscribe((function(a){return a.status?(e.countries=a.data,t(!0)):(e.ps.newMessage("error","Country Fetch Failed",a.message),n(!1))}),(function(t){return e.handle_error(t),n(!1)}))}))}},{key:"change_country",value:function(e){var t=this;this.selectedCountry=e;var n=this.countries.find((function(e){return e._id==t.selectedCountry}));this.states=n.states,this.selectedCountryName=n.countryName,this.selectedState=null,this.saved=!1}},{key:"change_state",value:function(e){var t=this;return this.saved=!1,this.loading=!0,this.selectedState=e,new Promise((function(e,n){return t.get_cities_from_server(e,n)}))}},{key:"get_cities_from_server",value:function(e,t){var n=this;this.ds.get_cities(this.selectedCountry,this.selectedState).pipe(Object(b.a)(this.unsub$)).subscribe((function(a){return n.loading=!1,a.status?(n.cities=a.data[0].cities,e(!0)):(n.ps.newMessage("error","Cities Fetch Failed",a.message),t(!1))}),(function(e){return n.handle_error(e),t(!1)}))}},{key:"change_city",value:function(e){this.saved=!1,this.selectedCity=e,this.nextPage()}},{key:"save_location",value:function(){var e=this;this.emptySelect()||(this.load(),this.ps.selectLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.stopload(),t.status?(e.ps.NewAdData(t.data),e.ps.newMessage("success","Ad Created","New Ad was created."),e.saved=!0,e.nextPage()):e.ps.newMessage("error","Couldn't Save",t.message)}),this.handle_error.bind(this)))}},{key:"update_location",value:function(){var e=this;this.emptySelect()||(this.load(),this.ps.updateLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.stopload(),t.status?(e.ps.NewAdData(t.data),e.ps.newMessage("success","Location Updated","Location was updated"),e.saved=!0,e.nextPage()):e.ps.newMessage("error","Couldn't Update",t.message)}),this.handle_error.bind(this)))}},{key:"handle_error",value:function(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed","".concat(e.status,": ").concat(e.error.message)),this.stopload()}},{key:"prevPage",value:function(){this.unsavedChangesExists()||this.router.navigate(["/sponsor/post/select-category"])}},{key:"unsavedChangesExists",value:function(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}},{key:"nextPage",value:function(){this.saved&&!this.UnsavedChangesExists()?this.router.navigate(["/sponsor/post/ad-content"]):this.ad&&this.ad._id?this.update_location():this.save_location()}},{key:"emptySelect",value:function(){if(""==this.selectedCountry)this.ps.newMessage("info","Country Not Selected","please Select a country");else if(""==this.selectedState)this.ps.newMessage("info","State Not Selected","Please select a state");else{if(""!=this.selectedCity)return!1;this.ps.newMessage("info","City Not Selected","Please select a city")}return!0}},{key:"UnsavedChangesExists",value:function(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}},{key:"ngOnDestroy",value:function(){this.unsub$.next(),this.unsub$.complete()}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}}]),e}()).\u0275fac=function(e){return new(e||L)(u.Kb(x.a),u.Kb(p.a),u.Kb(r.f),u.Kb(f.a),u.Kb(m.a))},L.\u0275cmp=u.Eb({type:L,selectors:[["app-location"]],decls:41,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form"],[1,"col-lg-12"],[1,"cat-list"],[1,"cat-sub-list"],[3,"click"],["src","assets/images/left-arrow.png","alt","Icons"],["src","assets/images/no-image.jpg","alt","Icons",2,"width","50px","height","50px","border-radius","50%"],[2,"color","red"],[1,"cat-select-list"],[1,"col-lg-4"],[1,"cat-select-list-des"],[1,"cat-select-head"],[1,"cat-seledt-link"],["class","yes-radio",4,"ngFor","ngForOf"],["class","loader-spinner",4,"ngIf"],[1,"yes-radio"],["type","radio","name","province","id","provines","data-provines","22","data-name","Alberta",3,"ngModel","value","ngModelChange","click"],["type","radio","name","region","id","regions","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],["type","radio","name","city","id","cities","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],[1,"loader-spinner"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"div",3),u.Qb(4,"form"),u.Qb(5,"div",0),u.Qb(6,"div",1),u.Qb(7,"div",4),u.Qb(8,"div",5),u.Qb(9,"ul",6),u.Qb(10,"li"),u.Qb(11,"a",7),u.Xb("click",(function(){return t.prevPage()})),u.Lb(12,"img",8),u.Pb(),u.Pb(),u.Qb(13,"li"),u.Lb(14,"img",9),u.Qb(15,"span",10),u.Jc(16,"Posting in"),u.Pb(),u.Jc(17),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(18,"div",11),u.Qb(19,"div",0),u.Qb(20,"form"),u.Qb(21,"div",1),u.Qb(22,"div",12),u.Qb(23,"div",13),u.Qb(24,"h2",14),u.Jc(25," Select a Province "),u.Pb(),u.Qb(26,"div",15),u.Hc(27,O,4,3,"label",16),u.Pb(),u.Pb(),u.Pb(),u.Qb(28,"div",12),u.Qb(29,"div",13),u.Qb(30,"h2",14),u.Jc(31," Select a Region "),u.Pb(),u.Qb(32,"div",15),u.Hc(33,J,4,3,"label",16),u.Pb(),u.Pb(),u.Pb(),u.Qb(34,"div",12),u.Qb(35,"div",13),u.Qb(36,"h2",14),u.Jc(37," Select a City "),u.Pb(),u.Qb(38,"div",15),u.Hc(39,I,4,3,"label",16),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Hc(40,A,1,0,"div",17)),2&e&&(u.Cb("submitting",t.submitting),u.yb(17),u.Lc(" ",t.ad.categoryName,". "),u.yb(10),u.ic("ngForOf",t.countries),u.yb(6),u.ic("ngForOf",t.states),u.yb(6),u.ic("ngForOf",t.cities),u.yb(1),u.ic("ngIf",t.loading))},directives:[P.A,P.o,P.p,c.m,c.n,P.u,P.c,P.n,P.q],styles:['.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.select[_ngcontent-%COMP%]{min-width:32%;flex:1;max-width:48%;height:60px;margin:5px 2px}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;background:#f5f5f5}[_nghost-%COMP%]     .p-dropdown-label{display:flex;align-items:center}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.loader-spinner[_ngcontent-%COMP%]{border:10px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:70px;height:70px;-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite;z-index:1000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media screen and (max-width:700px){.select[_ngcontent-%COMP%]{min-width:45%;max-width:unset}}@media screen and (max-width:500px){.select[_ngcontent-%COMP%]{width:100%}}']}),L),N=o("QIUk"),B=o("dgC2");function S(e,t){1&e&&u.Jc(0," Ad Content ")}function $(e,t){1&e&&u.Jc(0," Enter relevant ad content here. ")}function j(e,t){1&e&&(u.Qb(0,"div",38),u.Qb(1,"span",39),u.Jc(2,"Please enter an advertisement title."),u.Pb(),u.Pb())}function F(e,t){1&e&&(u.Qb(0,"div",38),u.Qb(1,"span",39),u.Jc(2,"Please fill promoted by here."),u.Pb(),u.Pb())}function T(e,t){1&e&&(u.Qb(0,"div",38),u.Qb(1,"span",39),u.Jc(2,"Please enter a valid year of establishment"),u.Pb(),u.Pb())}function R(e,t){1&e&&(u.Qb(0,"div",38),u.Qb(1,"span",39),u.Jc(2,"Please fill promoters name here."),u.Pb(),u.Pb())}function E(e,t){1&e&&(u.Qb(0,"div",38),u.Qb(1,"span",39),u.Jc(2,"Please enter a tag line"),u.Pb(),u.Pb())}var X=function(){return{height:"320px","font-size":"16px"}};function D(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",12),u.Qb(1,"label",13),u.Jc(2,"Advertisement Title"),u.Pb(),u.Qb(3,"p",14),u.Jc(4),u.Pb(),u.Qb(5,"div",15),u.Qb(6,"input",16,17),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.adTitle=e})),u.Pb(),u.Lb(8,"img",18),u.Pb(),u.Hc(9,j,3,0,"div",19),u.Pb(),u.Qb(10,"div",20),u.Qb(11,"div",21),u.Qb(12,"label",22),u.Jc(13,"Promoted By"),u.Pb(),u.Qb(14,"input",23,24),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.promotedBy=e})),u.Pb(),u.Hc(16,F,3,0,"div",19),u.Pb(),u.Qb(17,"div",25),u.Qb(18,"label",26),u.Jc(19,"Year Established"),u.Pb(),u.Qb(20,"input",27,28),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.yearEstablished=e})),u.Pb(),u.Hc(22,T,3,0,"div",19),u.Pb(),u.Qb(23,"div",21),u.Qb(24,"label",29),u.Jc(25,"Promoters Name"),u.Pb(),u.Qb(26,"input",30,31),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.sponsorTitle=e})),u.Pb(),u.Hc(28,R,3,0,"div",19),u.Pb(),u.Pb(),u.Qb(29,"div",32),u.Qb(30,"label",33),u.Jc(31,"Tag Line"),u.Pb(),u.Qb(32,"input",34,35),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.tagline=e})),u.Pb(),u.Hc(34,E,3,0,"div",19),u.Pb(),u.Qb(35,"div",12),u.Qb(36,"label",36),u.Jc(37,"Description"),u.Pb(),u.Qb(38,"p-editor",37),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().adContent.description=e})),u.Pb(),u.Pb()}if(2&e){var a=u.wc(7),i=u.wc(21),o=u.wc(27),s=u.wc(33),c=u.bc(),r=u.wc(1);u.yb(4),u.Lc("",100-((null==c.adContent.adTitle?null:c.adContent.adTitle.length)||0)," characters left"),u.yb(2),u.ic("ngModel",c.adContent.adTitle),u.yb(3),u.ic("ngIf",r.submitted&&a.invalid),u.yb(5),u.ic("ngModel",c.adContent.promotedBy),u.yb(2),u.ic("ngIf",r.submitted&&o.invalid),u.yb(4),u.ic("ngModel",c.adContent.yearEstablished),u.yb(2),u.ic("ngIf",r.submitted&&i.invalid),u.yb(4),u.ic("ngModel",c.adContent.sponsorTitle),u.yb(2),u.ic("ngIf",r.submitted&&o.invalid),u.yb(4),u.ic("ngModel",c.adContent.tagline),u.yb(2),u.ic("ngIf",r.submitted&&s.invalid),u.yb(4),u.Fc(u.mc(14,X)),u.ic("ngModel",c.adContent.description)}}var H,U=((H=function(){function e(t,a,i,o,s){n(this,e),this.ren=t,this.ps=a,this.router=i,this.loader=o,this.ss=s,this.unsub$=new l.a,this.submitting=!1,this.saved=!1,this.adContent={adTitle:"",sponsorTitle:"",promotedBy:"",description:"",tagline:"",yearEstablished:null}}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(3),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ad=t,e.isAdInitialized(t),e.prefill_ad_data(t),t.adTitle&&t.description&&t.sponsorTitle&&(e.saved=!0)})),this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){return e.adContent.sponsorTitle=t.sponsorTitle}))}},{key:"isAdInitialized",value:function(e){this.ad._id||(this.ps.newMessage("info","Ad Not Initialized","Please start an ad by selecting category"),this.router.navigate(["/sponsor/post/select-location"]))}},{key:"prefill_ad_data",value:function(e){this.adContent.adTitle=e.adTitle?e.adTitle:"",this.adContent.sponsorTitle=e.sponsorTitle?e.sponsorTitle:"",this.adContent.description=e.description?e.description:"",this.adContent.tagline=e.tagline?e.tagline:"",this.adContent.yearEstablished=e.yearEstablished||null,this.adContent.promotedBy=e.promotedBy||""}},{key:"ngAfterViewInit",value:function(){var e=document.getElementsByClassName("ql-formats"),t=this.ren.parentNode(e[0]);this.ren.removeChild(t,e[0]),this.ren.removeChild(t,e[2]),this.ren.removeChild(t,e[4])}},{key:"save_ad_content",value:function(){var e=this;return new Promise((function(t,n){e.ps.save_ad_content(e.adContent).pipe(Object(b.a)(e.unsub$)).subscribe((function(a){return a.status?(e.ps.newMessage("success","Ad Content Saved","The content was saved!"),e.ps.NewAdData(a.data),t(!0)):(e.ps.newMessage("error","Content Save Failed",a.message),n(!1))}),(function(t){return e.handle_error(t),n(!1)}))}))}},{key:"prevPage",value:function(){this.router.navigate(["/sponsor/post/select-location"])}},{key:"nextPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/sponsor/post/upload-images";if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.saved?this.check_and_handle_unsaved_changes(t):this.save_and_move(t)}},{key:"check_and_handle_unsaved_changes",value:function(e){this.load(),this.checkUnsavedChanges()?this.confirmActionForUnsavedChanges()?this.save_and_move(e):(this.stopload(),this.router.navigate([e])):(this.stopload(),this.router.navigate(["/sponsor/post/upload-images"]))}},{key:"checkUnsavedChanges",value:function(){return this.ad.sponsorTitle!=this.adContent.sponsorTitle||this.ad.description!=this.adContent.description||this.ad.adTitle!=this.adContent.adTitle||this.ad.tagline!=this.adContent.tagline||this.ad.yearEstablished!=this.adContent.yearEstablished||this.ad.promotedBy!=this.adContent.promotedBy}},{key:"confirmActionForUnsavedChanges",value:function(){return!0}},{key:"save_and_move",value:function(e){var t=this;this.load(),this.save_ad_content().then((function(){t.stopload(),t.router.navigate([e])})).catch((function(){t.stopload()}))}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"handle_error",value:function(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",(null===(t=e.error)||void 0===t?void 0:t.message)||e.message)}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}}]),e}()).\u0275fac=function(e){return new(e||H)(u.Kb(u.D),u.Kb(p.a),u.Kb(r.f),u.Kb(f.a),u.Kb(m.a))},H.\u0275cmp=u.Eb({type:H,selectors:[["app-ad-content"]],decls:20,vars:2,consts:[["ngForm","",1,"input-container",3,"ngSubmit"],["sadForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","title"],["pTemplate","subtitle"],["pTemplate","content"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit","name","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"form-group"],["for","adTitle"],[1,"left-char"],[1,"form-icon","right-icon"],["type","text","autocapitalize","on","name","adTitle","placeholder","Max: 100 words","maxlength","100","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["adTitle","ngModel"],["src","assets/images/emoji-icon.png","alt","Icons"],["class","errors",4,"ngIf"],[1,"group"],["id","name-input",1,"form-group","flex-2"],["for","promotedBy"],["type","text","autocapitalize","on","name","promotedBy","placeholder","","pattern","[a-zA-Z0-9 ]+","required","","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["promotedBy","ngModel"],["id","age-input",1,"form-group","flex-1"],["for","yearEstablished"],["type","number","name","age","min","0","pattern","[0-9]{4}","required","","ngModel","","placeholder","YYYY",1,"form-control",3,"ngModel","ngModelChange"],["yearEstablished","ngModel"],["for","name"],["type","text","autocapitalize","on","name","name","placeholder","","pattern","[a-zA-Z0-9 ]+","required","","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name","ngModel"],["id","name-input",1,"form-group"],["for","tag"],["type","text","autocapitalize","on","name","tag","placeholder","Describe your best attribute in short and catchy way","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["tag","ngModel"],["for","description"],["name","description","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){var n=u.Rb();u.Qb(0,"form",0,1),u.Xb("ngSubmit",(function(){u.zc(n);var e=u.wc(1);return t.nextPage(e.form)})),u.Qb(2,"section",2),u.Qb(3,"p-card"),u.Hc(4,S,1,0,"ng-template",3),u.Hc(5,$,1,0,"ng-template",4),u.Hc(6,D,39,15,"ng-template",5),u.Pb(),u.Pb(),u.Qb(7,"div",6),u.Qb(8,"ul"),u.Qb(9,"li"),u.Qb(10,"button",7),u.Xb("click",(function(){return t.prevPage()})),u.Lb(11,"i",8),u.Jc(12,"Previous step"),u.Pb(),u.Pb(),u.Qb(13,"li"),u.Qb(14,"button",9),u.Xb("click",(function(){u.zc(n);var e=u.wc(1);return t.nextPage(e.form,"/agency")})),u.Jc(15," Save & Exit "),u.Pb(),u.Pb(),u.Qb(16,"li"),u.Qb(17,"button",10),u.Jc(18," Next step "),u.Lb(19,"i",11),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&e&&(u.yb(2),u.Cb("submitting",t.submitting))},directives:[P.A,P.o,P.p,N.a,d.j,P.c,P.k,P.w,P.n,P.q,c.n,P.t,P.s,B.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b9bb2;font-size:20px;font-weight:700}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.form-group[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]{height:50px!important}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{min-width:100%;margin-right:0}}']}),H),K=o("mrSG"),V=o("tk/3"),q=o("JP5V"),Y=["adImagesModalClose"],G=["BusinessRegModalClose"],Z=["adVideoModalClose"];function W(e,t){if(1&e){var n=u.Rb();u.Qb(0,"ul"),u.Qb(1,"li"),u.Qb(2,"a"),u.Lb(3,"i",58),u.Pb(),u.Pb(),u.Qb(4,"li"),u.Lb(5,"img",59),u.cc(6,"server"),u.Pb(),u.Qb(7,"li"),u.Jc(8),u.Pb(),u.Qb(9,"li"),u.Qb(10,"a",60),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=t.index;return u.bc().deleteAdImage(e,a)})),u.Jc(11,"-"),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=t.index;u.yb(5),u.jc("src",u.dc(6,2,a),u.Cc),u.yb(3),u.Lc("Ad Image ",i+1,"/10 ")}}function ee(e,t){if(1&e){var n=u.Rb();u.Qb(0,"ul"),u.Qb(1,"li"),u.Qb(2,"a"),u.Lb(3,"i",58),u.Pb(),u.Pb(),u.Qb(4,"li"),u.Lb(5,"img",59),u.cc(6,"server"),u.Pb(),u.Qb(7,"li"),u.Jc(8),u.Pb(),u.Qb(9,"li"),u.Qb(10,"a",60),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=t.index;return u.bc().delete_BRP(e,a)})),u.Jc(11,"-"),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=t.index;u.yb(5),u.jc("src",u.dc(6,2,a),u.Cc),u.yb(3),u.Lc("Business Registration Proof ",i+1,"/2 ")}}function te(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",61),u.Qb(1,"label",62),u.Lb(2,"img",63),u.Qb(3,"input",64),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=t.index;return u.bc().ad_image_selection_change(e.imgPath,a)})),u.Pb(),u.Lb(4,"span",65),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit;u.yb(2),u.jc("src",a.imgPath,u.Cc)}}function ne(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",61),u.Qb(1,"label",62),u.Lb(2,"img",63),u.Qb(3,"input",64),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=t.index;return u.bc().BRP_selection_change(e.imgPath,a)})),u.Pb(),u.Lb(4,"span",65),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit;u.yb(2),u.jc("src",a.imgPath,u.Cc)}}var ae,ie=((ae=function(){function t(e,a,i){n(this,t),this.ps=e,this.router=a,this.loader=i,this.submitting=!1,this.currentSelectedAdImages=[],this.maxAdImages=10,this.newlyAddedAdImages=0,this.currentSelectedBRP=[],this.maxBRPFiles=2,this.uploadedAdVideo=null,this.newVideoLink=null,this.unsub$=new l.a,this.uploadedAdImages=[],this.uploadedBRP=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(4),this.load(),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.stopload(),e.ad=t,e.isAdInitialized(t),e.prefill_component_data(t)}))}},{key:"isAdInitialized",value:function(e){var t;(null===(t=this.ad)||void 0===t?void 0:t._id)||(this.ps.newMessage("info","Ad Not Initialized","Please start a new ad by selecting category"),this.router.navigate(["/sponsor/post/select-location"]))}},{key:"prefill_component_data",value:function(e){e.adImages instanceof Array&&(this.uploadedAdImages=e.adImages,this.maxAdImages=10-this.uploadedAdImages.length),e.BRPFiles instanceof Array&&(this.uploadedBRP=e.BRPFiles),e.adVideo&&(this.uploadedAdVideo=e.adVideo)}},{key:"uploadAdImages",value:function(e){var t=this,n=e;this.load(),this.ps.save_ad_images(n).subscribe((function(e){t.handle_adImage_upload_httpEvents(e,n)}),this.errorHandle.bind(this))}},{key:"handle_adImage_upload_httpEvents",value:function(e,t){if(e.type==V.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof V.f){var n=e.body;this.stopload(),n.status?(this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedAdImages+=t.length,this.ps.NewAdData(n.data),this.currentSelectedAdImages=[],this.adImagesModalCloseButton.nativeElement.click()):this.ps.newMessage("error","Couldn't Upload",n.message)}}},{key:"deleteAdImage",value:function(e,t){var n=this;this.load(),this.ps.deleteAdImage(e).subscribe((function(a){a.status?(n.ps.newMessage("success","Delete Ad Image","Image was deleted from server"),n.remove_adimage_from_component_array(e,t),n.ad.adImages=n.uploadedAdImages,n.ps.NewAdData(n.ad)):(n.ps.newMessage("error","Failed To Delete",a.message),n.stopload())}),this.errorHandle.bind(this))}},{key:"remove_adimage_from_component_array",value:function(e,t){if(this.uploadedAdImages[t]==e)this.uploadedAdImages.splice(t,1);else{var n=this.uploadedAdImages.indexOf(e);this.uploadedAdImages.splice(n,1)}}},{key:"delete_BRP",value:function(e,t){var n=this;this.load(),this.ps.deleteBRP(e).subscribe((function(a){a.status?(n.ps.newMessage("success","Delete File","File was deleted from server"),n.remove_BRP_from_component_array(e,t),n.ad.adImages=n.uploadedAdImages,n.ps.NewAdData(n.ad)):(n.ps.newMessage("error","Failed To Delete",a.message),n.stopload())}),this.errorHandle.bind(this))}},{key:"remove_BRP_from_component_array",value:function(e,t){if(this.uploadedBRP[t]==e)this.uploadedBRP.splice(t,1);else{var n=this.uploadedBRP.indexOf(e);this.uploadedAdImages.splice(n,1)}}},{key:"uploadAdVideo",value:function(){var e=this;this.confirmVideoReupload()&&(this.load(),this.ps.save_ad_video_link(this.newVideoLink).subscribe((function(t){e.handle_adVideo_upload_httpEvents(t)}),this.errorHandle.bind(this)))}},{key:"confirmVideoReupload",value:function(){return!this.ad.adVideo||confirm("A Video is already saved, Do You want to save new link?")}},{key:"handle_adVideo_upload_httpEvents",value:function(e){if(e.type==V.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof V.f){var t=e.body;this.stopload(),t.status?(this.ps.newMessage("success","Video Uploaded","The video was uploaded"),this.ps.NewAdData(t.data),this.newVideoLink=null,this.adVideoModalCloseButton.nativeElement.click()):this.ps.newMessage("error","Couldn't Upload",t.message)}}},{key:"uploadBRProof",value:function(e){var t=this;this.ps.save_BRP_files(e).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){t.handle_BRP_upload_httpEvents(e)}),(function(e){t.errorHandle(e)}))}},{key:"handle_BRP_upload_httpEvents",value:function(e){if(e.type==V.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total),"Uploading.....");else if(e instanceof V.f){var t=e.body;this.stopload(),t.status?this.handle_BRP_upload_success(t):this.ps.newMessage("error","Couldn't Upload",t.message)}}},{key:"handle_BRP_upload_success",value:function(e){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.ps.NewAdData(e.data),this.currentSelectedBRP=[],this.businessRegModalCloseButton.nativeElement.click()}},{key:"nextPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/sponsor/post/user-details";this.uploadedAdImages.length>0&&this.uploadedAdVideo?this.unuploadedFilesExists()?this.ifDiscardUnuploadedFiles()&&this.router.navigate([e]):this.router.navigate([e]):this.ps.newMessage("error","No Image Uploaded","Please upload required images")}},{key:"prevPage",value:function(){this.router.navigate(["/sponsor/post/ad-content"])}},{key:"unuploadedFilesExists",value:function(){return this.currentSelectedAdImages.length>0||null!=this.newVideoLink}},{key:"ifDiscardUnuploadedFiles",value:function(){return!1}},{key:"select_new_image_for_ad_images",value:function(t,n){return Object(K.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var i,o,s,c,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:this.submitting=!0,i=t.target.files,o=e(i),a.prev=3,o.s();case 5:if((s=o.n()).done){a.next=17;break}if(c=s.value,!(this.currentSelectedAdImages.length<10-this.uploadedAdImages.length)){a.next=14;break}return a.next=10,this.convertToBase64(c);case 10:r=a.sent,this.currentSelectedAdImages.push({imgPath:r,blob:c,selected:!0}),a.next=15;break;case 14:this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");case 15:a.next=5;break;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(3),o.e(a.t0);case 22:return a.prev=22,o.f(),a.finish(22);case 25:n.reset(),this.submitting=!1;case 26:case"end":return a.stop()}}),a,this,[[3,19,22,25]])})))}},{key:"convertToBase64",value:function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(){n("error in parsing")}}))}},{key:"finalize_selected_ad_images",value:function(){var e=this.currentSelectedAdImages.map((function(e){if(1==e.selected)return e.blob}));this.uploadAdImages(e)}},{key:"finalize_selected_BRP",value:function(){var e=this.currentSelectedBRP.map((function(e){if(1==e.selected)return e.blob}));this.uploadBRProof(e)}},{key:"ad_image_selection_change",value:function(e,t){var n;if((null===(n=this.currentSelectedAdImages[t])||void 0===n?void 0:n.imgPath)==e)this.currentSelectedAdImages[t].selected=!this.currentSelectedAdImages[t].selected;else{var a=this.currentSelectedAdImages.find((function(t){return t.imgPath==e}));a&&(a.selected=!a.selected)}}},{key:"BRP_selection_change",value:function(e,t){var n;if((null===(n=this.currentSelectedBRP[t])||void 0===n?void 0:n.imgPath)==e)this.currentSelectedBRP[t].selected=!this.currentSelectedBRP[t].selected;else{var a=this.currentSelectedBRP.find((function(t){return t.imgPath==e}));a&&(a.selected=!a.selected)}}},{key:"add_new_BR_proof",value:function(t,n){return Object(K.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var i,o,s,c,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=t.target.files,o=e(i),a.prev=2,o.s();case 4:if((s=o.n()).done){a.next=15;break}if(c=s.value,this.currentSelectedBRP.length<2-this.uploadedBRP.length){a.next=9;break}return this.ps.newMessage("info","Cannot Add More","Maximum number of images reached."),a.abrupt("break",15);case 9:return a.next=11,this.convertToBase64(c);case 11:r=a.sent,this.currentSelectedBRP.push({imgPath:r,blob:c,selected:!0});case 13:a.next=4;break;case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(2),o.e(a.t0);case 20:return a.prev=20,o.f(),a.finish(20);case 23:n.reset();case 24:case"end":return a.stop()}}),a,this,[[2,17,20,23]])})))}},{key:"errorHandle",value:function(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Couldn't Save",(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.stopload()}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){var e,t,n;this.unsub$.next(!0),this.unsub$.complete(),null===(e=this.adImagesModalCloseButton)||void 0===e||e.nativeElement.click(),null===(t=this.businessRegModalCloseButton)||void 0===t||t.nativeElement.click(),null===(n=this.adVideoModalCloseButton)||void 0===n||n.nativeElement.click()}}]),t}()).\u0275fac=function(e){return new(e||ae)(u.Kb(p.a),u.Kb(r.f),u.Kb(f.a))},ae.\u0275cmp=u.Eb({type:ae,selectors:[["app-photos"]],viewQuery:function(e,t){var n;1&e&&(u.Qc(Y,!0),u.Qc(G,!0),u.Qc(Z,!0)),2&e&&(u.vc(n=u.Yb())&&(t.adImagesModalCloseButton=n.first),u.vc(n=u.Yb())&&(t.businessRegModalCloseButton=n.first),u.vc(n=u.Yb())&&(t.adVideoModalCloseButton=n.first))},decls:133,vars:13,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form"],[1,"col-lg-12"],[1,"upload-img","text-center"],["data-toggle","modal","data-name1","photo","id","pic1","data-target",".adImg-modal"],["aria-hidden","true",1,"fa","fa-picture-o"],["data-toggle","modal","data-target",".video-modal"],["aria-hidden","true",1,"fa","fa-video-camera"],["data-toggle","modal","data-name","photo","id","pic","data-target",".identityImg-modal"],["aria-hidden","true",1,"fa","fa-file"],[1,"img-list"],[1,"img-sub-list"],["id","show_image"],[4,"ngFor","ngForOf"],[1,"top-tip"],[1,"fa","fa-info-circle"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","adImg-modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["adImagesInputForm",""],[1,"modal-header","text-left",2,"border-bottom","none"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["adImagesModalClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"upload-file"],["id","saved-pictures",1,"moderation__grid"],[1,"row","gallery-img-id"],["class","col-sm-2 selectedImages",4,"ngFor","ngForOf"],["id","prepend_div",1,"col-sm-2"],["for","gallery-photo-add",1,"label-head"],["type","file","name","adImages","multiple","","id","gallery-photo-add","accept","image/jpg, image/png",3,"change"],[1,"modal-footer"],["type","button","name","submit",1,"btn","btn-select",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","identityImg-modal","fade","bd-example-modal-lg"],["BRPInputForm",""],["id","exampleModalLongTitle",1,"modal-title","pr-3"],["BusinessRegModalClose",""],["for","gallery-photo-add-identity",1,"label-head"],["type","file","name","identityImages","id","gallery-photo-add-identity","accept","image/jpg, image/png","multiple","",2,"display","none",3,"change"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","img-modal","fade","video-modal","bd-example-modal-lg"],[1,"modal-header","text-left",2,"border-bottom","0px"],["adVideoModalClose",""],[1,"cssform"],[1,"col-12","px-0"],["type","url","name","video","required","",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"video-container"],[1,"loading-message"],["id","cartoonVideo","width","100%","height","250","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","frameborder","0","allowfullscreen","",1,"embed-responsive-item",3,"src"],["type","submit","name","submit",1,"btn","btn-select",3,"click"],[1,"fa","fa-bars"],["alt","Images",3,"src"],["href","javascript:void(0)",1,"minus-btn",3,"click"],[1,"col-sm-2","selectedImages"],[1,"image-with-selection"],[1,"image-with-selection__image",3,"src"],["type","checkbox","checked","",1,"image-with-selection__checkbox",3,"click"],[1,"image-with-selection__checkmark"]],template:function(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"form"),u.Qb(4,"div",3),u.Qb(5,"div",0),u.Qb(6,"div",1),u.Qb(7,"div",4),u.Qb(8,"div",5),u.Qb(9,"ul"),u.Qb(10,"li",6),u.Lb(11,"i",7),u.Jc(12," Add Pictures"),u.Qb(13,"span"),u.Jc(14),u.Pb(),u.Pb(),u.Qb(15,"li",8),u.Lb(16,"i",9),u.Jc(17," Add Video"),u.Qb(18,"span"),u.Jc(19),u.Pb(),u.Pb(),u.Qb(20,"li",10),u.Lb(21,"i",11),u.Jc(22," Business Registration"),u.Qb(23,"span"),u.Jc(24,"Document"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(25,"div",12),u.Qb(26,"div",13),u.Qb(27,"span",14),u.Hc(28,W,12,4,"ul",15),u.Hc(29,ee,12,4,"ul",15),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(30,"div",16),u.Qb(31,"h3"),u.Lb(32,"i",17),u.Jc(33," Top tip for a successful advertisement "),u.Pb(),u.Qb(34,"p"),u.Jc(35," It's obvious that adding a good photo will increase your ad's potential for success, but it's equally important to have agood number of photos, especially from different angles,perspectives,and locations. Experiment. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(36,"div",18),u.Qb(37,"ul"),u.Qb(38,"li"),u.Qb(39,"button",19),u.Xb("click",(function(){return t.prevPage()})),u.Lb(40,"i",20),u.Jc(41,"Previous step"),u.Pb(),u.Pb(),u.Qb(42,"li"),u.Qb(43,"button",21),u.Xb("click",(function(){return t.nextPage("/agency")})),u.Jc(44," Save & Exit "),u.Pb(),u.Pb(),u.Qb(45,"li"),u.Qb(46,"button",21),u.Xb("click",(function(){return t.nextPage()})),u.Jc(47," Next step "),u.Lb(48,"i",22),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(49,"div",23),u.Qb(50,"div",24),u.Qb(51,"div",25),u.Qb(52,"div",25),u.Qb(53,"form",null,26),u.Qb(55,"div",27),u.Qb(56,"h5",28),u.Jc(57,"Select from your computer"),u.Pb(),u.Qb(58,"button",29,30),u.Qb(60,"span",31),u.Jc(61,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(62,"div",32),u.Qb(63,"div",33),u.Qb(64,"div",34),u.Qb(65,"div",35),u.Hc(66,te,5,1,"div",36),u.Qb(67,"div",37),u.Qb(68,"label",38),u.Qb(69,"span"),u.Jc(70,"+"),u.Pb(),u.Jc(71,"Add"),u.Pb(),u.Qb(72,"input",39),u.Xb("change",(function(e){u.zc(n);var a=u.wc(54);return t.select_new_image_for_ad_images(e,a)})),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(73,"div",40),u.Qb(74,"button",41),u.Xb("click",(function(){return t.finalize_selected_ad_images()})),u.Jc(75,"Use selected Pics "),u.Lb(76,"i",22),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(77,"div",42),u.Qb(78,"div",24),u.Qb(79,"div",25),u.Qb(80,"div",25),u.Qb(81,"form",null,43),u.Qb(83,"div",27),u.Qb(84,"h5",44),u.Jc(85,"Provide 2 Business Registration Documents verifying your business."),u.Pb(),u.Qb(86,"button",29,45),u.Qb(88,"span",31),u.Jc(89,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(90,"div",32),u.Qb(91,"div",33),u.Qb(92,"div",34),u.Qb(93,"div",35),u.Hc(94,ne,5,1,"div",36),u.Qb(95,"div",37),u.Qb(96,"label",46),u.Qb(97,"span"),u.Jc(98,"+"),u.Pb(),u.Jc(99,"Add"),u.Pb(),u.Qb(100,"input",47),u.Xb("change",(function(e){u.zc(n);var a=u.wc(82);return t.add_new_BR_proof(e,a)})),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(101,"div",40),u.Qb(102,"button",41),u.Xb("click",(function(){return t.finalize_selected_BRP()})),u.Jc(103,"Use selected Pics "),u.Lb(104,"i",22),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(105,"div",48),u.Qb(106,"div",24),u.Qb(107,"div",25),u.Qb(108,"div",25),u.Qb(109,"div",49),u.Qb(110,"h5",28),u.Jc(111,"Video URL"),u.Pb(),u.Qb(112,"button",29,50),u.Qb(114,"span",31),u.Jc(115,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(116,"form",51),u.Qb(117,"div",32),u.Qb(118,"div",33),u.Qb(119,"ul"),u.Qb(120,"li",52),u.Qb(121,"input",53),u.Xb("ngModelChange",(function(e){return t.newVideoLink=e})),u.Pb(),u.Pb(),u.Pb(),u.Qb(122,"div",54),u.Qb(123,"div",55),u.Qb(124,"h4"),u.Qb(125,"small"),u.Jc(126,"Preview will load here."),u.Pb(),u.Pb(),u.Pb(),u.Lb(127,"iframe",56),u.cc(128,"safe"),u.Pb(),u.Pb(),u.Pb(),u.Qb(129,"div",40),u.Qb(130,"button",57),u.Xb("click",(function(){return t.uploadAdVideo()})),u.Jc(131," Use selected Video "),u.Lb(132,"i",22),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&e&&(u.Cb("submitting",t.submitting),u.yb(14),u.Lc("",10-t.uploadedAdImages.length," Left"),u.yb(5),u.Lc("",t.uploadedAdVideo?"0":"1"," Left"),u.yb(9),u.ic("ngForOf",t.uploadedAdImages),u.yb(1),u.ic("ngForOf",t.uploadedBRP),u.yb(37),u.ic("ngForOf",t.currentSelectedAdImages),u.yb(28),u.ic("ngForOf",t.currentSelectedBRP),u.yb(27),u.jc("placeholder",t.uploadedAdVideo||"e.g. http://youtube.com/JDJSU72 or http://vimeo.com/8273612"),u.ic("ngModel",t.newVideoLink),u.yb(6),u.ic("src",u.dc(128,11,t.newVideoLink||t.uploadedAdVideo),u.Bc))},directives:[P.A,P.o,P.p,c.m,P.c,P.w,P.n,P.q],pipes:[q.a,y.a],styles:['.label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.uploadedImages[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 15px}.uploadedImages[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:5px 0}.uploadedImages[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}video[_ngcontent-%COMP%]{width:150px;height:auto}button.btn.btn-select[_ngcontent-%COMP%]{color:#fff;font-weight:700;background:#01768a;padding:9px 30px 5px}.image-with-selection__checkmark[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:18px;height:18px;top:4.5px;right:4.5px;border:1.5px solid hsla(0,0%,100%,.9);background-color:rgba(0,0,0,.5);z-index:10;border-radius:50%}.image-with-selection__checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute}.image-with-selection__checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]:after{left:6.5px;top:3.5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.image-with-selection[_ngcontent-%COMP%]{width:100%;border-radius:6px;overflow:hidden;display:flex;position:relative;margin-right:15px;margin-bottom:15px}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]{background-color:#58a688;box-shadow:0 2px 9px 0 rgba(0,0,0,.76);border:none}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:4px 0 0;margin-top:1px\\9;line-height:normal}.image-with-selection__image[_ngcontent-%COMP%]{width:100px;height:100px}']}),ae),oe=o("arFO"),se=o("CwEU");function ce(e,t){1&e&&u.Jc(0," Any information provided below is used by myissues Inc. ")}function re(e,t){1&e&&u.Jc(0," This will be use for verification for cash and food delivery items. The information must be correct in order to collect any donations make to on this website. ")}function de(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid business name"),u.Pb(),u.Pb())}function le(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid Promoters Name"),u.Pb(),u.Pb())}function be(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid first name"),u.Pb(),u.Pb())}function ue(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid last name"),u.Pb(),u.Pb())}function pe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please select a valid country"),u.Pb(),u.Pb())}function ge(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please select a valid state"),u.Pb(),u.Pb())}function he(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please select a valid city"),u.Pb(),u.Pb())}function me(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid address"),u.Pb(),u.Pb())}function fe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid zip code"),u.Pb(),u.Pb())}function Pe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid emergency number"),u.Pb(),u.Pb())}function ve(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid contact number"),u.Pb(),u.Pb())}function ye(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid reference name(Only alphabets and numerics)"),u.Pb(),u.Pb())}function Qe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid contact number"),u.Pb(),u.Pb())}function _e(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid reference extension"),u.Pb(),u.Pb())}function Ce(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid Reference Occupation(Only alphabets and spaces)"),u.Pb(),u.Pb())}function Me(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid Organization Name(Only alphabets and spaces)"),u.Pb(),u.Pb())}function we(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid reference name (Only Alphabets and spaces)"),u.Pb(),u.Pb())}function ke(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid reference extension"),u.Pb(),u.Pb())}function xe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid reference occupation(Only alphabets and spaces)"),u.Pb(),u.Pb())}function Oe(e,t){1&e&&(u.Qb(0,"div",93),u.Qb(1,"span",94),u.Jc(2,"Please enter a valid Organization Name(Only alphanumeric and spaces)"),u.Pb(),u.Pb())}function Je(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",12),u.Qb(1,"div",13),u.Qb(2,"label",14),u.Jc(3,"Business Name"),u.Pb(),u.Qb(4,"input",15,16),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.businessName=e})),u.Pb(),u.Hc(6,de,3,0,"div",17),u.Pb(),u.Qb(7,"div",13),u.Qb(8,"label",18),u.Jc(9,"Promoters Name"),u.Pb(),u.Qb(10,"input",19,20),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.sponsorTitle=e})),u.Pb(),u.Hc(12,le,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(13,"div",12),u.Qb(14,"div",21),u.Qb(15,"label",22),u.Jc(16,"Email"),u.Pb(),u.Qb(17,"input",23),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.email=e})),u.Pb(),u.Pb(),u.Pb(),u.Qb(18,"div",12),u.Qb(19,"div",13),u.Qb(20,"label",24),u.Jc(21,"First Name*"),u.Pb(),u.Qb(22,"input",25,26),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.firstName=e})),u.Pb(),u.Hc(24,be,3,0,"div",17),u.Pb(),u.Qb(25,"div",27),u.Qb(26,"label",28),u.Jc(27,"Last Name*"),u.Pb(),u.Qb(28,"input",29,30),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.lastName=e})),u.Pb(),u.Hc(30,ue,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(31,"div",12),u.Qb(32,"div",21),u.Qb(33,"label",31),u.Jc(34,"Province"),u.Pb(),u.Qb(35,"div",32),u.Qb(36,"p-dropdown",33),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.country=e}))("onChange",(function(e){return u.zc(n),u.bc().change_country(e)})),u.Pb(),u.Pb(),u.Hc(37,pe,3,0,"div",17),u.Pb(),u.Qb(38,"div",21),u.Qb(39,"label",34),u.Jc(40,"State"),u.Pb(),u.Qb(41,"div",35),u.Qb(42,"p-dropdown",36),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.state=e}))("onChange",(function(e){return u.zc(n),u.bc().change_state(e)})),u.Pb(),u.Hc(43,ge,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(44,"div",21),u.Qb(45,"label",37),u.Jc(46,"City"),u.Pb(),u.Qb(47,"div",38),u.Qb(48,"p-dropdown",39),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.city=e}))("onChange",(function(e){return u.zc(n),u.bc().change_city(e)})),u.Pb(),u.Hc(49,he,3,0,"div",17),u.Pb(),u.Pb(),u.Pb(),u.Qb(50,"div",12),u.Qb(51,"div",13),u.Qb(52,"label",40),u.Jc(53,"Address"),u.Pb(),u.Qb(54,"input",41,42),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.address=e})),u.Pb(),u.Hc(56,me,3,0,"div",17),u.Pb(),u.Qb(57,"div",13),u.Qb(58,"label",43),u.Jc(59,"Zip Code"),u.Pb(),u.Qb(60,"input",44,45),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.zipCode=e})),u.Pb(),u.Hc(62,fe,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(63,"div",12),u.Qb(64,"div",21),u.Qb(65,"label",46),u.Jc(66,"Emergency Number"),u.Pb(),u.Qb(67,"p-inputMask",47),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.emergencyContact=e})),u.Pb(),u.Hc(68,Pe,3,0,"div",17),u.Pb(),u.Qb(69,"div",13),u.Qb(70,"label",48),u.Jc(71,"Contact Number"),u.Pb(),u.Qb(72,"p-inputMask",49),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.contact=e})),u.Pb(),u.Hc(73,ve,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(74,"p"),u.Qb(75,"strong"),u.Jc(76,"Note: "),u.Pb(),u.Jc(77," Provide Us with someone in the community that can verify that you're in crisis and need help. This person must work in the community in any capacity. "),u.Pb(),u.Qb(78,"h4"),u.Qb(79,"small"),u.Qb(80,"strong"),u.Jc(81,"Reference 1"),u.Pb(),u.Pb(),u.Pb(),u.Qb(82,"div",50),u.Qb(83,"div",51),u.Qb(84,"label",52),u.Jc(85,"Name*"),u.Pb(),u.Qb(86,"input",53,54),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours1.name=e})),u.Pb(),u.Hc(88,ye,3,0,"div",17),u.Pb(),u.Qb(89,"div",55),u.Qb(90,"label",56),u.Jc(91,"Contact Number*"),u.Pb(),u.Qb(92,"p-inputMask",57,58),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours1.contact=e})),u.Pb(),u.Hc(94,Qe,3,0,"div",17),u.Pb(),u.Qb(95,"div",59),u.Qb(96,"label",60),u.Jc(97,"Ext.*"),u.Pb(),u.Qb(98,"input",61,62),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours1.extension=e})),u.Pb(),u.Hc(100,_e,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(101,"div",12),u.Qb(102,"div",13),u.Qb(103,"label",63),u.Jc(104,"Occupation*"),u.Pb(),u.Qb(105,"input",64,65),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours1.occupation=e})),u.Pb(),u.Hc(107,Ce,3,0,"div",17),u.Pb(),u.Qb(108,"div",27),u.Qb(109,"label",66),u.Jc(110,"Organization Name*"),u.Pb(),u.Qb(111,"input",67,68),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours1.organization=e})),u.Pb(),u.Hc(113,Me,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(114,"h4"),u.Qb(115,"small"),u.Qb(116,"strong"),u.Jc(117,"Reference 2"),u.Pb(),u.Pb(),u.Pb(),u.Qb(118,"div",50),u.Qb(119,"div",51),u.Qb(120,"label",69),u.Jc(121,"Name"),u.Pb(),u.Qb(122,"input",70,71),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours2.name=e})),u.Pb(),u.Hc(124,we,3,0,"div",17),u.Pb(),u.Qb(125,"div",55),u.Qb(126,"label",72),u.Jc(127,"Contact Number"),u.Pb(),u.Qb(128,"p-inputMask",73),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours2.contact=e})),u.Pb(),u.Pb(),u.Qb(129,"div",59),u.Qb(130,"label",74),u.Jc(131,"Ext."),u.Pb(),u.Qb(132,"input",75,76),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours2.extension=e})),u.Pb(),u.Hc(134,ke,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(135,"div",12),u.Qb(136,"div",13),u.Qb(137,"label",77),u.Jc(138,"Occupation"),u.Pb(),u.Qb(139,"input",78,79),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours2.occupation=e})),u.Pb(),u.Hc(141,xe,3,0,"div",17),u.Pb(),u.Qb(142,"div",27),u.Qb(143,"label",80),u.Jc(144,"Organization Name"),u.Pb(),u.Qb(145,"input",81,76),u.Xb("ngModelChange",(function(e){return u.zc(n),u.bc().contact.neighbours2.organization=e})),u.Pb(),u.Hc(147,Oe,3,0,"div",17),u.Pb(),u.Pb(),u.Qb(148,"div",82),u.Qb(149,"div",83),u.Lb(150,"input",84),u.Qb(151,"div",85),u.Lb(152,"div",86),u.Qb(153,"div",87),u.Qb(154,"div",88),u.Qb(155,"output",89),u.Jc(156," 50 "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(157,"div",12),u.Qb(158,"div",21),u.Qb(159,"p",90),u.Lb(160,"i",91),u.Jc(161," For your privacy, please only provide your approximate location. "),u.Pb(),u.Lb(162,"iframe",92),u.Pb(),u.Pb()}if(2&e){var a=u.wc(5),i=u.wc(23),o=u.wc(29),s=u.wc(55),c=u.wc(61),r=u.wc(87),d=u.wc(99),l=u.wc(106),b=u.wc(112),p=u.wc(123),g=u.wc(133),h=u.wc(140),m=u.bc(),f=u.wc(1);u.yb(4),u.ic("ngModel",m.contact.businessName),u.yb(2),u.ic("ngIf",f.submitted&&a.invalid),u.yb(4),u.ic("ngModel",m.contact.sponsorTitle),u.yb(2),u.ic("ngIf",f.submitted&&a.invalid),u.yb(5),u.ic("ngModel",m.contact.email),u.yb(5),u.ic("ngModel",m.contact.firstName),u.yb(2),u.ic("ngIf",f.submitted&&i.invalid),u.yb(4),u.ic("ngModel",m.contact.lastName),u.yb(2),u.ic("ngIf",f.submitted&&o.invalid),u.yb(6),u.ic("options",m.countries)("filter",!0)("ngModel",m.contact.country)("dataKey",m._id)("showClear",!1),u.yb(1),u.ic("ngIf",f.submitted&&!m.contact.country),u.yb(5),u.ic("options",m.states)("filter",!0)("ngModel",m.contact.state),u.yb(1),u.ic("ngIf",f.submitted&&!m.contact.state),u.yb(5),u.ic("options",m.cities)("filter",!0)("ngModel",m.contact.city),u.yb(1),u.ic("ngIf",f.submitted&&!m.contact.city),u.yb(5),u.ic("ngModel",m.contact.address),u.yb(2),u.ic("ngIf",f.submitted&&s.invalid),u.yb(4),u.ic("ngModel",m.contact.zipCode),u.yb(2),u.ic("ngIf",f.submitted&&c.invalid),u.yb(5),u.ic("styleClass","form-control")("ngModel",m.contact.emergencyContact),u.yb(1),u.ic("ngIf",f.submitted&&!m.contact.emergencyContact),u.yb(4),u.ic("styleClass","form-control")("ngModel",m.contact.contact),u.yb(1),u.ic("ngIf",f.submitted&&!m.contact.contact),u.yb(13),u.ic("ngModel",m.contact.neighbours1.name),u.yb(2),u.ic("ngIf",f.submitted&&r.invalid),u.yb(4),u.ic("styleClass","form-control")("ngModel",m.contact.neighbours1.contact),u.yb(2),u.ic("ngIf",f.submitted&&!m.contact.neighbours1.contact),u.yb(4),u.ic("ngModel",m.contact.neighbours1.extension),u.yb(2),u.ic("ngIf",f.submitted&&d.invalid),u.yb(5),u.ic("ngModel",m.contact.neighbours1.occupation),u.yb(2),u.ic("ngIf",f.submitted&&l.invalid),u.yb(4),u.ic("ngModel",m.contact.neighbours1.organization),u.yb(2),u.ic("ngIf",f.submitted&&b.invalid),u.yb(9),u.ic("ngModel",m.contact.neighbours2.name),u.yb(2),u.ic("ngIf",f.submitted&&p.invalid),u.yb(4),u.ic("styleClass","form-control")("ngModel",m.contact.neighbours2.contact),u.yb(4),u.ic("ngModel",m.contact.neighbours2.extension),u.yb(2),u.ic("ngIf",f.submitted&&g.invalid),u.yb(5),u.ic("ngModel",m.contact.neighbours2.occupation),u.yb(2),u.ic("ngIf",f.submitted&&h.invalid),u.yb(4),u.ic("ngModel",m.contact.neighbours2.organization),u.yb(2),u.ic("ngIf",f.submitted&&g.invalid)}}var Ie,Ae=((Ie=function(){function e(t,a,i,o,s){n(this,e),this.ps=t,this.ds=a,this.router=i,this.ss=o,this.loader=s,this.submitting=!1,this.saved=!1,this.unsub$=new l.a,this.countries=[],this.states=[],this.cities=[],this.initialize_contact_details()}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(5),this.check_session(),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ad=t,e.isAdInitialized(t),console.log(e.ad),e.contact=Object.assign(Object.assign({},e.contact),t),e.contact.email=e.session.email,e.contact.sponsorTitle=e.session.sponsorTitle}))}},{key:"isAdInitialized",value:function(e){e._id||(this.ps.newMessage("error","Ad Not Initialized","Please initialize the ad first"),this.router.navigate(["/sponsor/post/select-location"]))}},{key:"check_session",value:function(){var e=this;this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"ngAfterViewInit",value:function(){var e=this;this.get_country().then((function(){setTimeout((function(){return e.preset_selectors()}),100)}))}},{key:"save_contact",value:function(){var e=this;return new Promise((function(t,n){e.ps.save_contact(e.contact).pipe(Object(b.a)(e.unsub$)).subscribe((function(a){return e.handle_response(a,t,n)}),(function(t){return e.handle_error(t),n(!1)}))}))}},{key:"handle_response",value:function(e,t,n){return e.status?(this.ps.newMessage("success","Details Saved","Contact details are successfully saved"),this.ps.NewAdData(e.data),t(!0)):(this.ps.newMessage("error","Couldn't Save Details",e.message),n(!1))}},{key:"get_country",value:function(){var e=this;return new Promise((function(t,n){e.ds.get_countries().pipe(Object(b.a)(e.unsub$)).subscribe((function(a){return a.status?(e.countries=a.data,t(!0)):(e.ps.newMessage("error","Country Fetch Failed",a.message),n(!1))}),(function(t){return e.handle_error(t),n(!1)}))}))}},{key:"change_country",value:function(e){var t=this,n=this.countries.find((function(e){return e._id==t.contact.country}));this.states=n.states,this.contact.state=n.countryName}},{key:"change_state",value:function(e){var t=this;return new Promise((function(e,n){t.ds.get_cities(t.contact.country,t.contact.state).pipe(Object(b.a)(t.unsub$)).subscribe((function(a){return a.status?(t.cities=a.data[0].cities,e(!0)):(t.ps.newMessage("error","Cities Fetch Failed",a.message),n(!1))}),(function(e){return t.handle_error(e),n(!1)}))}))}},{key:"change_city",value:function(e){}},{key:"preset_selectors",value:function(){var e=this;if(this.ad.country){var t=this.countries.find((function(t){return e.ad.country==t.countryName}));this.contact.country=t?t._id:"",this.states=t?t.states:[],this.ad.state&&(this.contact.state=this.ad.state,this.preset_city_selector())}}},{key:"preset_city_selector",value:function(){var e=this;this.change_state({}).then((function(){e.ad.city&&(e.contact.city=e.ad.city,e.saved=!0)}))}},{key:"nextPage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/sponsor/post/upgrades";if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.load(),this.save_contact().then((function(){t.stopload(),t.router.navigate([n])})).catch((function(){return t.stopload()}))}},{key:"prevPage",value:function(){this.router.navigate(["/sponsor/post/upload-images"])}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"handle_error",value:function(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","Sorry some error occured"):this.ps.newMessage("error","Error Occured",e.error.message)}},{key:"ngOnDestroy",value:function(){this.unsub$.next(),this.unsub$.complete()}},{key:"initialize_contact_details",value:function(){this.contact={sponsorTitle:"",promotedBy:"",firstName:"",lastName:"",age:null,dob:"",country:"",state:"",city:"",zipCode:"",contact:"",emergencyContact:"",email:"",neighbours1:{name:"",contact:"",extension:"",occupation:"",organization:""},neighbours2:{name:"",contact:"",extension:"",occupation:"",organization:""}}}}]),e}()).\u0275fac=function(e){return new(e||Ie)(u.Kb(p.a),u.Kb(x.a),u.Kb(r.f),u.Kb(m.a),u.Kb(f.a))},Ie.\u0275cmp=u.Eb({type:Ie,selectors:[["app-user-details"]],decls:20,vars:2,consts:[["action","",1,"input-container",3,"ngSubmit"],["detailsForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","title"],["pTemplate","subtitle"],["pTemplate","content"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"group"],["id","name-input",1,"form-group"],["for","businessName"],["type","text","autocapitalize","on","name","businessName","placeholder","Enter Business Name","pattern","[a-zA-Z ]+","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["businessName",""],["class","errors",4,"ngIf"],["for","sponsorTitle"],["type","text","autocapitalize","on","name","sponsorTitle","placeholder","Enter Promoters Name","pattern","[a-zA-Z ]+","ngModel","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["sponsorTitle",""],[1,"form-group"],["for","email"],["type","email","disabled","true","pattern","^([a-z0-9_\\.\\+-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$","name","email","placeholder","abcd@abcd.abc",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],["type","text","autocapitalize","words","name","firstName","placeholder","Only your first name","pattern","[a-zA-Z]+ *","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["firstName","ngModel"],["id","gender-input",1,"form-group"],["for","gender"],["type","text","name","lastName","autocapitalize","words","placeholder","Only your last name","pattern","[a-zA-Z]+","pattern","[a-zA-Z]+ *","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["lastName","ngModel"],["for","selectCountry"],[1,"select","select-country","form-group"],["placeholder","Select a Country","optionLabel","countryName","optionValue","_id","name","selectCountry",3,"options","filter","ngModel","dataKey","showClear","ngModelChange","onChange"],["for","state"],[1,"select","select-state"],["placeholder","Select a state","optionLabel","stateName","optionValue","stateName","name","selectState",3,"options","filter","ngModel","ngModelChange","onChange"],["for","city"],[1,"select","select-city"],["placeholder","Select a city","optionLabel","cityName","optionValue","cityName","name","selectCity",3,"options","filter","ngModel","ngModelChange","onChange"],["for","address"],["type","text","autocapitalize","words","name","address","placeholder","your address","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["address","ngModel"],["for","zipCode"],["type","text","name","zipCode","placeholder","","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["for","emergencyNumber"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","emergencyNumber",3,"styleClass","ngModel","ngModelChange"],["for","contactNumber"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","contactNumber",3,"styleClass","ngModel","ngModelChange"],[1,"group","reference"],[1,"form-group","name-input"],["for","name1"],["type","text","autocapitalize","words","name","name1","placeholder","full name","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name1","ngModel"],[1,"form-group","contact-input"],["for","contactNumber1"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","refContact1","ngModel","","required","",3,"styleClass","ngModel","ngModelChange"],["refContact1","ngModel"],[1,"form-group","ext-input"],["for","ext1"],["type","text","name","ext1","placeholder","","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["ext1","ngModel"],["for","occupation1"],["type","text","autocapitalize","words","name","occupation1","placeholder","","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["occupation1","ngModel"],["for","orgName"],["type","text","autocapitalize","words","name","orgName","placeholder","","pattern","[a-zA-Z ]+","ngModel","","required","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["orgName","ngModel"],["for","name2"],["type","text","autocapitalize","words","name","name2","placeholder","full name","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name2","ngModel"],["for","contactNumber2"],["mask","(999) 999-9999","placeholder","(999) 999-9999","name","refContact2",3,"styleClass","ngModel","ngModelChange"],["for","ext2"],["type","text","name","ext2","placeholder","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["ext2","ngModel"],["for","occupation2"],["type","text","autocapitalize","words","name","occupation2","placeholder","","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["occupation2","ngModel"],["for","orgName2"],["type","text","autocapitalize","words","name","orgName2","placeholder","","pattern","[a-zA-Z ]*","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],[1,"col-lg-12"],[1,"range"],["name","range","type","range","min","0","max","100000",2,"position","absolute","width","1px","height","1px","overflow","hidden","opacity","0"],["id","js-rangeslider-0",1,"rangeslider","rangeslider-horizontal"],[1,"rangeslider-fill-lower",2,"width","143px"],[1,"rangeslider-thumb",2,"left","133.5px"],[1,"range-output"],["name","output","for","range",1,"output"],[1,"cat-des-p"],[1,"fa","fa-info-circle"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d32616.372608782793!2d-79.76631770197883!3d43.7332529531104!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x882b15eaa5d05abf%3A0x352d31667cc38677!2sBrampton%2C%20ON%2C%20Canada!5e0!3m2!1sen!2sin!4v1592690766209!5m2!1sen!2sin","width","100%","height","700","frameborder","0","allowfullscreen","","aria-hidden","false","tabindex","0",2,"border","0"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){var n=u.Rb();u.Qb(0,"form",0,1),u.Xb("ngSubmit",(function(){u.zc(n);var e=u.wc(1);return t.nextPage(e)})),u.Qb(2,"section",2),u.Qb(3,"p-card"),u.Hc(4,ce,1,0,"ng-template",3),u.Hc(5,re,1,0,"ng-template",4),u.Hc(6,Je,163,54,"ng-template",5),u.Pb(),u.Pb(),u.Qb(7,"div",6),u.Qb(8,"ul"),u.Qb(9,"li"),u.Qb(10,"button",7),u.Xb("click",(function(){return t.prevPage()})),u.Lb(11,"i",8),u.Jc(12,"Previous step"),u.Pb(),u.Pb(),u.Qb(13,"li"),u.Qb(14,"button",9),u.Xb("click",(function(){u.zc(n);var e=u.wc(1);return t.nextPage(e,"/agency")})),u.Jc(15," Save & Exit "),u.Pb(),u.Pb(),u.Qb(16,"li"),u.Qb(17,"button",10),u.Jc(18," Next step "),u.Lb(19,"i",11),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&e&&(u.yb(2),u.Cb("submitting",t.submitting))},directives:[P.A,P.o,P.p,N.a,d.j,P.c,P.t,P.n,P.q,c.n,P.w,oe.a,se.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}form[_ngcontent-%COMP%]{width:100%}.select[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;margin:0;font-size:16px}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}[_nghost-%COMP%]     .p-inputtext{margin:0;height:49px;padding:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700;font-size:24px}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;padding:0 2px}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:first-child{flex:3!important}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(2){flex:2!important}.reference[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(3){flex:1!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]:not(textarea){height:50px!important}.ref-head[_ngcontent-%COMP%], .var-head[_ngcontent-%COMP%]{font-weight:700;font-size:30px}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{min-width:100%;padding:0}}']}),Ie),Le=["paymentOption"],ze=["optionClose"],Ne=["paymentStatus"];function Be(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",94),u.Qb(1,"div",95),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=u.bc();return a.select_plan(a.adPlans[0]._id,a.adPlans[0].planName,e)})),u.Qb(2,"a",96),u.Jc(3),u.Qb(4,"span"),u.Jc(5),u.Pb(),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(2),u.Cb("active",a._id==i.categoryId),u.yb(1),u.Lc(" ",a.inDays?a.days+" Day":a.hours+" Hour"," "),u.yb(2),u.Lc("$ ",a.price,"")}}function Se(e,t){if(1&e){var n=u.Rb();u.Ob(0),u.Qb(1,"li",97),u.Xb("click",(function(){u.zc(n);var e=t.$implicit,a=u.bc();return a.select_plan(a.adPlans[1]._id,a.adPlans[1].planName,e)})),u.Qb(2,"a",98),u.Jc(3),u.Pb(),u.Pb(),u.Nb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(2),u.Cb("active",a._id==i.categoryId),u.yb(1),u.Lc(" ",a.inHours?a.hours+" Hour":a.days+" Days"," ")}}function $e(e,t){if(1&e){var n=u.Rb();u.Qb(0,"li"),u.Qb(1,"a",99),u.Xb("click",(function(){u.zc(n);var e=t.$implicit;return u.bc().select_bump(e)})),u.Jc(2),u.Qb(3,"span"),u.Jc(4),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,i=u.bc();u.yb(1),u.Cb("active",a._id==i.selectedBump._id),u.yb(1),u.Lc(" ",a.count," bumps "),u.yb(2),u.Lc("$ ",a.price,"/each")}}function je(e,t){if(1&e&&(u.Qb(0,"ul"),u.Qb(1,"li"),u.Qb(2,"h4"),u.Jc(3),u.Qb(4,"span"),u.Jc(5),u.Pb(),u.Pb(),u.Qb(6,"p"),u.Jc(7),u.Pb(),u.Pb(),u.Pb()),2&e){var n=u.bc();u.yb(3),u.Lc(" ",n.plan.planName," "),u.yb(2),u.Lc("$ ",n.plan.price,""),u.yb(2),u.Lc(" ",n.plan.inDays?n.plan.days+" Day":n.plan.hours+" Hour"," ")}}function Fe(e,t){if(1&e&&(u.Qb(0,"ul"),u.Qb(1,"li"),u.Qb(2,"h4"),u.Jc(3," Additional Bump Ups "),u.Qb(4,"span"),u.Jc(5),u.Pb(),u.Pb(),u.Qb(6,"p"),u.Jc(7),u.Pb(),u.Pb(),u.Pb()),2&e){var n=u.bc();u.yb(5),u.Lc(" $ ",n.selectedBump.price,""),u.yb(2),u.Lc(" ",n.selectedBump.count+" Bumps"," ")}}function Te(e,t){if(1&e){var n=u.Rb();u.Qb(0,"div",100),u.Qb(1,"p",101),u.Jc(2),u.Pb(),u.Qb(3,"button",102),u.Xb("click",(function(){return u.zc(n),u.bc().close_modal()})),u.Jc(4,"Cancel"),u.Pb(),u.Qb(5,"button",103),u.Xb("click",(function(){return u.zc(n),u.bc().buyBumpWithBalance()})),u.Jc(6,"Pay"),u.Pb(),u.Pb()}if(2&e){var a=u.bc();u.yb(2),u.Mc("You will be charge $",a.selectedBump.price," for ",a.selectedBump.count," bumps from your balance.")}}var Re,Ee=((Re=function(){function e(t,a,i,o,s,c){n(this,e),this.router=t,this.ps=a,this.ss=i,this.ds=o,this.ar=s,this.loader=c,this.unsub$=new l.a,this.submitting=!1,this.adPlans=[],this.showPlan=!1,this.bumps=[],this.selectedBump={},this.showBumps=!1,this.FlagPlanAdded=!1,this.FlagPlanChanged=!1,this.FlagPlanPaid=!1,this.showMainPageOptions=!1,this.showPage1Options=!1,this.showBumpsOptions=!1,this.transactionDetails={}}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(6),this.check_and_handle_ad(),this.getAdPlan(),this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.balance=t.balance}))}},{key:"check_and_handle_ad",value:function(){var e=this;this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){if(e.ad=t,!e.ad._id)return e.checkParamForAdId()}))}},{key:"checkParamForAdId",value:function(){var e=this;this.ar.queryParams.pipe(Object(b.a)(this.unsub$)).subscribe((function(t){if(t.adId)return e.getAdData(t.adId);e.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting category"),e.router.navigate(["/sponsor/post/select-category"])}))}},{key:"getAdData",value:function(e){var t=this;this.ps.get_ad(e).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){e.status?t.ps.NewAdData(e.data):t.ps.newMessage("error","No Data",e.message)}),this.errorHandle.bind(this))}},{key:"getAdPlan",value:function(){var e=this;this.ps.get_ad_plans().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){t.status?(e.adPlans=t.data.adPlans,e.bumps=t.data.bumps,e.fillPrePurchasedPlan()):e.ps.newMessage("error","No Plan Found",t.message)}),this.errorHandle.bind(this))}},{key:"fillPrePurchasedPlan",value:function(){var e=this;if(this.check_ad_plan_selected(),this.ad.bumpupPlanCheck){var t=this.bumps.find((function(t){var n;return t._id==(null===(n=e.ad.bumpupPlan)||void 0===n?void 0:n._id)}));this.selectedBump=t,this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,this.showBumpsOptions=!0}}},{key:"check_ad_plan_selected",value:function(){var e,t,n,a=this;if(this.ad.advertisePlanCheck){var i=this.adPlans.find((function(e){var t,n,i;return(null===(t=e.planName)||void 0===t?void 0:t.toLowerCase())==(null===(i=null===(n=a.ad.advertisePlan)||void 0===n?void 0:n.adPlanName)||void 0===i?void 0:i.toLowerCase())}));i||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0));var o=null===(e=this.ad.advertisePlan)||void 0===e?void 0:e.adPlanCategory,s=i.categories.find((function(e){return o==e._id}));s||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0)),this.select_plan(i._id,i.planName,s,null===(t=this.ad.advertisePlan)||void 0===t?void 0:t.paid),this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,i.planName==(null===(n=this.adPlans[0])||void 0===n?void 0:n.planName)?this.showMainPageOptions=!0:this.showPage1Options=!0,this.ad.advertisePlan.paid&&(this.FlagPlanPaid=!0)}}},{key:"select_plan",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e==this.planId&&n._id==this.categoryId||(this.planId=e,this.categoryId=n._id,this.plan=Object.assign({planId:e,planName:t,paid:a},n),this.FlagPlanChanged=!0)}},{key:"select_bump",value:function(e){this.selectedBump=e,this.FlagPlanChanged=!0}},{key:"buyBumps",value:function(){this.ps.lock=!0;var e=this.selectedBump;this.router.navigate(["/sponsor/bumps/pay-with-card"],{queryParams:{bumpId:e._id,price:e.price,count:e.count,back:"/sponsor/post/upgrades",adId:this.ad._id}})}},{key:"nextPage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/sponsor/post/finalize";this.load(),this.save_plan().then((function(){e.stopload(),e.router.navigate([t])})).catch((function(){e.stopload()}))}},{key:"prevPage",value:function(){this.router.navigate(["/sponsor/post/user-details"])}},{key:"save_plan",value:function(){var e=this;return new Promise((function(t,n){return e.FlagPlanAdded&&!e.FlagPlanChanged?t(!0):e.FlagPlanAdded&&e.FlagPlanPaid&&!window.confirm("you have already purchased a plan, upgrading will cost you extra")?(e.planId=e.ad.advertisePlan.adPlanId,e.categoryId=e.ad.advertisePlan.adPlanCategory,n(!1)):(e.ps.newPlanTake(e.plan),void e.save_plans_to_server(t,n))}))}},{key:"save_plans_to_server",value:function(e,t){var n,a=this,i={adId:this.ad._id,adPlan:{planId:this.planId,categoryId:this.categoryId},bumps:{bumpId:null===(n=this.selectedBump)||void 0===n?void 0:n._id}};this.ps.save_plan(i).subscribe((function(n){n.status?(a.ad.completedSteps instanceof Object&&(a.ad.completedSteps[6]=!0),a.ps.NewAdData(Object.assign(Object.assign({},a.ad),n.data)),e(!0)):(a.ds.newMessage("error","Couldn't Save Plan",n.message),t(!1))}),(function(e){a.errorHandle(e),t(!1)}))}},{key:"upgrade",value:function(){this.showPlan=!0}},{key:"cancelPlan",value:function(){this.showPlan=!1,this.plan=null,this.ps.newPlanTake({})}},{key:"errorHandle",value:function(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",(null===(t=e.error)||void 0===t?void 0:t.message)||e.error)}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){var e,t;this.unsub$.next(!0),this.unsub$.complete(),null===(t=null===(e=this.closeModal)||void 0===e?void 0:e.nativeElement)||void 0===t||t.click()}},{key:"buyBumpWithBalance",value:function(){var e=this,t=this.selectedBump;this.ds.purchase_bump_up_with_bal({bumpId:this.selectedBump._id}).pipe(Object(b.a)(this.unsub$)).subscribe((function(n){n.status?(e.ss.bumpsAdd(n.data.totalBumps),e.closeModal.nativeElement.click(),e.transactionDetails={transactionId:n.data.transactionId,count:t.count,price:t.price,date:new Date},e.paymentStatusModalOpener.nativeElement.click()):e.ds.newMessage("error","Failed",n.message)}),this.errorHandle.bind(this))}},{key:"close_page1_selection",value:function(){this.showPage1Options=!1,this.plan.planName==this.adPlans[1].planName&&(this.plan={},this.planId=null,this.categoryId=null)}},{key:"close_main_page_selection",value:function(){this.showMainPageOptions=!1,this.plan.planName==this.adPlans[0].planName&&(this.plan={},this.planId=null,this.categoryId=null)}},{key:"close_bumps_selection",value:function(){this.showBumpsOptions=!1,this.selectedBump={}}},{key:"close_modal",value:function(){this.closeModal.nativeElement.click(),this.showConfirm=!1,this.selectedBump=null}}]),e}()).\u0275fac=function(e){return new(e||Re)(u.Kb(r.f),u.Kb(p.a),u.Kb(m.a),u.Kb(x.a),u.Kb(r.a),u.Kb(f.a))},Re.\u0275cmp=u.Eb({type:Re,selectors:[["app-upgrades"]],viewQuery:function(e,t){var n;1&e&&(u.Qc(Le,!0),u.Qc(ze,!0),u.Qc(Ne,!0)),2&e&&(u.vc(n=u.Yb())&&(t.paymentOptionModal=n.first),u.vc(n=u.Yb())&&(t.closeModal=n.first),u.vc(n=u.Yb())&&(t.paymentStatusModalOpener=n.first))},decls:265,vars:36,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"panl-list-sec","upgrade-list"],["alt","home-pic",3,"src"],[1,"cancer-des"],[1,"delivery-form"],[1,"col-lg-9"],[1,"upgrade-sec"],[1,"top-tip"],[1,"col-md-2"],["href","javascript:void(0);",1,"tip-links"],[1,"col-md-10"],[1,"up-common-header","upgrade-purple-header"],["src","assets/images/upgrade-1.png","alt","Icons"],[1,"common-page-des","upgrade-des"],[1,"btn","btn-featured",3,"click"],[1,"fa","fa-angle-right"],[1,"upgrade-hide-sec","common-hide-sec"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3",3,"click"],[1,"hide-sec-des","upgrade-close"],["href","javascript:void(0);"],[1,"fa","fa-close"],[1,"upgrade-sec","page-up-sec"],[1,"up-common-header","upgrade-black-header"],["src","assets/images/upgrade-2.png","alt","Icons"],[1,"common-page-des","page-sec-des"],[1,"btn","btn-page",3,"click"],[1,"page-hide-sec","common-hide-sec"],[1,"up-page-head"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[4,"ngFor","ngForOf"],[1,"upgrade-close",3,"click"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"page-tab-des"],["id","hour_bumps"],["id","pg_one"],[1,"upgrade-sec","bump-up-sec"],[1,"up-common-header","upgrade-blue-header"],["src","assets/images/bump-icon-1.png","alt","Icons"],[1,"badge"],[1,"common-page-des","bump-page-des"],[1,"btn","btn-bumps-des",3,"click"],[1,"bumps-hide-sec","common-hide-sec"],[1,"bump-tab-list"],[1,"top-tip","yellow-tip"],[1,"fa","fa-info-circle"],[1,"understand-sec"],[1,"agree-head"],["href","javascript:void(0);",1,"contact-link"],[1,"col-lg-3"],["id","upgrades_invoice",1,"upgrades-invoice"],["id","calc_credit"],["type","hidden","id","credit","name","credit","value",""],[4,"ngIf"],["id","main_page_add"],["id","page11"],["id","additional_bumps"],[1,"grand-total"],["id","grand_total"],["type","hidden","id","grand_tl"],["type","hidden","id","user_main_balance","name","user_main_balance","value",""],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["name","submit",1,"btn","btn-next",3,"click"],["href","javascript:void(0)","data-toggle","modal","data-target","#reportModal",1,"btn","btn-report",2,"visibility","hidden"],["paymentOption",""],["id","reportModal","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head","pl-3"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["optionClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],[1,"btn","btn-success","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-dollar"],[1,"btn","btn-primary","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-payment"],["class","form-group mt-2",4,"ngIf"],["href","javascript:void(0)","data-toggle","modal","data-target","#paymentStatus",1,"btn","btn-report",2,"visibility","hidden"],["paymentStatus",""],["id","paymentStatus","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"text-center","text-dark"],[1,"table","my-2"],[1,"color"],[1,"col-md-3"],[1,"hide-sec-des",3,"click"],["href","javascript:void(0);","id","main_page"],[1,"nav-item",3,"click"],["id","home-tab",1,"nav-link"],["id","add_bumps",3,"click"],[1,"form-group","mt-2"],[1,"text-danger"],[1,"btn","btn-danger","px-3","mr-1",3,"click"],[1,"btn","btn-warning","text-center","px-3",3,"click"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"form"),u.Qb(4,"div",3),u.Qb(5,"ul"),u.Qb(6,"li"),u.Lb(7,"img",4),u.cc(8,"server"),u.Pb(),u.Qb(9,"li"),u.Qb(10,"div",5),u.Jc(11),u.Qb(12,"p"),u.Jc(13),u.cc(14,"date"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(15,"div",6),u.Qb(16,"div",1),u.Qb(17,"div",7),u.Qb(18,"div",8),u.Qb(19,"div",9),u.Qb(20,"div",1),u.Qb(21,"div",10),u.Qb(22,"a",11),u.Jc(23," TIP "),u.Pb(),u.Pb(),u.Qb(24,"div",12),u.Qb(25,"p"),u.Qb(26,"strong"),u.Jc(27,"Paid for features:"),u.Pb(),u.Jc(28," money for ads will be deducted from your account at a later point in time if you choose to use these features. "),u.Pb(),u.Qb(29,"p"),u.Jc(30," By using this features it will help increase your chances of more people viewing your profile issues. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(31,"div",13),u.Lb(32,"img",14),u.Jc(33," Main Page Ad "),u.Pb(),u.Qb(34,"div",15),u.Qb(35,"p"),u.Qb(36,"strong"),u.Jc(37,"Do you want maximum for your ad ?"),u.Pb(),u.Jc(38,"Your ad will be displayed in our highest visiblit Featured Ad format in the panhandlers category of Greater Toronto Area. "),u.Pb(),u.Qb(39,"a",16),u.Xb("click",(function(){return t.showMainPageOptions=!0})),u.Jc(40," Upgrade to Main Page Ad "),u.Lb(41,"i",17),u.Pb(),u.Pb(),u.Qb(42,"div",18),u.Qb(43,"div",1),u.Hc(44,Be,6,4,"div",19),u.Qb(45,"div",20),u.Xb("click",(function(){return t.close_main_page_selection()})),u.Qb(46,"div",21),u.Qb(47,"a",22),u.Lb(48,"i",23),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(49,"div",24),u.Qb(50,"div",25),u.Qb(51,"ul"),u.Qb(52,"li"),u.Lb(53,"img",26),u.Jc(54," Page 1 "),u.Pb(),u.Qb(55,"li"),u.Jc(56," From "),u.Qb(57,"span"),u.Jc(58,"$ 2"),u.Pb(),u.Jc(59," / Bump "),u.Pb(),u.Pb(),u.Pb(),u.Qb(60,"div",27),u.Qb(61,"p"),u.Qb(62,"strong"),u.Jc(63,"Put your Ad on Autopilot."),u.Pb(),u.Jc(64,"MyIssues will monitor your ad so that it always stays on page 1. No more babysitting your ad. The most effective and hands off approach. "),u.Pb(),u.Qb(65,"a",28),u.Xb("click",(function(){return t.showPage1Options=!0})),u.Jc(66," Get page 1 "),u.Lb(67,"i",17),u.Pb(),u.Pb(),u.Qb(68,"div",29),u.Qb(69,"div",1),u.Qb(70,"div",2),u.Qb(71,"div",30),u.Qb(72,"h3"),u.Jc(73," How many Hours do you want to keep your ad on main page? "),u.Pb(),u.Pb(),u.Qb(74,"ul",31),u.Hc(75,Se,4,3,"ng-container",32),u.Qb(76,"li"),u.Qb(77,"div",33),u.Xb("click",(function(){return t.close_page1_selection()})),u.Qb(78,"a",22),u.Lb(79,"i",23),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(80,"div",34),u.Qb(81,"div",35),u.Qb(82,"div",30),u.Qb(83,"h3"),u.Jc(84," How many days do you want to keep your ad on main page? "),u.Pb(),u.Pb(),u.Qb(85,"div",36),u.Qb(86,"ul"),u.Lb(87,"span",37),u.Pb(),u.Qb(88,"ul"),u.Lb(89,"span",38),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(90,"div",39),u.Qb(91,"div",40),u.Qb(92,"ul"),u.Qb(93,"li"),u.Lb(94,"img",41),u.Jc(95," Bumps "),u.Qb(96,"label",42),u.Jc(97,"New 2 bumps package"),u.Pb(),u.Pb(),u.Qb(98,"li"),u.Jc(99," From "),u.Qb(100,"span"),u.Jc(101,"$ 2"),u.Pb(),u.Jc(102," / Bump "),u.Pb(),u.Pb(),u.Pb(),u.Qb(103,"div",43),u.Qb(104,"p"),u.Qb(105,"strong"),u.Jc(106,"Do you want to be able to Bump your ad to the top with one click any time you like?"),u.Pb(),u.Jc(107," When you click Bump, your ad will instantly be posted to the top. "),u.Pb(),u.Qb(108,"a",44),u.Xb("click",(function(){return t.showBumpsOptions=!0})),u.Jc(109," Let me bumps "),u.Lb(110,"i",17),u.Pb(),u.Pb(),u.Qb(111,"div",45),u.Qb(112,"div",1),u.Qb(113,"div",2),u.Qb(114,"div",30),u.Qb(115,"h3"),u.Jc(116," How many Bumps do you want? "),u.Qb(117,"span"),u.Jc(118,"(select one)"),u.Pb(),u.Pb(),u.Pb(),u.Qb(119,"ul",46),u.Hc(120,$e,5,4,"li",32),u.Qb(121,"li"),u.Qb(122,"div",33),u.Xb("click",(function(){return t.close_bumps_selection()})),u.Qb(123,"a",22),u.Lb(124,"i",23),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(125,"div",47),u.Qb(126,"p"),u.Lb(127,"i",48),u.Jc(128," 2 Bump Package, limited time offer "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(129,"div",49),u.Qb(130,"div",50),u.Qb(131,"h5"),u.Jc(132," Price listed are in CAD $ "),u.Pb(),u.Qb(133,"p"),u.Jc(134," MyIssues charges will Services on your Acc. Need help with payments? "),u.Qb(135,"a",51),u.Jc(136,"Contact Us"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(137,"div",52),u.Qb(138,"div",53),u.Qb(139,"ul"),u.Qb(140,"li"),u.Qb(141,"h4"),u.Jc(142," Advertisement "),u.Qb(143,"span"),u.Jc(144," $ Free"),u.Pb(),u.Pb(),u.Qb(145,"p"),u.Jc(146," Panhandlers / Greater toronto $ "),u.Lb(147,"span",54),u.Lb(148,"input",55),u.Pb(),u.Pb(),u.Pb(),u.Hc(149,je,8,3,"ul",56),u.Hc(150,Fe,8,2,"ul",56),u.Lb(151,"span",57),u.Lb(152,"span",58),u.Lb(153,"span",59),u.Qb(154,"ul"),u.Qb(155,"li"),u.Qb(156,"h4"),u.Jc(157," Transaction fee "),u.Qb(158,"span"),u.Jc(159," $1.00"),u.Pb(),u.Pb(),u.Qb(160,"p"),u.Jc(161," You pay in if the total is less than $ 50.00 "),u.Pb(),u.Pb(),u.Pb(),u.Qb(162,"ul"),u.Qb(163,"li"),u.Qb(164,"h4"),u.Jc(165," Gift card "),u.Qb(166,"span"),u.Jc(167," - $1.00"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(168,"ul",60),u.Qb(169,"li"),u.Qb(170,"h4"),u.Jc(171," Grand Total "),u.Qb(172,"span",61),u.Jc(173),u.Pb(),u.Lb(174,"input",62),u.Lb(175,"input",63),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(176,"div",64),u.Qb(177,"ul"),u.Qb(178,"li"),u.Qb(179,"button",65),u.Xb("click",(function(){return t.prevPage()})),u.Lb(180,"i",66),u.Jc(181," Previous step "),u.Pb(),u.Pb(),u.Qb(182,"li"),u.Qb(183,"button",67),u.Xb("click",(function(){return t.nextPage("/sponsor/")})),u.Jc(184," Save & Exit "),u.Pb(),u.Pb(),u.Qb(185,"li"),u.Qb(186,"button",68),u.Xb("click",(function(){return t.nextPage()})),u.Jc(187," Next step "),u.Lb(188,"i",17),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Lb(189,"a",69,70),u.Qb(191,"div",71),u.Qb(192,"div",72),u.Qb(193,"div",73),u.Qb(194,"div",74),u.Qb(195,"h3",75),u.Jc(196,"Payment Options"),u.Pb(),u.Qb(197,"button",76,77),u.Xb("click",(function(){return t.close_modal()})),u.Qb(199,"span",78),u.Jc(200,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(201,"div",79),u.Qb(202,"div",80),u.Qb(203,"div",1),u.Qb(204,"div",81),u.Qb(205,"form"),u.Qb(206,"h3"),u.Qb(207,"small"),u.Jc(208,"Pay using card or account balance."),u.Pb(),u.Pb(),u.Qb(209,"button",82),u.Xb("click",(function(){return t.showConfirm=!0})),u.Qb(210,"h4"),u.Lb(211,"i",83),u.Qb(212,"small"),u.Jc(213),u.Pb(),u.Pb(),u.Pb(),u.Qb(214,"button",84),u.Xb("click",(function(){return t.buyBumps()})),u.Qb(215,"h4"),u.Lb(216,"i",85),u.Qb(217,"small"),u.Jc(218,"Pay With Card"),u.Pb(),u.Pb(),u.Pb(),u.Hc(219,Te,7,2,"div",86),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Lb(220,"a",87,88),u.Qb(222,"div",89),u.Qb(223,"div",72),u.Qb(224,"div",73),u.Qb(225,"div",74),u.Qb(226,"h3",75),u.Jc(227,"Payment Status"),u.Pb(),u.Qb(228,"button",90,77),u.Qb(230,"span",78),u.Jc(231,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(232,"div",79),u.Qb(233,"div",80),u.Qb(234,"div",1),u.Qb(235,"div",81),u.Qb(236,"form"),u.Qb(237,"h2",91),u.Qb(238,"small"),u.Jc(239,"Bumps Purchased"),u.Pb(),u.Pb(),u.Qb(240,"table",92),u.Qb(241,"tr"),u.Qb(242,"td",93),u.Jc(243,"Transaction Id"),u.Pb(),u.Qb(244,"td"),u.Jc(245),u.Pb(),u.Pb(),u.Qb(246,"tr"),u.Qb(247,"td",93),u.Jc(248,"Bumps Count"),u.Pb(),u.Qb(249,"td"),u.Jc(250),u.Pb(),u.Pb(),u.Qb(251,"tr"),u.Qb(252,"td",93),u.Jc(253,"Bump Price"),u.Pb(),u.Qb(254,"td"),u.Jc(255),u.Pb(),u.Pb(),u.Qb(256,"tr"),u.Qb(257,"td",93),u.Jc(258,"Date"),u.Pb(),u.Qb(259,"td"),u.Jc(260),u.cc(261,"date"),u.Pb(),u.Pb(),u.Qb(262,"tr"),u.Lb(263,"td"),u.Lb(264,"td"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.yb(7),u.jc("src",(null==t.ad||null==t.ad.identityImages?null:t.ad.identityImages.length)>0?u.dc(8,28,t.ad.identityImages[0]):"assets/images/home-pic.jpg",u.Cc),u.yb(4),u.Lc(" Hello ",t.ad.adTitle," "),u.yb(2),u.Mc(" Start date ",u.ec(14,30,t.ad.createdOn,"medium")," - ",t.ad.categoryName+"-"+t.ad.city," "),u.yb(21),u.Gc("display",t.showMainPageOptions?"none":"block"),u.yb(8),u.Gc("display",t.showMainPageOptions?"block":"none"),u.yb(2),u.ic("ngForOf",null==t.adPlans[0]?null:t.adPlans[0].categories),u.yb(16),u.Gc("display",t.showPage1Options?"none":"block"),u.yb(8),u.Gc("display",t.showPage1Options?"block":"none"),u.yb(7),u.ic("ngForOf",null==t.adPlans[1]?null:t.adPlans[1].categories),u.yb(28),u.Gc("display",t.showBumpsOptions?"none":"block"),u.yb(8),u.Gc("display",t.showBumpsOptions?"block":"none"),u.yb(9),u.ic("ngForOf",t.bumps),u.yb(29),u.ic("ngIf",(null==t.plan?null:t.plan.planName)&&0==(null==t.plan?null:t.plan.paid)),u.yb(1),u.ic("ngIf",null==t.selectedBump?null:t.selectedBump.count),u.yb(23),u.Lc(" $ ",((null==t.plan?null:t.plan.price)||0)+((null==t.selectedBump?null:t.selectedBump.price)||0)+1," "),u.yb(40),u.Lc("Current Balance: $",t.balance.toFixed(2),""),u.yb(6),u.ic("ngIf",t.showConfirm),u.yb(26),u.Kc(t.transactionDetails.transactionId),u.yb(5),u.Kc(t.transactionDetails.count),u.yb(5),u.Kc(t.transactionDetails.price),u.yb(5),u.Kc(u.ec(261,33,t.transactionDetails.date,"medium")))},directives:[P.A,P.o,P.p,c.m,c.n],pipes:[y.a,c.d],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.center[_ngcontent-%COMP%]{display:block;margin:0 auto;width:auto}.btn-purple[_ngcontent-%COMP%]{background:#b367c9;font-size:20px;font-weight:900;color:#fff;padding:10px 30px}.deck[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#737574;font-size:20px;font-weight:700;border:1px solid #e3e3e3;border-top:5px solid #e3e3e3;padding:40px 10px;border-radius:5px;min-height:140px;width:auto}.deck[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{color:#615f5f}.deck-link[_ngcontent-%COMP%]{text-decoration:none;outline:none}.active[_ngcontent-%COMP%], .deck[_ngcontent-%COMP%]:hover{border-top-width:1px;border-color:#58a788;border-bottom:5px solid #58a788;color:#58a788}.card-body.hide[_ngcontent-%COMP%]{display:none}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}@media screen and (max-width:600px){.upgrade-card[_ngcontent-%COMP%]{width:95%!important}}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.upgrades-invoice-sticky[_ngcontent-%COMP%]{width:16.4%}.delivery-form[_ngcontent-%COMP%]{position:relative}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-29px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-10px}#remove3[_ngcontent-%COMP%], #removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%]{position:absolute;left:-18px;height:40px;width:40px;background:#fff;color:#424242;border-radius:50%;text-align:center;padding-top:8px;font-size:20px;border:none;box-shadow:-1px 0 0 0 rgba(0,0,0,.2)}#removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #remove3[_ngcontent-%COMP%]{left:-22px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #removed[_ngcontent-%COMP%]{left:-21px}.btn-page[_ngcontent-%COMP%], .upgrade-black-header[_ngcontent-%COMP%]{background-color:#4d493c}.btn-bumps-des[_ngcontent-%COMP%], .upgrade-blue-header[_ngcontent-%COMP%]{background-color:#59a8ea}']}),Re);function Xe(e,t){if(1&e&&(u.Qb(0,"div",5),u.Qb(1,"ul"),u.Qb(2,"li"),u.Qb(3,"span"),u.Jc(4),u.Pb(),u.Jc(5),u.Pb(),u.Qb(6,"li"),u.Jc(7),u.Pb(),u.Pb(),u.Pb()),2&e){var n=u.bc();u.yb(4),u.Kc(null==n.adPlan?null:n.adPlan.adPlanName),u.yb(1),u.Lc(" ",n.adPlan.inDays?n.adPlan.days+" Day":n.adPlan.hours+" Hour"," "),u.yb(2),u.Lc(" $ ",n.adPlan.advertisePrice," ")}}function De(e,t){if(1&e&&(u.Qb(0,"div",5),u.Qb(1,"ul"),u.Qb(2,"li"),u.Qb(3,"span"),u.Jc(4,"Bump Up Plan"),u.Pb(),u.Jc(5),u.Pb(),u.Qb(6,"li"),u.Jc(7),u.Pb(),u.Pb(),u.Pb()),2&e){var n=u.bc();u.yb(5),u.Lc(" ",n.bumpupPlan.count||0," Bump "),u.yb(2),u.Lc(" $ ",n.bumpupPlan.price," ")}}var He,Ue,Ke,Ve,qe,Ye=((Ke=function(){function e(t,a,i,o,s){n(this,e),this.router=t,this.ar=a,this.ps=i,this.loader=o,this.ss=s,this.submitting=!1,this.adPlan=null,this.bumpupPlan=null,this.unsub$=new l.a,this.total=0}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.ps.newPage(7),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){var n,a,i;e.ad=t,e.ad._id||(alert("ad is not initialized"),e.router.navigate(["/sponsor/post/select-category"])),e.ad.advertisePlanCheck&&0==(null===(n=e.ad.advertisePlan)||void 0===n?void 0:n.paid)&&(e.adPlan=e.ad.advertisePlan),e.ad.bumpupPlanCheck&&(e.bumpupPlan=e.ad.bumpupPlan),e.total=((null===(a=e.adPlan)||void 0===a?void 0:a.advertisePrice)||0)+((null===(i=e.bumpupPlan)||void 0===i?void 0:i.price)||0),e.total>0&&(e.total+=1)})),this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"nextPage",value:function(){var e=this;this.ad.advertisePlanCheck||this.ad.bumpupPlanCheck?this.handle_upgrade():"published"==this.ad.adState?setTimeout((function(){e.router.navigate(["/sponsor/post/edited"])}),100):this.publish()}},{key:"publish",value:function(){var e=this;this.load(),this.ps.publish_normal(this.ad._id).pipe(Object(b.a)(this.unsub$)).subscribe((function(t){t.status?(e.stopload(),e.router.navigate(["/sponsor/post/complete/"+e.ad._id])):(e.stopload(),alert(t.message))}),this.errorHandle.bind(this))}},{key:"handle_upgrade",value:function(){this.router.navigate(["/sponsor/post/pay-via-card"])}},{key:"prevPage",value:function(){this.router.navigate(["/sponsor/post/upgrades"])}},{key:"errorHandle",value:function(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",e.status+":"+(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.stopload()}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){this.unsub$.next(),this.unsub$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Ke)(u.Kb(r.f),u.Kb(r.a),u.Kb(p.a),u.Kb(f.a),u.Kb(m.a))},Ke.\u0275cmp=u.Eb({type:Ke,selectors:[["app-finalize"]],decls:68,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","ad-sub-cat"],[1,"cat-list"],[1,"ad-sub-list"],["class","ad-sub-list",4,"ngIf"],[1,"border-0"],[1,"col-lg-6"],[1,"price-sec"],[3,"click"],[1,"fa","fa-angle-left"],[1,"price-btn","text-right"],[1,"understand-sec","finalize-sec"],[1,"agree-head"],["href","#"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"form"),u.Qb(4,"div",3),u.Qb(5,"div",4),u.Qb(6,"div",5),u.Qb(7,"ul"),u.Qb(8,"li"),u.Qb(9,"span"),u.Jc(10,"Advertisement"),u.Pb(),u.Jc(11," Panhandlers / greater toronto area "),u.Pb(),u.Qb(12,"li"),u.Jc(13," $00.00 "),u.Pb(),u.Pb(),u.Pb(),u.Hc(14,Xe,8,3,"div",6),u.Hc(15,De,8,2,"div",6),u.Qb(16,"div",5),u.Qb(17,"ul"),u.Qb(18,"li"),u.Qb(19,"span"),u.Jc(20,"Transactions fee"),u.Pb(),u.Jc(21," You pay it if the total is less than $50.00 "),u.Pb(),u.Qb(22,"li"),u.Jc(23," $00.00 "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(24,"div",3),u.Qb(25,"div",4),u.Qb(26,"div",5),u.Qb(27,"ul"),u.Qb(28,"li"),u.Qb(29,"span"),u.Jc(30,"Sub Total"),u.Pb(),u.Pb(),u.Qb(31,"li"),u.Jc(32," $00.00 "),u.Pb(),u.Pb(),u.Pb(),u.Qb(33,"div",5),u.Qb(34,"ul"),u.Qb(35,"li"),u.Qb(36,"span"),u.Jc(37,"Account Balance"),u.Pb(),u.Pb(),u.Qb(38,"li"),u.Jc(39),u.Pb(),u.Pb(),u.Pb(),u.Qb(40,"div",5),u.Qb(41,"ul",7),u.Qb(42,"li"),u.Qb(43,"span"),u.Jc(44,"Grand Total to Pay"),u.Pb(),u.Pb(),u.Qb(45,"li"),u.Jc(46),u.Pb(),u.Pb(),u.Pb(),u.Qb(47,"div",1),u.Qb(48,"div",8),u.Qb(49,"div",9),u.Qb(50,"a",10),u.Xb("click",(function(){return t.prevPage()})),u.Lb(51,"i",11),u.Pb(),u.Jc(52," All price are listed in "),u.Qb(53,"span"),u.Jc(54,"CAD"),u.Pb(),u.Pb(),u.Pb(),u.Qb(55,"div",8),u.Qb(56,"div",12),u.Qb(57,"a",10),u.Xb("click",(function(){return t.nextPage()})),u.Jc(58," Post Now "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(59,"div",13),u.Qb(60,"div",0),u.Qb(61,"div",14),u.Qb(62,"h5"),u.Jc(63," Prices listed are in CAD "),u.Pb(),u.Qb(64,"p"),u.Jc(65," MyIssues charges wil read MyIssues services on your statement. Need help with payments?"),u.Qb(66,"a",15),u.Jc(67,"Contact Us"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.Cb("submitting",t.submitting),u.yb(14),u.ic("ngIf",null==t.adPlan?null:t.adPlan.adPlanId),u.yb(1),u.ic("ngIf",t.ad.bumpupPlanCheck),u.yb(24),u.Lc(" $",t.session.balance?t.session.balance.toFixed(2):"0.00"," "),u.yb(7),u.Lc(" $ ",t.total," "))},directives:[P.A,P.o,P.p,c.n],styles:['.fixcolor[_ngcontent-%COMP%]{color:#737574}.card-footer[_ngcontent-%COMP%]{padding:.75rem 2rem!important}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}']}),Ke),Ge=((Ue=function(){function e(t,a,i){n(this,e),this.ss=t,this.ar=a,this.router=i}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.adId=this.ar.snapshot.paramMap.get("adId"),this.ss.getUserSessionObservable().subscribe((function(t){e.email=t.email}))}},{key:"goToAd",value:function(){this.router.navigate(["/ads/full"],{queryParams:{ad:this.adId}})}},{key:"upgrade_plan",value:function(e){e.preventDefault(),this.router.navigate(["/sponsor/bumps/purchase-bumps"])}}]),e}()).\u0275fac=function(e){return new(e||Ue)(u.Kb(m.a),u.Kb(r.a),u.Kb(r.f))},Ue.\u0275cmp=u.Eb({type:Ue,selectors:[["app-complete"]],decls:18,vars:1,consts:[[1,"ad-post"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"ad-post-des"],["src","assets/images/ad-upgrade.png","alt","Images"],["href","#",3,"click"],[1,"view-ad"],[1,"btn","btn-viewmore",3,"click"]],template:function(e,t){1&e&&(u.Qb(0,"section",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"div",3),u.Qb(4,"div",4),u.Lb(5,"img",5),u.Qb(6,"p"),u.Jc(7," Please note that it might take up 24 hours until you see your Ad in the search results and "),u.Qb(8,"b"),u.Jc(9,"Ad center."),u.Pb(),u.Jc(10),u.Pb(),u.Qb(11,"p"),u.Jc(12," No more bumps left, but you can "),u.Qb(13,"a",6),u.Xb("click",(function(e){return t.upgrade_plan(e)})),u.Jc(14,"buy more"),u.Pb(),u.Pb(),u.Qb(15,"div",7),u.Qb(16,"a",8),u.Xb("click",(function(){return t.goToAd()})),u.Jc(17,"View your new ad"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.yb(10),u.Lc(" We've sent an email to ",t.email," with a summary of your order. "))},styles:[""]}),Ue),Ze=((He=function(){function e(t,a,i){n(this,e),this.adService=t,this.ds=a,this.router=i}return i(e,[{key:"canActivate",value:function(e,t){var n,a,i=this,o=null===(n=this.adService._currentAd)||void 0===n?void 0:n._id,s=!!(null===(a=e.data)||void 0===a?void 0:a.isStartStep);return console.log(o),!!s||(o?this.validateRoute.apply(this,[e]):(console.log("hello"),setTimeout((function(){i.router.navigate(["/sponsor/post/select-category"])}),5),!1))}},{key:"validateRoute",value:function(e){var t=this,n=this.lastCompletedStep(),a=e.data.moveToStep;if(console.log(n),console.log(a),1==a)return setTimeout((function(){t.router.navigate(["/sponsor/post/select-category"])}),5),!1;if(5==a&&n>=4.3)return!0;if(6==a&&n>=5){if("draft"==this.adService._currentAd.adState)return!0}else if(n>=a-1)return!0;return!1}},{key:"lastCompletedStep",value:function(){var e,t=null===(e=this.adService._currentAd)||void 0===e?void 0:e.completedSteps;console.log(t);var n={1:1,2:2,3:3,5:5,6:6,"4Images":4.1,"4Video":4.2,"4BRP":4.3},a=0;for(var i in t)t[i]&&n[i]>a&&(a=n[i]);return a>4&&a<5&&(t["4Images"]&&t["4Video"]&&t["4BRP"]||(a=3)),a}}]),e}()).\u0275fac=function(e){return new(e||He)(u.Ub(p.a),u.Ub(x.a),u.Ub(r.f))},He.\u0275prov=u.Gb({token:He,factory:He.\u0275fac,providedIn:"root"}),He),We=[{path:"",component:h,children:[{path:"",redirectTo:"select-category",pathMatch:"full"},{path:"select-category",canActivate:[Ze],data:{moveToStep:1,isStartStep:!0},component:k},{path:"select-location",canActivate:[Ze],data:{moveToStep:2},component:z},{path:"ad-content",canActivate:[Ze],data:{moveToStep:3},component:U},{path:"upload-images",canActivate:[Ze],data:{moveToStep:4},component:ie},{path:"user-details",canActivate:[Ze],data:{moveToStep:5},component:Ae},{path:"upgrades",canActivate:[Ze],data:{moveToStep:6},component:Ee},{path:"finalize",canActivate:[Ze],data:{moveToStep:7},component:Ye},{path:"pay-via-card",loadChildren:function(){return o.e(85).then(o.bind(null,"XKZH")).then((function(e){return e.CardPaymentModule}))}}]},{path:"complete/:adId",component:Ge},{path:"add",loadChildren:function(){return o.e(87).then(o.bind(null,"+6Q8")).then((function(e){return e.SponsorPostAddModule}))}}],et=((Ve=function e(){n(this,e)}).\u0275mod=u.Ib({type:Ve}),Ve.\u0275inj=u.Hb({factory:function(e){return new(e||Ve)},imports:[[r.j.forChild(We)],r.j]}),Ve),tt=o("FMpt"),nt=o("jIHw"),at=o("7kUa"),it=o("dPl2"),ot=o("eO1q"),st=o("qxW0"),ct=((qe=function e(){n(this,e)}).\u0275mod=u.Ib({type:qe}),qe.\u0275inj=u.Hb({factory:function(e){return new(e||qe)},imports:[[c.b,et,r.j,g.b,tt.a,N.b,nt.c,oe.b,P.j,at.b,B.b,it.c,se.b,ot.b,st.a,v.b]]}),qe)}}])}();