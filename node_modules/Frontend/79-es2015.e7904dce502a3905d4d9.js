(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{Pr6m:function(e,t,n){"use strict";n.r(t),n.d(t,"FoodbankContactDetailsModule",(function(){return N}));var o=n("ofXK"),i=n("tyNb"),r=n("fXoL");let a=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-foodbank-contact-details"]],decls:1,vars:0,template:function(e,t){1&e&&r.Lb(0,"router-outlet")},directives:[i.k],styles:[""]}),e})();var s=n("3Pt+"),b=n("XNiG"),l=n("1G5W"),d=n("E+NS"),c=n("ndxW"),u=n("5dVO");const p=["next"];let m=(()=>{class e{constructor(e,t,n,o,i,r){this.ps=e,this.ss=t,this.router=n,this.fb=o,this.ar=i,this.loader=r,this.step1Form=this.fb.group({eligibilityCriteria:["",s.y.compose([s.y.required,s.y.pattern(/^(Yes|No)$/i)])],firstVisitToFoodbank:[""],firstName:["",s.y.compose([s.y.required,s.y.pattern(/^[a-zA-Z]+ *$/)])],lastName:["",s.y.compose([s.y.required,s.y.pattern(/^[a-zA-Z]+ *$/)])],dob:[null,s.y.required],gender:["male",s.y.required],maritalStatus:["single",s.y.required],contactInfo:this.fb.group({address:["",s.y.required],city:["",s.y.required],postalCode:["",s.y.compose([s.y.required,s.y.pattern(/^[a-zA-Z0-9 ]{6,8}$/)])],housingType:["Own home",s.y.required],phone:["",s.y.compose([s.y.required,s.y.pattern(/^\+?[0-9]{10,13}$/)])],email:["",s.y.compose([s.y.required,s.y.email])],specialInstruction:["",s.y.maxLength(50)],languageSpoken:["",s.y.compose([s.y.required,s.y.pattern(/^[a-zA-Z, ]+$/)])],deliveryPreference:["Deliver to My Home (between 10:00 AM to 7:00 PM)",s.y.required]})}),this.isModified=!1,this.submitting=!1,this.unsub$=new b.a}ngOnInit(){this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_values()}),this.ss.getUserSessionObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.session=e})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{var t,n;"save-next"==e?null===(n=null===(t=this.submitButtonRef)||void 0===t?void 0:t.nativeElement)||void 0===n||n.click():"prev"==e?this.prevPage():this.nextNoSave()})}preset_input_values(){const{eligibilityCriteria:e,firstVisitToFoodbank:t,firstName:n,lastName:o,dob:i,gender:r,maritalStatus:a,contactInfo:s}=this.ad,b={eligibilityCriteria:e,firstVisitToFoodbank:t,firstName:n,lastName:o,dob:i,gender:r,maritalStatus:a,contactInfo:s},l=b.contactInfo.languageSpoken;l instanceof Array&&(b.contactInfo.languageSpoken=null==l?void 0:l.join(", "));const d=JSON.parse(JSON.stringify(b));this.step1Form.patchValue(d),this.contactInfoGroup.city.value||(this.contactInfoGroup.city.value=this.ad.city)}save(e){this.load();const t=this.step1Form.value;t.contactInfo.languageSpoken=this.step1Form.value.contactInfo.languageSpoken.split(/, */),this.ps.save_contact_details_step1(this.ad._id,t).subscribe(t=>{this.stopload(),t.status?(this.ps.newMessage("success","Ad was updated",t.message),this.ps.NewAdData(t.data),this.router.navigate([e],{relativeTo:this.ar})):this.ps.newMessage("error","Ad not updated",t.message)},this.handle_error.bind(this))}prevPage(){this.router.navigate(["../../steps/ad-content"],{relativeTo:this.ar})}nextPage(e="../step2"){if("INVALID"==this.step1Form.status)return this.ps.newMessage("error","Invalid Form Data","Please fill the form correctly");this.save(e)}nextNoSave(){this.router.navigate(["../step2"],{relativeTo:this.ar})}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}get firstNameInput(){return this.step1Form.controls.firstName}get lastNameInput(){return this.step1Form.controls.lastName}get eligibilityCriteriaInput(){return this.step1Form.controls.eligibilityCriteria}get dobInput(){return this.step1Form.controls.dob}get maritalStatusInput(){return this.step1Form.controls.maritalStatus}get genderInput(){return this.step1Form.controls.gender}get firstVisitToFoodbankInput(){return this.step1Form.controls.firstVisitToFoodbank}get contactInfoGroup(){return this.step1Form.controls.contactInfo.controls}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(c.a),r.Kb(i.f),r.Kb(s.d),r.Kb(i.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-step1"]],viewQuery:function(e,t){var n;1&e&&r.Qc(p,!0),2&e&&r.vc(n=r.Yb())&&(t.submitButtonRef=n.first)},features:[r.xb([s.d])],decls:332,vars:37,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[3,"formGroup","ngSubmit"],["step1FormRef","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"text-center","var-sub-head"],[1,"form-head"],[1,"form-input"],[1,"del-label"],[1,"form-group"],["name","eligibilityCriteria","type","text","formControlName","eligibilityCriteria","placeholder","Yes/No",1,"form-control","capitalize"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["name","firstVisitToFoodbank","type","text","formControlName","firstVisitToFoodbank",1,"form-control"],[1,"errors"],["name","lastName","type","text","formControlName","lastName",1,"form-control"],["name","firstName","type","text","formControlName","firstName",1,"form-control"],["name","dob","type","date","formControlName","dob",1,"form-control"],[1,"col-lg-4"],[1,"city-checkbx-list"],[1,"city-radio"],["name","gender","type","radio","value","female","checked","checked","formControlName","gender"],[1,"checkmark"],["name","gender","type","radio","value","male","formControlName","gender"],["name","gender","type","radio","value","transgender","formControlName","gender"],["name","gender","type","radio","value","other","formControlName","gender"],["name","gender","type","radio","value","undisclosed","formControlName","gender"],["name","maritalStatus","type","radio","value","single","checked","checked","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","married","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","common-law","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","divorced","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","separated","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","widowed","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","undisclosed","formControlName","maritalStatus"],["formGroupName","contactInfo",1,"form-contact"],[1,"form-subnote"],["name","address","type","text","formControlName","address",1,"form-control"],["name","city","type","text","formControlName","city",1,"form-control"],["name","postalCode","type","text","formControlName","postalCode",1,"form-control"],[1,"col-lg-6"],["name","housingType","type","radio","value","Own home","checked","checked","formControlName","housingType"],["name","housingType","type","radio","value","Private rental","formControlName","housingType"],["name","housingType","type","radio","value","Emergency shelter","formControlName","housingType"],["name","housingType","type","radio","value","Band owned (reserve lands)","formControlName","housingType"],["name","housingType","type","radio","formControlName","housingType"],["name","housingType","type","radio","value","Group home/youth shelter","formControlName","housingType"],["name","housingType","type","radio","value","Staying with family/friends","formControlName","housingType"],["name","housingType","type","radio","value","On the street","formControlName","housingType"],["name","housingType","type","radio","value","Social rental housing (subsidized housing provided through Peel Living)","formControlName","housingType"],["name","housingType","type","radio","value","other","formControlName","housingType"],["name","phone","type","text","formControlName","phone",1,"form-control"],["name","email","type","email","formControlName","email",1,"form-control"],["name","specialInstruction","type","text","formControlName","specialInstruction",1,"form-control"],["name","languageSpoken","type","text","formControlName","languageSpoken",1,"form-control"],["name","deliveryPreference","type","radio","value","Deliver to My Home (between 10:00 AM to 7:00 PM)","checked","checked","formControlName","deliveryPreference"],["name","deliveryPreference","type","radio","value","Nearest Pick up Location to me (between 9:30 AM to 4:30 PM)","formControlName","deliveryPreference"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../../steps/ad-details",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e&&(r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form",3,4),r.Xb("ngSubmit",(function(){return t.nextPage()})),r.Qb(5,"div",5),r.Qb(6,"div",6),r.Qb(7,"div",2),r.Qb(8,"div",7),r.Qb(9,"h4",8),r.Jc(10," Any information provided below is used by myissues to serve your best needs. "),r.Pb(),r.Qb(11,"h3",9),r.Jc(12," Food Bank Client Application "),r.Pb(),r.Qb(13,"div",10),r.Qb(14,"label",11),r.Jc(15," Please let us know your reason for applying to this program, you may refer to the "),r.Pb(),r.Qb(16,"div",12),r.Qb(17,"label",11),r.Jc(18," eligibility criteria listed above "),r.Qb(19,"span"),r.Jc(20,"*"),r.Pb(),r.Pb(),r.Lb(21,"input",13),r.Qb(22,"div",14),r.Qb(23,"div",15),r.Jc(24,"Field can't be empty"),r.Pb(),r.Qb(25,"div",15),r.Jc(26,"Please enter either Yes or No"),r.Pb(),r.Pb(),r.Pb(),r.Qb(27,"div",12),r.Qb(28,"label",11),r.Jc(29," If applicable, please give us an estimation of when you first visited a food bank "),r.Pb(),r.Lb(30,"input",16),r.Qb(31,"p"),r.Jc(32,"This applies to any food bank in any city or country"),r.Pb(),r.Qb(33,"div",17),r.Qb(34,"div",15),r.Jc(35,"Field can't be empty"),r.Pb(),r.Pb(),r.Pb(),r.Qb(36,"div",12),r.Qb(37,"label",11),r.Jc(38," Last name "),r.Qb(39,"span"),r.Jc(40,"*"),r.Pb(),r.Pb(),r.Lb(41,"input",18),r.Qb(42,"div",14),r.Qb(43,"div",15),r.Jc(44,"Field can't be empty"),r.Pb(),r.Qb(45,"div",15),r.Jc(46,"Please enter valid value(only alphabets)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(47,"div",12),r.Qb(48,"label",11),r.Jc(49," First name "),r.Qb(50,"span"),r.Jc(51,"*"),r.Pb(),r.Pb(),r.Lb(52,"input",19),r.Qb(53,"div",14),r.Qb(54,"div",15),r.Jc(55,"Field can't be empty"),r.Pb(),r.Qb(56,"div",15),r.Jc(57,"Please enter valid value(only alphabets)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(58,"div",12),r.Qb(59,"label",11),r.Jc(60," Date of birth "),r.Qb(61,"span"),r.Jc(62,"*"),r.Pb(),r.Pb(),r.Lb(63,"input",20),r.Qb(64,"div",17),r.Qb(65,"div",15),r.Jc(66,"Field can't be empty"),r.Pb(),r.Pb(),r.Pb(),r.Qb(67,"div",12),r.Qb(68,"label",11),r.Jc(69," Gender "),r.Qb(70,"span"),r.Jc(71,"*"),r.Pb(),r.Pb(),r.Qb(72,"div",2),r.Qb(73,"div",21),r.Qb(74,"div",22),r.Qb(75,"label",23),r.Jc(76," Female "),r.Lb(77,"input",24),r.Lb(78,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(79,"div",21),r.Qb(80,"div",22),r.Qb(81,"label",23),r.Jc(82," Male "),r.Lb(83,"input",26),r.Lb(84,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(85,"div",21),r.Qb(86,"div",22),r.Qb(87,"label",23),r.Jc(88," Transgender "),r.Lb(89,"input",27),r.Lb(90,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(91,"div",21),r.Qb(92,"div",22),r.Qb(93,"label",23),r.Jc(94," Other "),r.Lb(95,"input",28),r.Lb(96,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(97,"div",21),r.Qb(98,"div",22),r.Qb(99,"label",23),r.Jc(100," Undisclosed "),r.Lb(101,"input",29),r.Lb(102,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(103,"div",17),r.Qb(104,"div",15),r.Jc(105,"Please select one of the option"),r.Pb(),r.Pb(),r.Pb(),r.Qb(106,"div",12),r.Qb(107,"label",11),r.Jc(108," Marital State "),r.Qb(109,"span"),r.Jc(110,"*"),r.Pb(),r.Pb(),r.Qb(111,"div",2),r.Qb(112,"div",21),r.Qb(113,"div",22),r.Qb(114,"label",23),r.Jc(115," Single "),r.Lb(116,"input",30),r.Lb(117,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(118,"div",21),r.Qb(119,"div",22),r.Qb(120,"label",23),r.Jc(121," Married "),r.Lb(122,"input",31),r.Lb(123,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(124,"div",21),r.Qb(125,"div",22),r.Qb(126,"label",23),r.Jc(127," Common-law "),r.Lb(128,"input",32),r.Lb(129,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(130,"div",21),r.Qb(131,"div",22),r.Qb(132,"label",23),r.Jc(133," Divorced "),r.Lb(134,"input",33),r.Lb(135,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(136,"div",21),r.Qb(137,"div",22),r.Qb(138,"label",23),r.Jc(139," Separated "),r.Lb(140,"input",34),r.Lb(141,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(142,"div",21),r.Qb(143,"div",22),r.Qb(144,"label",23),r.Jc(145," Widowed "),r.Lb(146,"input",35),r.Lb(147,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(148,"div",21),r.Qb(149,"div",22),r.Qb(150,"label",23),r.Jc(151," Undisclosed "),r.Lb(152,"input",36),r.Lb(153,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(154,"div",17),r.Qb(155,"div",15),r.Jc(156,"Please select one of the options"),r.Pb(),r.Pb(),r.Pb(),r.Qb(157,"fieldset",37),r.Qb(158,"legend"),r.Jc(159,"Contact information"),r.Pb(),r.Qb(160,"p",38),r.Jc(161,"You must reside in Mississauga to access this program."),r.Pb(),r.Qb(162,"div",12),r.Qb(163,"label",11),r.Jc(164," Address "),r.Qb(165,"span"),r.Jc(166,"*"),r.Pb(),r.Pb(),r.Lb(167,"input",39),r.Qb(168,"div",17),r.Qb(169,"div",15),r.Jc(170,"Field can't be empty"),r.Pb(),r.Pb(),r.Pb(),r.Qb(171,"div",12),r.Qb(172,"label",11),r.Jc(173," City "),r.Qb(174,"span"),r.Jc(175,"*"),r.Pb(),r.Pb(),r.Lb(176,"input",40),r.Qb(177,"div",14),r.Qb(178,"div",15),r.Jc(179,"Field can't be empty"),r.Pb(),r.Qb(180,"div",15),r.Jc(181,"Please enter valid value(only alphabets)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(182,"div",12),r.Qb(183,"label",11),r.Jc(184," Postal Code "),r.Qb(185,"span"),r.Jc(186,"*"),r.Pb(),r.Pb(),r.Lb(187,"input",41),r.Qb(188,"div",14),r.Qb(189,"div",15),r.Jc(190,"Field can't be empty"),r.Pb(),r.Qb(191,"div",15),r.Jc(192,"Please enter valid value(only alphanumeric values 6 characters long)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(193,"div",12),r.Qb(194,"label",11),r.Jc(195," Housing type "),r.Pb(),r.Qb(196,"div",2),r.Qb(197,"div",42),r.Qb(198,"div",22),r.Qb(199,"label",23),r.Jc(200," Own home "),r.Lb(201,"input",43),r.Lb(202,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(203,"div",42),r.Qb(204,"div",22),r.Qb(205,"label",23),r.Jc(206," Private rental "),r.Lb(207,"input",44),r.Lb(208,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(209,"div",42),r.Qb(210,"div",22),r.Qb(211,"label",23),r.Jc(212," Emergency shelter "),r.Lb(213,"input",45),r.Lb(214,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(215,"div",42),r.Qb(216,"div",22),r.Qb(217,"label",23),r.Jc(218," Band owned (reserve lands) "),r.Lb(219,"input",46),r.Lb(220,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(221,"div",42),r.Qb(222,"div",22),r.Qb(223,"label",23),r.Jc(224," Rooming house (multi-tenant house) "),r.Lb(225,"input",47),r.Lb(226,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(227,"div",42),r.Qb(228,"div",22),r.Qb(229,"label",23),r.Jc(230," Group home/youth shelter "),r.Lb(231,"input",48),r.Lb(232,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(233,"div",42),r.Qb(234,"div",22),r.Qb(235,"label",23),r.Jc(236," Staying with family/friends "),r.Lb(237,"input",49),r.Lb(238,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(239,"div",42),r.Qb(240,"div",22),r.Qb(241,"label",23),r.Jc(242," On the street "),r.Lb(243,"input",50),r.Lb(244,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(245,"div",42),r.Qb(246,"div",22),r.Qb(247,"label",23),r.Jc(248," Social rental housing (subsidized housing provided through Peel Living) "),r.Lb(249,"input",51),r.Lb(250,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(251,"div",42),r.Qb(252,"div",22),r.Qb(253,"label",23),r.Jc(254," Other "),r.Lb(255,"input",52),r.Lb(256,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(257,"div",17),r.Qb(258,"div",15),r.Jc(259,"Please select one of the options"),r.Pb(),r.Pb(),r.Pb(),r.Qb(260,"div",12),r.Qb(261,"label",11),r.Jc(262," Phone number "),r.Qb(263,"span"),r.Jc(264,"*"),r.Pb(),r.Pb(),r.Lb(265,"input",53),r.Qb(266,"div",14),r.Qb(267,"div",15),r.Jc(268,"Field can't be empty"),r.Pb(),r.Qb(269,"div",15),r.Jc(270,"Please enter valid value"),r.Pb(),r.Pb(),r.Pb(),r.Qb(271,"div",12),r.Qb(272,"label",11),r.Jc(273," Email address "),r.Pb(),r.Lb(274,"input",54),r.Qb(275,"div",14),r.Qb(276,"div",15),r.Jc(277,"Field can't be empty"),r.Pb(),r.Qb(278,"div",15),r.Jc(279,"Please enter valid value"),r.Pb(),r.Pb(),r.Pb(),r.Qb(280,"div",12),r.Qb(281,"label",11),r.Jc(282," Please provide any special instructions to reach your home, such as your buzzer number or parking instructions. "),r.Pb(),r.Lb(283,"input",55),r.Qb(284,"div",14),r.Qb(285,"div",15),r.Jc(286,"Field can't be empty"),r.Pb(),r.Qb(287,"div",15),r.Jc(288,"Please enter valid value"),r.Pb(),r.Pb(),r.Pb(),r.Qb(289,"div",12),r.Qb(290,"label",11),r.Jc(291," Language(s) spoken "),r.Qb(292,"span"),r.Jc(293,"*"),r.Pb(),r.Pb(),r.Lb(294,"input",56),r.Qb(295,"p"),r.Jc(296,"Please list all language(s) that you speak proficiently (use comma(,) seperated words) "),r.Pb(),r.Qb(297,"div",14),r.Qb(298,"div",15),r.Jc(299,"Field can't be empty"),r.Pb(),r.Qb(300,"div",15),r.Jc(301,"Please enter valid value"),r.Pb(),r.Pb(),r.Pb(),r.Qb(302,"div",12),r.Qb(303,"label",11),r.Jc(304," How would you prefer to receive a weekly delivery from us? "),r.Pb(),r.Qb(305,"div",2),r.Qb(306,"div",42),r.Qb(307,"div",22),r.Qb(308,"label",23),r.Jc(309," Deliver to My Home (between 10:00 AM to 7:00 PM) "),r.Lb(310,"input",57),r.Lb(311,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Qb(312,"div",42),r.Qb(313,"div",22),r.Qb(314,"label",23),r.Jc(315," Nearest Pick up Location to me (between 9:30 AM to 4:30 PM) "),r.Lb(316,"input",58),r.Lb(317,"span",25),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(318,"div",17),r.Qb(319,"div",15),r.Jc(320,"Please select one of the options"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(321,"div",59),r.Qb(322,"ul"),r.Qb(323,"li"),r.Qb(324,"button",60),r.Lb(325,"i",61),r.Jc(326," Previous step "),r.Pb(),r.Pb(),r.Qb(327,"li"),r.Qb(328,"button",62,63),r.Jc(330," Next step "),r.Lb(331,"i",64),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.wc(4);r.yb(3),r.ic("formGroup",t.step1Form),r.yb(3),r.Cb("submitting",t.submitting),r.yb(16),r.ic("hidden",!(e.submitted&&t.eligibilityCriteriaInput.errors)),r.yb(1),r.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.pattern)),r.yb(9),r.ic("hidden",!(e.submitted&&null!=t.firstVisitToFoodbankInput.errors&&t.firstVisitToFoodbankInput.errors.required)),r.yb(8),r.ic("hidden",!(e.submitted&&t.lastNameInput.errors)),r.yb(1),r.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.pattern)),r.yb(8),r.ic("hidden",!(e.submitted&&t.firstNameInput.errors)),r.yb(1),r.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.pattern)),r.yb(9),r.ic("hidden",!(e.submitted&&null!=t.dobInput.errors&&t.dobInput.errors.required)),r.yb(39),r.ic("hidden",!(e.submitted&&null!=t.genderInput.errors&&t.genderInput.errors.required)),r.yb(51),r.ic("hidden",!(e.submitted&&null!=t.maritalStatusInput.errors&&t.maritalStatusInput.errors.required)),r.yb(14),r.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.address.errors&&t.contactInfoGroup.address.errors.required)),r.yb(8),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.city.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.pattern)),r.yb(8),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.postalCode.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.pattern)),r.yb(67),r.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.housingType.errors&&t.contactInfoGroup.housingType.errors.required)),r.yb(8),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.phone.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.pattern)),r.yb(6),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.email.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.email)),r.yb(6),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.specialInstruction.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.pattern)),r.yb(10),r.ic("hidden",!(e.submitted&&t.contactInfoGroup.languageSpoken.errors)),r.yb(1),r.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.pattern)),r.yb(19),r.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.deliveryPreference.errors&&t.contactInfoGroup.deliveryPreference.errors.required))}},directives:[s.A,s.o,s.h,s.c,s.n,s.f,s.u,s.i,i.g],styles:[""]}),e})();const h=["next"];let v=(()=>{class e{constructor(e,t,n,o,i){this.ps=e,this.ss=t,this.router=n,this.ar=o,this.loader=i,this.submitting=!1,this.unsub$=new b.a,this.init_form_data()}ngOnInit(){this.ps.AdObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_values()}),this.ss.getUserSessionObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.session=e})}ngAfterViewInit(){this.buttonEventFromParent()}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{var t,n;"save-next"==e?null===(n=null===(t=this.submitButtonRef)||void 0===t?void 0:t.nativeElement)||void 0===n||n.click():"prev"==e?this.prevPage():this.nextNoSave()})}preset_input_values(){this.householdMembers=Object.assign(Object.assign({},this.householdMembers),this.ad.householdMembers),this.education=Object.assign(Object.assign({},this.education),this.ad.education),this.fill_empty_options_and_selectors()}fill_empty_options_and_selectors(){for(let e in this.householdMembers)this.householdMembers[e]=this.householdMembers[e]||"";this.education.level=this.education.level||"grade 0-8"}save(){this.load(),this.ps.save_contact_details_step2(this.ad._id,{householdMembers:this.householdMembers,education:this.education}).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../step3"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}nextPage(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.save()}nextNoSave(){this.router.navigate(["../step3"],{relativeTo:this.ar})}prevPage(){this.router.navigate(["../step1"],{relativeTo:this.ar})}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}init_form_data(){this.householdMembers={numChildren:null,numAdults:null,numSeniors:null},this.education={level:"grade 0-8",country:null}}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(c.a),r.Kb(i.f),r.Kb(i.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-step2"]],viewQuery:function(e,t){var n;1&e&&r.Qc(h,!0),2&e&&r.vc(n=r.Yb())&&(t.submitButtonRef=n.first)},decls:152,vars:19,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[3,"ngSubmit"],["step2Form","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"select-wrap"],["name","numChildren","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["name","numAdults","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["name","numSeniors","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["valueu","3"],[1,"col-lg-6"],[1,"city-checkbx-list"],[1,"city-radio"],["type","radio","name","level","value","grade 0-8","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"checkmark"],["type","radio","name","level","value","grade 9-11","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","grade 12","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","post secondary (some)","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","trade certificate/professional accreditation","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","college diploma","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","university degree","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Phd","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Undisclosed","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error",3,"hidden"],[1,"col-sm-12"],["type","text","name","country","pattern","^[a-zA-Z]+ *$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["countryInput","ngModel"],[1,"errors",3,"hidden"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step1",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form",3,4),r.Xb("ngSubmit",(function(){r.zc(e);const n=r.wc(4);return t.nextPage(n)})),r.Qb(5,"div",5),r.Qb(6,"div",6),r.Qb(7,"div",2),r.Qb(8,"div",7),r.Qb(9,"div",8),r.Qb(10,"fieldset",9),r.Qb(11,"legend"),r.Jc(12,"Household members"),r.Pb(),r.Qb(13,"p",10),r.Jc(14,"Please list the number of household member(s), if any, reside in your household."),r.Pb(),r.Qb(15,"div",11),r.Qb(16,"label",12),r.Jc(17," Number of children or youth (0-17 years) "),r.Pb(),r.Qb(18,"div",13),r.Qb(19,"select",14),r.Xb("ngModelChange",(function(e){return t.householdMembers.numChildren=e})),r.Qb(20,"option",15),r.Jc(21,"Select Option..."),r.Pb(),r.Qb(22,"option",16),r.Jc(23,"0"),r.Pb(),r.Qb(24,"option",17),r.Jc(25,"1"),r.Pb(),r.Qb(26,"option",18),r.Jc(27,"2"),r.Pb(),r.Qb(28,"option",19),r.Jc(29,"3"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(30,"div",11),r.Qb(31,"label",12),r.Jc(32," Number of adults (18-64 years) "),r.Pb(),r.Qb(33,"div",13),r.Qb(34,"select",20),r.Xb("ngModelChange",(function(e){return t.householdMembers.numAdults=e})),r.Qb(35,"option",15),r.Jc(36,"Select Option..."),r.Pb(),r.Qb(37,"option",16),r.Jc(38,"0"),r.Pb(),r.Qb(39,"option",17),r.Jc(40,"1"),r.Pb(),r.Qb(41,"option",18),r.Jc(42,"2"),r.Pb(),r.Qb(43,"option",19),r.Jc(44,"3"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(45,"div",11),r.Qb(46,"label",12),r.Jc(47," Number of seniors (65+ years) "),r.Pb(),r.Qb(48,"div",13),r.Qb(49,"select",21),r.Xb("ngModelChange",(function(e){return t.householdMembers.numSeniors=e})),r.Qb(50,"option",15),r.Jc(51,"Select Option..."),r.Pb(),r.Qb(52,"option",16),r.Jc(53,"0"),r.Pb(),r.Qb(54,"option",17),r.Jc(55,"1"),r.Pb(),r.Qb(56,"option",18),r.Jc(57,"2"),r.Pb(),r.Qb(58,"option",22),r.Jc(59,"3"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(60,"fieldset",9),r.Qb(61,"legend"),r.Jc(62,"Education"),r.Pb(),r.Qb(63,"p",10),r.Jc(64," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),r.Pb(),r.Qb(65,"div",11),r.Qb(66,"label",12),r.Jc(67," What is the highest level of education that you have completed? "),r.Qb(68,"span"),r.Jc(69,"*"),r.Pb(),r.Pb(),r.Qb(70,"div",2),r.Qb(71,"div",23),r.Qb(72,"div",24),r.Qb(73,"label",25),r.Jc(74," Grade 0-8 "),r.Qb(75,"input",26),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(76,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(77,"div",23),r.Qb(78,"div",24),r.Qb(79,"label",25),r.Jc(80," Grade 9-11 "),r.Qb(81,"input",28),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(82,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(83,"div",23),r.Qb(84,"div",24),r.Qb(85,"label",25),r.Jc(86," Grade 12 "),r.Qb(87,"input",29),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(88,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(89,"div",23),r.Qb(90,"div",24),r.Qb(91,"label",25),r.Jc(92," Post secondary (some) "),r.Qb(93,"input",30),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(94,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(95,"div",23),r.Qb(96,"div",24),r.Qb(97,"label",25),r.Jc(98," Trade certificate/professional accreditation "),r.Qb(99,"input",31),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(100,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(101,"div",23),r.Qb(102,"div",24),r.Qb(103,"label",25),r.Jc(104," College diploma "),r.Qb(105,"input",32),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(106,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(107,"div",23),r.Qb(108,"div",24),r.Qb(109,"label",25),r.Jc(110," University degree "),r.Qb(111,"input",33),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(112,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(113,"div",23),r.Qb(114,"div",24),r.Qb(115,"label",25),r.Jc(116," PhD "),r.Qb(117,"input",34),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(118,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(119,"div",23),r.Qb(120,"div",24),r.Qb(121,"label",25),r.Jc(122," Undisclosed "),r.Qb(123,"input",35),r.Xb("ngModelChange",(function(e){return t.education.level=e})),r.Pb(),r.Lb(124,"span",27),r.Pb(),r.Pb(),r.Pb(),r.Qb(125,"div",36),r.Qb(126,"span",37),r.Jc(127,"Please select one of the options"),r.Pb(),r.Pb(),r.Qb(128,"div",38),r.Qb(129,"div",11),r.Qb(130,"label",12),r.Jc(131," Please tell us which country you completed your highest level of education in? "),r.Qb(132,"span"),r.Jc(133,"*"),r.Pb(),r.Pb(),r.Qb(134,"input",39,40),r.Xb("ngModelChange",(function(e){return t.education.country=e})),r.Pb(),r.Qb(136,"div",41),r.Qb(137,"span",37),r.Jc(138,"Field can't be empty"),r.Pb(),r.Qb(139,"span",37),r.Jc(140,"Invalid field value (only alphabets)"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(141,"div",42),r.Qb(142,"ul"),r.Qb(143,"li"),r.Qb(144,"button",43),r.Lb(145,"i",44),r.Jc(146," Previous step "),r.Pb(),r.Pb(),r.Qb(147,"li"),r.Qb(148,"button",45,46),r.Jc(150," Next step "),r.Lb(151,"i",47),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.wc(4),n=r.wc(135);r.yb(6),r.Cb("submitting",t.submitting),r.yb(13),r.ic("ngModel",t.householdMembers.numChildren),r.yb(15),r.ic("ngModel",t.householdMembers.numAdults),r.yb(15),r.ic("ngModel",t.householdMembers.numSeniors),r.yb(26),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(6),r.ic("ngModel",t.education.level),r.yb(3),r.ic("hidden",!(e.submitted&&!t.education.level)),r.yb(8),r.ic("ngModel",t.education.country),r.yb(2),r.ic("hidden",!e.submitted),r.yb(1),r.ic("hidden",!(null!=n.errors&&n.errors.required)),r.yb(2),r.ic("hidden",!(null!=n.errors&&n.errors.pattern))}},directives:[s.A,s.o,s.p,s.x,s.n,s.q,s.r,s.z,s.u,s.c,s.w,s.t,i.g],styles:[""]}),e})();const P=["next"];function g(e,t){if(1&e){const e=r.Rb();r.Ob(0),r.Qb(1,"div",27),r.Qb(2,"label",28),r.Jc(3),r.Qb(4,"input",29),r.Xb("ngModelChange",(function(n){return r.zc(e),t.$implicit.checked=n})),r.Pb(),r.Lb(5,"span",30),r.Pb(),r.Pb(),r.Nb()}if(2&e){const e=t.$implicit;r.yb(3),r.Lc(" ",e.name," "),r.yb(1),r.kc("name","source_",e.name,""),r.ic("ngModel",e.checked)}}let y=(()=>{class e{constructor(e,t,n,o,i){this.ps=e,this.ss=t,this.router=n,this.ar=o,this.loader=i,this.submitting=!1,this.unsub$=new b.a,this.init_form_data()}ngOnInit(){this.ps.AdObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_data()}),this.ss.getUserSessionObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.session=e})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{var t,n;"save-next"==e?null===(n=null===(t=this.submitButtonRef)||void 0===t?void 0:t.nativeElement)||void 0===n||n.click():"prev"==e?this.prevPage():this.nextNoSave()})}ngAfterViewInit(){this.buttonEventFromParent()}preset_input_data(){this.componentForm=Object.assign(Object.assign({},this.componentForm),this.ad.monthlyIncome),this.componentForm.sources instanceof Array||(this.componentForm.sources=[]),this.componentForm.sources.length>0&&(this.sources[0].checked=!1),this.componentForm.sources.map(e=>{let t=this.sources.find(t=>t.name==e.name);t&&(t.checked=!0)})}save(){this.load();const e=this.prepare_form_data();this.ps.save_contact_details_step3(this.ad._id,e).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../step4"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}prepare_form_data(){const e=this.sources.filter(e=>e.checked);return Object.assign(Object.assign({},this.componentForm),{sources:e})}nextPage(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_source_combination()||this.save()}nextNoSave(){this.router.navigate(["../step4"],{relativeTo:this.ar})}prevPage(){this.router.navigate(["../step3"],{relativeTo:this.ar})}wrong_source_combination(){let e=!1;this.sources[0].checked&&(e=!0);let t=this.sources.find(e=>"no income"!=e.name.toLowerCase()&&e.checked);return e||t?!(!e||!t||(this.ps.newMessage("error","Invalid Form Details","Wrong Source Combination"),0)):(this.ps.newMessage("error","Invalid Form Details","Please select one or more income source"),!0)}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}init_form_data(){this.componentForm={sources:[],estimatedMonthlyIncome:null,monthlyHouseholdExpenses:null},this.sources=[{_id:null,name:"No income",checked:!0},{_id:null,name:"Ontario Disability Support Program (ODSP)",checked:!1},{_id:null,name:"Ontario Works (OW)",checked:!1},{_id:null,name:"Old Age Security (OAS)",checked:!1},{_id:null,name:"Canada Pension Plan (CCP)",checked:!1},{_id:null,name:"Pensions",checked:!1},{_id:null,name:"Employment Insurance (EI)",checked:!1},{_id:null,name:"Workplace Safety & Insurance Board (WSIB)",checked:!1},{_id:null,name:"Spouse/Family support",checked:!1},{_id:null,name:"Employed: Full time",checked:!1},{_id:null,name:"Employed: Part-time",checked:!1},{_id:null,name:"Child support",checked:!1},{_id:null,name:"Child tax benefit",checked:!1},{_id:null,name:"Scholarship",checked:!1},{_id:null,name:"Student loans",checked:!1},{_id:null,name:"Universal Child Benefit",checked:!1},{_id:null,name:"Other",checked:!1}]}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(c.a),r.Kb(i.f),r.Kb(i.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-step3"]],viewQuery:function(e,t){var n;1&e&&r.Qc(P,!0),2&e&&r.vc(n=r.Yb())&&(t.submitButtonRef=n.first)},decls:60,vars:9,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[1,"col-12","px-0",3,"ngSubmit"],["step3Form","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","estimatedMonthlyIncome","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["estimatedMonthlyIncome","ngModel"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["type","text","name","monthlyHouseholdExpenses","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["monthlyHouseholdExpenses","ngModel"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step2",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox","ngModel","",3,"name","ngModel","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form",3,4),r.Xb("ngSubmit",(function(){r.zc(e);const n=r.wc(4);return t.nextPage(n)})),r.Qb(5,"div",5),r.Qb(6,"div",6),r.Qb(7,"div",2),r.Qb(8,"div",7),r.Qb(9,"div",8),r.Qb(10,"fieldset",9),r.Qb(11,"legend"),r.Jc(12,"Monthly income"),r.Pb(),r.Qb(13,"p",10),r.Jc(14," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),r.Pb(),r.Qb(15,"div",11),r.Qb(16,"label",12),r.Jc(17," Please select all sources of your monthly income "),r.Qb(18,"span"),r.Jc(19,"*"),r.Pb(),r.Pb(),r.Qb(20,"div",2),r.Qb(21,"div",13),r.Hc(22,g,6,3,"ng-container",14),r.Qb(23,"div",11),r.Qb(24,"label",12),r.Jc(25," Please provide an estimate of your total monthly income "),r.Qb(26,"span"),r.Jc(27,"*"),r.Pb(),r.Pb(),r.Qb(28,"input",15,16),r.Xb("ngModelChange",(function(e){return t.componentForm.estimatedMonthlyIncome=e})),r.Pb(),r.Qb(30,"div",17),r.Qb(31,"span",18),r.Jc(32,"Field can't be empty"),r.Pb(),r.Qb(33,"span",18),r.Jc(34,"Please enter valid input(only numbers)"),r.Pb(),r.Pb(),r.Pb(),r.Qb(35,"div",11),r.Qb(36,"label",12),r.Jc(37," Please provide an estimate of your total monthly household expenses "),r.Qb(38,"span"),r.Jc(39,"*"),r.Pb(),r.Pb(),r.Qb(40,"input",19,20),r.Xb("ngModelChange",(function(e){return t.componentForm.monthlyHouseholdExpenses=e})),r.Pb(),r.Qb(42,"p"),r.Jc(43," Such as rent/mortgage, utilities, phone, internet, vehicle, insurance, childcare, child support, debt payments, food, medical, personal, or transit expenses "),r.Pb(),r.Qb(44,"div",17),r.Qb(45,"span",18),r.Jc(46,"Field can't be empty"),r.Pb(),r.Qb(47,"span",18),r.Jc(48,"Please enter valid input(only numbers)"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(49,"div",21),r.Qb(50,"ul"),r.Qb(51,"li"),r.Qb(52,"button",22),r.Lb(53,"i",23),r.Jc(54," Previous step "),r.Pb(),r.Pb(),r.Qb(55,"li"),r.Qb(56,"button",24,25),r.Jc(58," Next step "),r.Lb(59,"i",26),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.wc(4),n=r.wc(29),o=r.wc(41);r.yb(22),r.ic("ngForOf",t.sources),r.yb(6),r.ic("ngModel",t.componentForm.estimatedMonthlyIncome),r.yb(2),r.ic("hidden",!e.submitted),r.yb(1),r.ic("hidden",!(null!=n.errors&&n.errors.required)),r.yb(2),r.ic("hidden",!(null!=n.errors&&n.errors.pattern)),r.yb(7),r.ic("ngModel",t.componentForm.monthlyHouseholdExpenses),r.yb(4),r.ic("hidden",!e.submitted),r.yb(1),r.ic("hidden",!(null!=o.errors&&o.errors.required)),r.yb(2),r.ic("hidden",!(null!=o.errors&&o.errors.pattern))}},directives:[s.A,s.o,s.p,o.m,s.c,s.t,s.w,s.n,s.q,i.g,s.a],styles:[""]}),e})();const f=["next"],Q=function(){return{standalone:!0}};function J(e,t){if(1&e){const e=r.Rb();r.Ob(0),r.Qb(1,"div",26),r.Qb(2,"label",27),r.Jc(3),r.Qb(4,"input",28),r.Xb("ngModelChange",(function(n){return r.zc(e),t.$implicit.checked=n})),r.Pb(),r.Lb(5,"span",29),r.Pb(),r.Pb(),r.Nb()}if(2&e){const e=t.$implicit;r.yb(3),r.Lc(" ",e.name," "),r.yb(1),r.jc("name",e.name),r.ic("ngModel",e.checked)("ngModelOptions",r.mc(4,Q))}}let M=(()=>{class e{constructor(e,t,n,o,i,r){this.ps=e,this.ss=t,this.fb=n,this.router=o,this.ar=i,this.loader=r,this.componentForm=this.fb.group({additionalDietaryInfo:["",s.y.required],fullname:["",s.y.compose([s.y.required,s.y.pattern(/^[a-z ]+$/i)])],phone:["",s.y.compose([s.y.required,s.y.pattern(/^\+?[0-9]{10,13}$/)])]}),this.submitting=!1,this.unsub$=new b.a,this.init_form_data()}ngOnInit(){this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_data()}),this.ss.getUserSessionObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.session=e})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{var t,n;"save-next"==e?null===(n=null===(t=this.submitButtonRef)||void 0===t?void 0:t.nativeElement)||void 0===n||n.click():"prev"==e?this.prevPage():this.nextNoSave()})}preset_input_data(){var e;const{dietaryConsideration:t}=this.ad;let n=null;t instanceof Object&&(n=Object.assign({},t)),this.componentForm.patchValue(n||{});let o=null===(e=this.ad.dietaryConsideration)||void 0===e?void 0:e.needs;o instanceof Array||(o=[]),o.length>0&&(this.needs[0].checked=!1),o.map(e=>{let t=this.needs.find(t=>t.name==e.name);t&&(t.checked=!0)})}save(){this.load();const e=this.prepare_form_data();this.ps.save_contact_details_step4(this.ad._id,e).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../../steps/photos"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}prepare_form_data(){const e=this.needs.filter(e=>e.checked),{fullname:t,additionalDietaryInfo:n,phone:o}=this.componentForm.value;return{fullname:t,additionalDietaryInfo:n,phone:o,needs:e}}nextPage(){if("INVALID"==this.componentForm.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_need_combination()||this.save()}nextNoSave(){this.router.navigate(["../../steps/photos"],{relativeTo:this.ar})}prevPage(){this.router.navigate(["../step3"],{relativeTo:this.ar})}wrong_need_combination(){return!this.needs.find(e=>e.checked)&&(this.ps.newMessage("error","Invalid Form Details","Please select one or more income need"),!0)}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}init_form_data(){this.needs=[{_id:null,name:"Diabetic",checked:!0},{_id:null,name:"Fish only",checked:!1},{_id:null,name:"Halal",checked:!1},{_id:null,name:"Kosher",checked:!1},{_id:null,name:"Milk allergy",checked:!1},{_id:null,name:"No pork",checked:!1},{_id:null,name:"Peanut allergy",checked:!1},{_id:null,name:"Egg allergy",checked:!1},{_id:null,name:"Pregnant",checked:!1},{_id:null,name:"Sesame allergy",checked:!1},{_id:null,name:"Vegan",checked:!1},{_id:null,name:"Vegetarian",checked:!1},{_id:null,name:"Wheat allergy",checked:!1},{_id:null,name:"Other",checked:!1}]}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a),r.Kb(c.a),r.Kb(s.d),r.Kb(i.f),r.Kb(i.a),r.Kb(u.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-step4"]],viewQuery:function(e,t){var n;1&e&&r.Qc(f,!0),2&e&&r.vc(n=r.Yb())&&(t.submitButtonRef=n.first)},features:[r.xb([s.d])],decls:65,vars:9,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[1,"col-12","px-0",3,"formGroup","ngSubmit"],["step4FormRef","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","additionalDietaryInfo","formControlName","additionalDietaryInfo",1,"form-control"],[1,"errors"],[1,"error",3,"hidden"],["type","text","name","fullname","placeholder","firstname lastname","formControlName","fullname",1,"form-control"],[1,"errors",3,"hidden"],["type","text","name","phone","placeholder","9999999999","formControlName","phone",1,"form-control"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step3",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e&&(r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form",3,4),r.Xb("ngSubmit",(function(){return t.nextPage()})),r.Qb(5,"div",5),r.Qb(6,"div",6),r.Qb(7,"div",2),r.Qb(8,"div",7),r.Qb(9,"div",8),r.Qb(10,"fieldset",9),r.Qb(11,"legend"),r.Jc(12,"Dietary considerations"),r.Pb(),r.Qb(13,"div",10),r.Qb(14,"label",11),r.Jc(15," What, if any, dietary needs do you have? "),r.Pb(),r.Qb(16,"div",2),r.Qb(17,"div",12),r.Hc(18,J,6,5,"ng-container",13),r.Qb(19,"div",10),r.Qb(20,"label",11),r.Jc(21," Please provide any additional dietary information "),r.Qb(22,"span"),r.Jc(23,"*"),r.Pb(),r.Pb(),r.Lb(24,"input",14),r.Qb(25,"div",15),r.Qb(26,"span",16),r.Jc(27," Field can't be left empty. "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(28,"fieldset",9),r.Qb(29,"legend"),r.Jc(30,"Dietary considerations"),r.Pb(),r.Qb(31,"div",10),r.Qb(32,"label",11),r.Jc(33," What, if any, dietary needs do you have? "),r.Pb(),r.Qb(34,"div",2),r.Qb(35,"div",12),r.Qb(36,"div",10),r.Qb(37,"label",11),r.Jc(38," Full name "),r.Pb(),r.Lb(39,"input",17),r.Qb(40,"div",18),r.Qb(41,"span",16),r.Jc(42," Field can't be left empty "),r.Pb(),r.Qb(43,"span",16),r.Jc(44," Invalid field value (only alphabets) "),r.Pb(),r.Pb(),r.Pb(),r.Qb(45,"div",10),r.Qb(46,"label",11),r.Jc(47," Phone number "),r.Pb(),r.Lb(48,"input",19),r.Qb(49,"div",18),r.Qb(50,"span",16),r.Jc(51," Field can't be left empty "),r.Pb(),r.Qb(52,"span",16),r.Jc(53," Invalid field value (only numbers) "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(54,"div",20),r.Qb(55,"ul"),r.Qb(56,"li"),r.Qb(57,"button",21),r.Lb(58,"i",22),r.Jc(59," Previous step "),r.Pb(),r.Pb(),r.Qb(60,"li"),r.Qb(61,"button",23,24),r.Jc(63," Next Step "),r.Lb(64,"i",25),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.wc(4);r.yb(3),r.ic("formGroup",t.componentForm),r.yb(15),r.ic("ngForOf",t.needs),r.yb(8),r.ic("hidden",!(e.submitted&&null!=t.componentForm.controls.additionalDietaryInfo.errors&&t.componentForm.controls.additionalDietaryInfo.errors.required)),r.yb(14),r.ic("hidden",!e.submitted),r.yb(1),r.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.pattern)),r.yb(6),r.ic("hidden",!e.submitted),r.yb(1),r.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.required)),r.yb(2),r.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.pattern))}},directives:[s.A,s.o,s.h,o.m,s.c,s.n,s.f,i.g,s.a,s.q],styles:[""]}),e})();var I=n("RYz/");const k=[{path:"",component:a,children:[{path:"",redirectTo:"step1",pathMatch:"full"},{path:"step1",canActivate:[I.a],component:m,data:{moveToStep:4}},{path:"step2",canActivate:[I.a],component:v,data:{moveToStep:5}},{path:"step3",canActivate:[I.a],component:y,data:{moveToStep:6}},{path:"step4",canActivate:[I.a],component:M,data:{moveToStep:7}}]}];let C=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.j.forChild(k)],i.j]}),e})();var _=n("qxW0"),F=n("Gxio"),L=n("FMpt");let N=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[o.b,C,s.j,s.v,_.a,F.b,L.a]]}),e})()}}]);