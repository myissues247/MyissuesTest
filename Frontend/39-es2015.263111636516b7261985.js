(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1G5W":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("zx2A");function i(e){return t=>t.lift(new r(e))}class r{constructor(e){this.notifier=e}call(e,t){const n=new s(e),i=Object(o.c)(this.notifier,new o.a(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class s extends o.b{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},FpPG:function(e,t,n){"use strict";n.r(t),n.d(t,"FoodbankContactDetailsModule",(function(){return J}));var o=n("ofXK"),i=n("tyNb"),r=n("7zfz"),s=n("XNiG"),a=n("1G5W"),b=n("fXoL"),l=n("E+NS"),d=n("Gxio");let c=(()=>{class e{constructor(e,t){this.ms=e,this.ps=t,this.unsub$=new s.a}ngOnInit(){this.ps.messageObserver().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{this.ms.add(e)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(r.h),b.Kb(l.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-foodbank-contact-details"]],features:[b.xb([r.h])],decls:2,vars:0,template:function(e,t){1&e&&(b.Lb(0,"p-toast"),b.Lb(1,"router-outlet"))},directives:[d.a,i.k],styles:[""]}),e})();var u=n("3Pt+"),p=n("ndxW"),m=n("5dVO");function h(e,t){if(1&e){const e=b.Rb();b.Ob(0),b.Qb(1,"div",32),b.Qb(2,"label",33),b.Jc(3),b.Qb(4,"input",34),b.Xb("ngModelChange",(function(n){return b.zc(e),t.$implicit.checked=n})),b.Pb(),b.Lb(5,"span",35),b.Pb(),b.Pb(),b.Nb()}if(2&e){const e=t.$implicit;b.yb(3),b.Lc(" ",e.name," "),b.yb(1),b.kc("name","source_",e.name,""),b.ic("ngModel",e.checked)}}const P=function(){return{standalone:!0}};function g(e,t){if(1&e){const e=b.Rb();b.Ob(0),b.Qb(1,"div",31),b.Qb(2,"label",32),b.Jc(3),b.Qb(4,"input",33),b.Xb("ngModelChange",(function(n){return b.zc(e),t.$implicit.checked=n})),b.Pb(),b.Lb(5,"span",34),b.Pb(),b.Pb(),b.Nb()}if(2&e){const e=t.$implicit;b.yb(3),b.Lc(" ",e.name," "),b.yb(1),b.jc("name",e.name),b.ic("ngModel",e.checked)("ngModelOptions",b.mc(4,P))}}const v=[{path:"",component:c,children:[{path:"step1",component:(()=>{class e{constructor(e,t,n,o,i,r){this.ps=e,this.ss=t,this.router=n,this.fb=o,this.ar=i,this.loader=r,this.step1Form=this.fb.group({eligibilityCriteria:["",u.y.compose([u.y.required,u.y.pattern(/^(Yes|No)$/i)])],firstVisitToFoodbank:[""],firstName:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z]+ *$/)])],lastName:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z]+ *$/)])],dob:[null,u.y.required],gender:["male",u.y.required],maritalStatus:["single",u.y.required],contactInfo:this.fb.group({address:["",u.y.required],city:["",u.y.required],postalCode:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z0-9 ]{6,8}$/)])],housingType:["Own home",u.y.required],phone:["",u.y.compose([u.y.required,u.y.pattern(/^\+?[0-9]{10,13}$/)])],email:["",u.y.compose([u.y.required,u.y.email])],specialInstruction:["",u.y.maxLength(50)],languageSpoken:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z, ]+$/)])],deliveryPreference:["Deliver to My Home (between 10:00 AM to 7:00 PM)",u.y.required]})}),this.isModified=!1,this.submitting=!1,this.unsub$=new s.a}ngOnInit(){this.ps.AdObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_values()}),this.ss.getUserSessionObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{this.session=e})}preset_input_values(){const{eligibilityCriteria:e,firstVisitToFoodbank:t,firstName:n,lastName:o,dob:i,gender:r,maritalStatus:s,contactInfo:a}=this.ad,b={eligibilityCriteria:e,firstVisitToFoodbank:t,firstName:n,lastName:o,dob:i,gender:r,maritalStatus:s,contactInfo:a},l=b.contactInfo.languageSpoken;l instanceof Array&&(b.contactInfo.languageSpoken=null==l?void 0:l.join(", "));const d=JSON.parse(JSON.stringify(b));this.step1Form.patchValue(d),this.contactInfoGroup.city.value||(this.contactInfoGroup.city.value=this.ad.city)}save(e){this.load();const t=this.step1Form.value;t.contactInfo.languageSpoken=this.step1Form.value.contactInfo.languageSpoken.split(/, */),this.ps.save_contact_details_step1(this.ad._id,t).subscribe(t=>{this.stopload(),t.status?(this.ps.newMessage("success","Ad was updated",t.message),this.ps.NewAdData(t.data),this.router.navigate([e],{relativeTo:this.ar})):this.ps.newMessage("error","Ad not updated",t.message)},this.handle_error.bind(this))}prevPage(){this.router.navigate(["../../steps/ad-details"],{relativeTo:this.ar})}nextPage(e="../step2"){if("INVALID"==this.step1Form.status)return this.ps.newMessage("error","Invalid Form Data","Please fill the form correctly");this.save(e)}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}get firstNameInput(){return this.step1Form.controls.firstName}get lastNameInput(){return this.step1Form.controls.lastName}get eligibilityCriteriaInput(){return this.step1Form.controls.eligibilityCriteria}get dobInput(){return this.step1Form.controls.dob}get maritalStatusInput(){return this.step1Form.controls.maritalStatus}get genderInput(){return this.step1Form.controls.gender}get firstVisitToFoodbankInput(){return this.step1Form.controls.firstVisitToFoodbank}get contactInfoGroup(){return this.step1Form.controls.contactInfo.controls}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(l.a),b.Kb(p.a),b.Kb(i.f),b.Kb(u.d),b.Kb(i.a),b.Kb(m.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-step1"]],features:[b.xb([u.d])],decls:353,vars:37,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[3,"formGroup","ngSubmit"],["step1FormRef","ngForm"],[1,"col-sm-12"],[1,"delivery-step-list"],[1,"active"],[1,"btn","btn-preview"],[1,"fa","fa-eye"],[1,"delivery-form"],[1,"col-lg-6","offset-lg-3"],[1,"text-center","var-sub-head"],[1,"form-head"],[1,"form-input"],[1,"del-label"],[1,"form-group"],["name","eligibilityCriteria","type","text","formControlName","eligibilityCriteria","placeholder","Yes/No",1,"form-control","capitalize"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["name","firstVisitToFoodbank","type","text","formControlName","firstVisitToFoodbank",1,"form-control"],[1,"errors"],["name","lastName","type","text","formControlName","lastName",1,"form-control"],["name","firstName","type","text","formControlName","firstName",1,"form-control"],["name","dob","type","date","formControlName","dob",1,"form-control"],[1,"col-lg-4"],[1,"city-checkbx-list"],[1,"city-radio"],["name","gender","type","radio","value","female","checked","checked","formControlName","gender"],[1,"checkmark"],["name","gender","type","radio","value","male","formControlName","gender"],["name","gender","type","radio","value","transgender","formControlName","gender"],["name","gender","type","radio","value","other","formControlName","gender"],["name","gender","type","radio","value","undisclosed","formControlName","gender"],["name","maritalStatus","type","radio","value","single","checked","checked","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","married","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","common-law","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","divorced","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","separated","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","widowed","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","undisclosed","formControlName","maritalStatus"],["formGroupName","contactInfo",1,"form-contact"],[1,"form-subnote"],["name","address","type","text","formControlName","address",1,"form-control"],["name","city","type","text","formControlName","city",1,"form-control"],["name","postalCode","type","text","formControlName","postalCode",1,"form-control"],[1,"col-lg-6"],["name","housingType","type","radio","value","Own home","checked","checked","formControlName","housingType"],["name","housingType","type","radio","value","Private rental","formControlName","housingType"],["name","housingType","type","radio","value","Emergency shelter","formControlName","housingType"],["name","housingType","type","radio","value","Band owned (reserve lands)","formControlName","housingType"],["name","housingType","type","radio","formControlName","housingType"],["name","housingType","type","radio","value","Group home/youth shelter","formControlName","housingType"],["name","housingType","type","radio","value","Staying with family/friends","formControlName","housingType"],["name","housingType","type","radio","value","On the street","formControlName","housingType"],["name","housingType","type","radio","value","Social rental housing (subsidized housing provided through Peel Living)","formControlName","housingType"],["name","housingType","type","radio","value","other","formControlName","housingType"],["name","phone","type","text","formControlName","phone",1,"form-control"],["name","email","type","email","formControlName","email",1,"form-control"],["name","specialInstruction","type","text","formControlName","specialInstruction",1,"form-control"],["name","languageSpoken","type","text","formControlName","languageSpoken",1,"form-control"],["name","deliveryPreference","type","radio","value","Deliver to My Home (between 10:00 AM to 7:00 PM)","checked","checked","formControlName","deliveryPreference"],["name","deliveryPreference","type","radio","value","Nearest Pick up Location to me (between 9:30 AM to 4:30 PM)","formControlName","deliveryPreference"],[1,"d-footer"],["type","button","routerLink","../../steps/ad-details",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e&&(b.Qb(0,"section",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"form",3,4),b.Xb("ngSubmit",(function(){return t.nextPage()})),b.Qb(5,"div",5),b.Qb(6,"div",6),b.Qb(7,"ul"),b.Qb(8,"li",7),b.Qb(9,"span"),b.Jc(10," 1 "),b.Pb(),b.Jc(11," Contact details "),b.Pb(),b.Qb(12,"li"),b.Qb(13,"span"),b.Jc(14," 2 "),b.Pb(),b.Jc(15," Household members & Educations "),b.Pb(),b.Qb(16,"li"),b.Qb(17,"span"),b.Jc(18," 3 "),b.Pb(),b.Jc(19," Monthly income "),b.Pb(),b.Qb(20,"li"),b.Qb(21,"span"),b.Jc(22," 4 "),b.Pb(),b.Jc(23," Dietary considerations "),b.Pb(),b.Qb(24,"li"),b.Qb(25,"button",8),b.Lb(26,"i",9),b.Jc(27," Preview Ad "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(28,"div",10),b.Qb(29,"div",2),b.Qb(30,"div",11),b.Qb(31,"h4",12),b.Jc(32," Any information provided below is used by myissues to serve your best needs. "),b.Pb(),b.Qb(33,"h3",13),b.Jc(34," Food Bank Client Application "),b.Pb(),b.Qb(35,"div",14),b.Qb(36,"label",15),b.Jc(37," Please let us know your reason for applying to this program, you may refer to the "),b.Pb(),b.Qb(38,"div",16),b.Qb(39,"label",15),b.Jc(40," eligibility criteria listed above "),b.Qb(41,"span"),b.Jc(42,"*"),b.Pb(),b.Pb(),b.Lb(43,"input",17),b.Qb(44,"div",18),b.Qb(45,"div",19),b.Jc(46,"Field can't be empty"),b.Pb(),b.Qb(47,"div",19),b.Jc(48,"Please enter either Yes or No"),b.Pb(),b.Pb(),b.Pb(),b.Qb(49,"div",16),b.Qb(50,"label",15),b.Jc(51," If applicable, please give us an estimation of when you first visited a food bank "),b.Pb(),b.Lb(52,"input",20),b.Qb(53,"p"),b.Jc(54,"This applies to any food bank in any city or country"),b.Pb(),b.Qb(55,"div",21),b.Qb(56,"div",19),b.Jc(57,"Field can't be empty"),b.Pb(),b.Pb(),b.Pb(),b.Qb(58,"div",16),b.Qb(59,"label",15),b.Jc(60," Last name "),b.Qb(61,"span"),b.Jc(62,"*"),b.Pb(),b.Pb(),b.Lb(63,"input",22),b.Qb(64,"div",18),b.Qb(65,"div",19),b.Jc(66,"Field can't be empty"),b.Pb(),b.Qb(67,"div",19),b.Jc(68,"Please enter valid value(only alphabets)"),b.Pb(),b.Pb(),b.Pb(),b.Qb(69,"div",16),b.Qb(70,"label",15),b.Jc(71," First name "),b.Qb(72,"span"),b.Jc(73,"*"),b.Pb(),b.Pb(),b.Lb(74,"input",23),b.Qb(75,"div",18),b.Qb(76,"div",19),b.Jc(77,"Field can't be empty"),b.Pb(),b.Qb(78,"div",19),b.Jc(79,"Please enter valid value(only alphabets)"),b.Pb(),b.Pb(),b.Pb(),b.Qb(80,"div",16),b.Qb(81,"label",15),b.Jc(82," Date of birth "),b.Qb(83,"span"),b.Jc(84,"*"),b.Pb(),b.Pb(),b.Lb(85,"input",24),b.Qb(86,"div",21),b.Qb(87,"div",19),b.Jc(88,"Field can't be empty"),b.Pb(),b.Pb(),b.Pb(),b.Qb(89,"div",16),b.Qb(90,"label",15),b.Jc(91," Gender "),b.Qb(92,"span"),b.Jc(93,"*"),b.Pb(),b.Pb(),b.Qb(94,"div",2),b.Qb(95,"div",25),b.Qb(96,"div",26),b.Qb(97,"label",27),b.Jc(98," Female "),b.Lb(99,"input",28),b.Lb(100,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(101,"div",25),b.Qb(102,"div",26),b.Qb(103,"label",27),b.Jc(104," Male "),b.Lb(105,"input",30),b.Lb(106,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(107,"div",25),b.Qb(108,"div",26),b.Qb(109,"label",27),b.Jc(110," Transgender "),b.Lb(111,"input",31),b.Lb(112,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(113,"div",25),b.Qb(114,"div",26),b.Qb(115,"label",27),b.Jc(116," Other "),b.Lb(117,"input",32),b.Lb(118,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(119,"div",25),b.Qb(120,"div",26),b.Qb(121,"label",27),b.Jc(122," Undisclosed "),b.Lb(123,"input",33),b.Lb(124,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(125,"div",21),b.Qb(126,"div",19),b.Jc(127,"Please select one of the option"),b.Pb(),b.Pb(),b.Pb(),b.Qb(128,"div",16),b.Qb(129,"label",15),b.Jc(130," Marital State "),b.Qb(131,"span"),b.Jc(132,"*"),b.Pb(),b.Pb(),b.Qb(133,"div",2),b.Qb(134,"div",25),b.Qb(135,"div",26),b.Qb(136,"label",27),b.Jc(137," Single "),b.Lb(138,"input",34),b.Lb(139,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(140,"div",25),b.Qb(141,"div",26),b.Qb(142,"label",27),b.Jc(143," Married "),b.Lb(144,"input",35),b.Lb(145,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(146,"div",25),b.Qb(147,"div",26),b.Qb(148,"label",27),b.Jc(149," Common-law "),b.Lb(150,"input",36),b.Lb(151,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(152,"div",25),b.Qb(153,"div",26),b.Qb(154,"label",27),b.Jc(155," Divorced "),b.Lb(156,"input",37),b.Lb(157,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(158,"div",25),b.Qb(159,"div",26),b.Qb(160,"label",27),b.Jc(161," Separated "),b.Lb(162,"input",38),b.Lb(163,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(164,"div",25),b.Qb(165,"div",26),b.Qb(166,"label",27),b.Jc(167," Widowed "),b.Lb(168,"input",39),b.Lb(169,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(170,"div",25),b.Qb(171,"div",26),b.Qb(172,"label",27),b.Jc(173," Undisclosed "),b.Lb(174,"input",40),b.Lb(175,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(176,"div",21),b.Qb(177,"div",19),b.Jc(178,"Please select one of the options"),b.Pb(),b.Pb(),b.Pb(),b.Qb(179,"fieldset",41),b.Qb(180,"legend"),b.Jc(181,"Contact information"),b.Pb(),b.Qb(182,"p",42),b.Jc(183,"You must reside in Mississauga to access this program."),b.Pb(),b.Qb(184,"div",16),b.Qb(185,"label",15),b.Jc(186," Address "),b.Qb(187,"span"),b.Jc(188,"*"),b.Pb(),b.Pb(),b.Lb(189,"input",43),b.Qb(190,"div",21),b.Qb(191,"div",19),b.Jc(192,"Field can't be empty"),b.Pb(),b.Pb(),b.Pb(),b.Qb(193,"div",16),b.Qb(194,"label",15),b.Jc(195," City "),b.Qb(196,"span"),b.Jc(197,"*"),b.Pb(),b.Pb(),b.Lb(198,"input",44),b.Qb(199,"div",18),b.Qb(200,"div",19),b.Jc(201,"Field can't be empty"),b.Pb(),b.Qb(202,"div",19),b.Jc(203,"Please enter valid value(only alphabets)"),b.Pb(),b.Pb(),b.Pb(),b.Qb(204,"div",16),b.Qb(205,"label",15),b.Jc(206," Postal Code "),b.Qb(207,"span"),b.Jc(208,"*"),b.Pb(),b.Pb(),b.Lb(209,"input",45),b.Qb(210,"div",18),b.Qb(211,"div",19),b.Jc(212,"Field can't be empty"),b.Pb(),b.Qb(213,"div",19),b.Jc(214,"Please enter valid value(only alphanumeric values 6 characters long)"),b.Pb(),b.Pb(),b.Pb(),b.Qb(215,"div",16),b.Qb(216,"label",15),b.Jc(217," Housing type "),b.Pb(),b.Qb(218,"div",2),b.Qb(219,"div",46),b.Qb(220,"div",26),b.Qb(221,"label",27),b.Jc(222," Own home "),b.Lb(223,"input",47),b.Lb(224,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(225,"div",46),b.Qb(226,"div",26),b.Qb(227,"label",27),b.Jc(228," Private rental "),b.Lb(229,"input",48),b.Lb(230,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(231,"div",46),b.Qb(232,"div",26),b.Qb(233,"label",27),b.Jc(234," Emergency shelter "),b.Lb(235,"input",49),b.Lb(236,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(237,"div",46),b.Qb(238,"div",26),b.Qb(239,"label",27),b.Jc(240," Band owned (reserve lands) "),b.Lb(241,"input",50),b.Lb(242,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(243,"div",46),b.Qb(244,"div",26),b.Qb(245,"label",27),b.Jc(246," Rooming house (multi-tenant house) "),b.Lb(247,"input",51),b.Lb(248,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(249,"div",46),b.Qb(250,"div",26),b.Qb(251,"label",27),b.Jc(252," Group home/youth shelter "),b.Lb(253,"input",52),b.Lb(254,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(255,"div",46),b.Qb(256,"div",26),b.Qb(257,"label",27),b.Jc(258," Staying with family/friends "),b.Lb(259,"input",53),b.Lb(260,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(261,"div",46),b.Qb(262,"div",26),b.Qb(263,"label",27),b.Jc(264," On the street "),b.Lb(265,"input",54),b.Lb(266,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(267,"div",46),b.Qb(268,"div",26),b.Qb(269,"label",27),b.Jc(270," Social rental housing (subsidized housing provided through Peel Living) "),b.Lb(271,"input",55),b.Lb(272,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(273,"div",46),b.Qb(274,"div",26),b.Qb(275,"label",27),b.Jc(276," Other "),b.Lb(277,"input",56),b.Lb(278,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(279,"div",21),b.Qb(280,"div",19),b.Jc(281,"Please select one of the options"),b.Pb(),b.Pb(),b.Pb(),b.Qb(282,"div",16),b.Qb(283,"label",15),b.Jc(284," Phone number "),b.Qb(285,"span"),b.Jc(286,"*"),b.Pb(),b.Pb(),b.Lb(287,"input",57),b.Qb(288,"div",18),b.Qb(289,"div",19),b.Jc(290,"Field can't be empty"),b.Pb(),b.Qb(291,"div",19),b.Jc(292,"Please enter valid value"),b.Pb(),b.Pb(),b.Pb(),b.Qb(293,"div",16),b.Qb(294,"label",15),b.Jc(295," Email address "),b.Pb(),b.Lb(296,"input",58),b.Qb(297,"div",18),b.Qb(298,"div",19),b.Jc(299,"Field can't be empty"),b.Pb(),b.Qb(300,"div",19),b.Jc(301,"Please enter valid value"),b.Pb(),b.Pb(),b.Pb(),b.Qb(302,"div",16),b.Qb(303,"label",15),b.Jc(304," Please provide any special instructions to reach your home, such as your buzzer number or parking instructions. "),b.Pb(),b.Lb(305,"input",59),b.Qb(306,"div",18),b.Qb(307,"div",19),b.Jc(308,"Field can't be empty"),b.Pb(),b.Qb(309,"div",19),b.Jc(310,"Please enter valid value"),b.Pb(),b.Pb(),b.Pb(),b.Qb(311,"div",16),b.Qb(312,"label",15),b.Jc(313," Language(s) spoken "),b.Qb(314,"span"),b.Jc(315,"*"),b.Pb(),b.Pb(),b.Lb(316,"input",60),b.Qb(317,"p"),b.Jc(318,"Please list all language(s) that you speak proficiently (use comma(,) seperated words) "),b.Pb(),b.Qb(319,"div",18),b.Qb(320,"div",19),b.Jc(321,"Field can't be empty"),b.Pb(),b.Qb(322,"div",19),b.Jc(323,"Please enter valid value"),b.Pb(),b.Pb(),b.Pb(),b.Qb(324,"div",16),b.Qb(325,"label",15),b.Jc(326," How would you prefer to receive a weekly delivery from us? "),b.Pb(),b.Qb(327,"div",2),b.Qb(328,"div",46),b.Qb(329,"div",26),b.Qb(330,"label",27),b.Jc(331," Deliver to My Home (between 10:00 AM to 7:00 PM) "),b.Lb(332,"input",61),b.Lb(333,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Qb(334,"div",46),b.Qb(335,"div",26),b.Qb(336,"label",27),b.Jc(337," Nearest Pick up Location to me (between 9:30 AM to 4:30 PM) "),b.Lb(338,"input",62),b.Lb(339,"span",29),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(340,"div",21),b.Qb(341,"div",19),b.Jc(342,"Please select one of the options"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(343,"div",63),b.Qb(344,"ul"),b.Qb(345,"li"),b.Qb(346,"button",64),b.Lb(347,"i",65),b.Jc(348," Previous step "),b.Pb(),b.Pb(),b.Qb(349,"li"),b.Qb(350,"button",66),b.Jc(351," Next step "),b.Lb(352,"i",67),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e){const e=b.wc(4);b.yb(3),b.ic("formGroup",t.step1Form),b.yb(25),b.Cb("submitting",t.submitting),b.yb(16),b.ic("hidden",!(e.submitted&&t.eligibilityCriteriaInput.errors)),b.yb(1),b.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.pattern)),b.yb(9),b.ic("hidden",!(e.submitted&&null!=t.firstVisitToFoodbankInput.errors&&t.firstVisitToFoodbankInput.errors.required)),b.yb(8),b.ic("hidden",!(e.submitted&&t.lastNameInput.errors)),b.yb(1),b.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.pattern)),b.yb(8),b.ic("hidden",!(e.submitted&&t.firstNameInput.errors)),b.yb(1),b.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.pattern)),b.yb(9),b.ic("hidden",!(e.submitted&&null!=t.dobInput.errors&&t.dobInput.errors.required)),b.yb(39),b.ic("hidden",!(e.submitted&&null!=t.genderInput.errors&&t.genderInput.errors.required)),b.yb(51),b.ic("hidden",!(e.submitted&&null!=t.maritalStatusInput.errors&&t.maritalStatusInput.errors.required)),b.yb(14),b.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.address.errors&&t.contactInfoGroup.address.errors.required)),b.yb(8),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.city.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.pattern)),b.yb(8),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.postalCode.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.pattern)),b.yb(67),b.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.housingType.errors&&t.contactInfoGroup.housingType.errors.required)),b.yb(8),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.phone.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.pattern)),b.yb(6),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.email.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.email)),b.yb(6),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.specialInstruction.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.pattern)),b.yb(10),b.ic("hidden",!(e.submitted&&t.contactInfoGroup.languageSpoken.errors)),b.yb(1),b.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.pattern)),b.yb(19),b.ic("hidden",!(e.submitted&&null!=t.contactInfoGroup.deliveryPreference.errors&&t.contactInfoGroup.deliveryPreference.errors.required))}},directives:[u.A,u.o,u.h,u.c,u.n,u.f,u.u,u.i,i.g],styles:[""]}),e})()},{path:"step2",component:(()=>{class e{constructor(e,t,n,o,i){this.ps=e,this.ss=t,this.router=n,this.ar=o,this.loader=i,this.submitting=!1,this.unsub$=new s.a,this.init_form_data()}ngOnInit(){this.ps.AdObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_values()}),this.ss.getUserSessionObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{this.session=e})}preset_input_values(){this.householdMembers=Object.assign(Object.assign({},this.householdMembers),this.ad.householdMembers),this.education=Object.assign(Object.assign({},this.education),this.ad.education),this.fill_empty_options_and_selectors()}fill_empty_options_and_selectors(){for(let e in this.householdMembers)this.householdMembers[e]=this.householdMembers[e]||"";this.education.level=this.education.level||"grade 0-8"}save(){this.load(),this.ps.save_contact_details_step2(this.ad._id,{householdMembers:this.householdMembers,education:this.education}).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../step3"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}nextPage(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.save()}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}init_form_data(){this.householdMembers={numChildren:null,numAdults:null,numSeniors:null},this.education={level:"grade 0-8",country:null}}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(l.a),b.Kb(p.a),b.Kb(i.f),b.Kb(i.a),b.Kb(m.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-step2"]],decls:173,vars:19,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[3,"ngSubmit"],["step2Form","ngForm"],[1,"col-sm-12"],[1,"delivery-step-list"],[1,"completed"],["src","assets/images/check.png","alt","Check"],[1,"active"],[1,"btn","btn-preview"],[1,"fa","fa-eye"],[1,"delivery-form"],[1,"col-lg-6","offset-lg-3"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"select-wrap"],["name","numChildren","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["name","numAdults","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["name","numSeniors","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["valueu","3"],[1,"col-lg-6"],[1,"city-checkbx-list"],[1,"city-radio"],["type","radio","name","level","value","grade 0-8","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"checkmark"],["type","radio","name","level","value","grade 9-11","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","grade 12","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","post secondary (some)","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","trade certificate/professional accreditation","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","college diploma","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","university degree","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Phd","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Undisclosed","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error",3,"hidden"],["type","text","name","country","pattern","^[a-zA-Z]+ *$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["countryInput","ngModel"],[1,"errors",3,"hidden"],[1,"d-footer"],["type","button","routerLink","../step1",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e){const e=b.Rb();b.Qb(0,"section",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"form",3,4),b.Xb("ngSubmit",(function(){b.zc(e);const n=b.wc(4);return t.nextPage(n)})),b.Qb(5,"div",5),b.Qb(6,"div",6),b.Qb(7,"ul"),b.Qb(8,"li",7),b.Qb(9,"span"),b.Lb(10,"img",8),b.Pb(),b.Jc(11," Contact details "),b.Pb(),b.Qb(12,"li",9),b.Qb(13,"span"),b.Jc(14," 2 "),b.Pb(),b.Jc(15," Household members & Educations "),b.Pb(),b.Qb(16,"li"),b.Qb(17,"span"),b.Jc(18," 3 "),b.Pb(),b.Jc(19," Monthly income "),b.Pb(),b.Qb(20,"li"),b.Qb(21,"span"),b.Jc(22," 4 "),b.Pb(),b.Jc(23," Dietary considerations "),b.Pb(),b.Qb(24,"li"),b.Qb(25,"button",10),b.Lb(26,"i",11),b.Jc(27," Preview Ad "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(28,"div",12),b.Qb(29,"div",2),b.Qb(30,"div",13),b.Qb(31,"div",14),b.Qb(32,"fieldset",15),b.Qb(33,"legend"),b.Jc(34,"Household members"),b.Pb(),b.Qb(35,"p",16),b.Jc(36,"Please list the number of household member(s), if any, reside in your household."),b.Pb(),b.Qb(37,"div",17),b.Qb(38,"label",18),b.Jc(39," Number of children or youth (0-17 years) "),b.Pb(),b.Qb(40,"div",19),b.Qb(41,"select",20),b.Xb("ngModelChange",(function(e){return t.householdMembers.numChildren=e})),b.Qb(42,"option",21),b.Jc(43,"Select Option..."),b.Pb(),b.Qb(44,"option",22),b.Jc(45,"0"),b.Pb(),b.Qb(46,"option",23),b.Jc(47,"1"),b.Pb(),b.Qb(48,"option",24),b.Jc(49,"2"),b.Pb(),b.Qb(50,"option",25),b.Jc(51,"3"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(52,"div",17),b.Qb(53,"label",18),b.Jc(54," Number of adults (18-64 years) "),b.Pb(),b.Qb(55,"div",19),b.Qb(56,"select",26),b.Xb("ngModelChange",(function(e){return t.householdMembers.numAdults=e})),b.Qb(57,"option",21),b.Jc(58,"Select Option..."),b.Pb(),b.Qb(59,"option",22),b.Jc(60,"0"),b.Pb(),b.Qb(61,"option",23),b.Jc(62,"1"),b.Pb(),b.Qb(63,"option",24),b.Jc(64,"2"),b.Pb(),b.Qb(65,"option",25),b.Jc(66,"3"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(67,"div",17),b.Qb(68,"label",18),b.Jc(69," Number of seniors (65+ years) "),b.Pb(),b.Qb(70,"div",19),b.Qb(71,"select",27),b.Xb("ngModelChange",(function(e){return t.householdMembers.numSeniors=e})),b.Qb(72,"option",21),b.Jc(73,"Select Option..."),b.Pb(),b.Qb(74,"option",22),b.Jc(75,"0"),b.Pb(),b.Qb(76,"option",23),b.Jc(77,"1"),b.Pb(),b.Qb(78,"option",24),b.Jc(79,"2"),b.Pb(),b.Qb(80,"option",28),b.Jc(81,"3"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(82,"fieldset",15),b.Qb(83,"legend"),b.Jc(84,"Education"),b.Pb(),b.Qb(85,"p",16),b.Jc(86," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),b.Pb(),b.Qb(87,"div",17),b.Qb(88,"label",18),b.Jc(89," What is the highest level of education that you have completed? "),b.Qb(90,"span"),b.Jc(91,"*"),b.Pb(),b.Pb(),b.Qb(92,"div",2),b.Qb(93,"div",29),b.Qb(94,"div",30),b.Qb(95,"label",31),b.Jc(96," Grade 0-8 "),b.Qb(97,"input",32),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(98,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(99,"div",29),b.Qb(100,"div",30),b.Qb(101,"label",31),b.Jc(102," Grade 9-11 "),b.Qb(103,"input",34),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(104,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(105,"div",29),b.Qb(106,"div",30),b.Qb(107,"label",31),b.Jc(108," Grade 12 "),b.Qb(109,"input",35),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(110,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(111,"div",29),b.Qb(112,"div",30),b.Qb(113,"label",31),b.Jc(114," Post secondary (some) "),b.Qb(115,"input",36),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(116,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(117,"div",29),b.Qb(118,"div",30),b.Qb(119,"label",31),b.Jc(120," Trade certificate/professional accreditation "),b.Qb(121,"input",37),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(122,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(123,"div",29),b.Qb(124,"div",30),b.Qb(125,"label",31),b.Jc(126," College diploma "),b.Qb(127,"input",38),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(128,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(129,"div",29),b.Qb(130,"div",30),b.Qb(131,"label",31),b.Jc(132," University degree "),b.Qb(133,"input",39),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(134,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(135,"div",29),b.Qb(136,"div",30),b.Qb(137,"label",31),b.Jc(138," PhD "),b.Qb(139,"input",40),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(140,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(141,"div",29),b.Qb(142,"div",30),b.Qb(143,"label",31),b.Jc(144," Undisclosed "),b.Qb(145,"input",41),b.Xb("ngModelChange",(function(e){return t.education.level=e})),b.Pb(),b.Lb(146,"span",33),b.Pb(),b.Pb(),b.Pb(),b.Qb(147,"div",42),b.Qb(148,"span",43),b.Jc(149,"Please select one of the options"),b.Pb(),b.Pb(),b.Qb(150,"div",5),b.Qb(151,"div",17),b.Qb(152,"label",18),b.Jc(153," Please tell us which country you completed your highest level of education in? "),b.Qb(154,"span"),b.Jc(155,"*"),b.Pb(),b.Pb(),b.Qb(156,"input",44,45),b.Xb("ngModelChange",(function(e){return t.education.country=e})),b.Pb(),b.Qb(158,"div",46),b.Qb(159,"span",43),b.Jc(160,"Field can't be empty"),b.Pb(),b.Qb(161,"span",43),b.Jc(162,"Invalid field value (only alphabets)"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(163,"div",47),b.Qb(164,"ul"),b.Qb(165,"li"),b.Qb(166,"button",48),b.Lb(167,"i",49),b.Jc(168," Previous step "),b.Pb(),b.Pb(),b.Qb(169,"li"),b.Qb(170,"button",50),b.Jc(171," Next step "),b.Lb(172,"i",51),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&e){const e=b.wc(4),n=b.wc(157);b.yb(28),b.Cb("submitting",t.submitting),b.yb(13),b.ic("ngModel",t.householdMembers.numChildren),b.yb(15),b.ic("ngModel",t.householdMembers.numAdults),b.yb(15),b.ic("ngModel",t.householdMembers.numSeniors),b.yb(26),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(6),b.ic("ngModel",t.education.level),b.yb(3),b.ic("hidden",!(e.submitted&&!t.education.level)),b.yb(8),b.ic("ngModel",t.education.country),b.yb(2),b.ic("hidden",!e.submitted),b.yb(1),b.ic("hidden",!(null!=n.errors&&n.errors.required)),b.yb(2),b.ic("hidden",!(null!=n.errors&&n.errors.pattern))}},directives:[u.A,u.o,u.p,u.x,u.n,u.q,u.r,u.z,u.u,u.c,u.w,u.t,i.g],styles:[""]}),e})()},{path:"step3",component:(()=>{class e{constructor(e,t,n,o,i){this.ps=e,this.ss=t,this.router=n,this.ar=o,this.loader=i,this.submitting=!1,this.unsub$=new s.a,this.init_form_data()}ngOnInit(){this.ps.AdObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_data()}),this.ss.getUserSessionObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{this.session=e})}preset_input_data(){this.componentForm=Object.assign(Object.assign({},this.componentForm),this.ad.monthlyIncome),this.componentForm.sources instanceof Array||(this.componentForm.sources=[]),this.componentForm.sources.length>0&&(this.sources[0].checked=!1),this.componentForm.sources.map(e=>{let t=this.sources.find(t=>t.name==e.name);t&&(t.checked=!0)})}save(){this.load();const e=this.prepare_form_data();this.ps.save_contact_details_step3(this.ad._id,e).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../step4"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}prepare_form_data(){const e=this.sources.filter(e=>e.checked);return Object.assign(Object.assign({},this.componentForm),{sources:e})}nextPage(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_source_combination()||this.save()}wrong_source_combination(){let e=!1;this.sources[0].checked&&(e=!0);let t=this.sources.find(e=>"no income"!=e.name.toLowerCase()&&e.checked);return e||t?!(!e||!t||(this.ps.newMessage("error","Invalid Form Details","Wrong Source Combination"),0)):(this.ps.newMessage("error","Invalid Form Details","Please select one or more income source"),!0)}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}init_form_data(){this.componentForm={sources:[],estimatedMonthlyIncome:null,monthlyHouseholdExpenses:null},this.sources=[{_id:null,name:"No income",checked:!0},{_id:null,name:"Ontario Disability Support Program (ODSP)",checked:!1},{_id:null,name:"Ontario Works (OW)",checked:!1},{_id:null,name:"Old Age Security (OAS)",checked:!1},{_id:null,name:"Canada Pension Plan (CCP)",checked:!1},{_id:null,name:"Pensions",checked:!1},{_id:null,name:"Employment Insurance (EI)",checked:!1},{_id:null,name:"Workplace Safety & Insurance Board (WSIB)",checked:!1},{_id:null,name:"Spouse/Family support",checked:!1},{_id:null,name:"Employed: Full time",checked:!1},{_id:null,name:"Employed: Part-time",checked:!1},{_id:null,name:"Child support",checked:!1},{_id:null,name:"Child tax benefit",checked:!1},{_id:null,name:"Scholarship",checked:!1},{_id:null,name:"Student loans",checked:!1},{_id:null,name:"Universal Child Benefit",checked:!1},{_id:null,name:"Other",checked:!1}]}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(l.a),b.Kb(p.a),b.Kb(i.f),b.Kb(i.a),b.Kb(m.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-step3"]],decls:81,vars:9,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[1,"col-12",3,"ngSubmit"],["step3Form","ngForm"],[1,"col-sm-12"],[1,"delivery-step-list"],[1,"completed"],["src","assets/images/check.png","alt","Check"],[1,"active"],[1,"btn","btn-preview"],[1,"fa","fa-eye"],[1,"delivery-form"],[1,"col-lg-6","offset-lg-3"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","estimatedMonthlyIncome","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["estimatedMonthlyIncome","ngModel"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["type","text","name","monthlyHouseholdExpenses","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["monthlyHouseholdExpenses","ngModel"],[1,"d-footer"],["type","button","routerLink","../step2",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox","ngModel","",3,"name","ngModel","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e){const e=b.Rb();b.Qb(0,"section",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"form",3,4),b.Xb("ngSubmit",(function(){b.zc(e);const n=b.wc(4);return t.nextPage(n)})),b.Qb(5,"div",5),b.Qb(6,"div",6),b.Qb(7,"ul"),b.Qb(8,"li",7),b.Qb(9,"span"),b.Lb(10,"img",8),b.Pb(),b.Jc(11," Contact details "),b.Pb(),b.Qb(12,"li",7),b.Qb(13,"span"),b.Lb(14,"img",8),b.Pb(),b.Jc(15," Household members & Educations "),b.Pb(),b.Qb(16,"li",9),b.Qb(17,"span"),b.Jc(18," 3 "),b.Pb(),b.Jc(19," Monthly income "),b.Pb(),b.Qb(20,"li"),b.Qb(21,"span"),b.Jc(22," 4 "),b.Pb(),b.Jc(23," Dietary considerations "),b.Pb(),b.Qb(24,"li"),b.Qb(25,"button",10),b.Lb(26,"i",11),b.Jc(27," Preview Ad "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(28,"div",12),b.Qb(29,"div",2),b.Qb(30,"div",13),b.Qb(31,"div",14),b.Qb(32,"fieldset",15),b.Qb(33,"legend"),b.Jc(34,"Monthly income"),b.Pb(),b.Qb(35,"p",16),b.Jc(36," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),b.Pb(),b.Qb(37,"div",17),b.Qb(38,"label",18),b.Jc(39," Please select all sources of your monthly income "),b.Qb(40,"span"),b.Jc(41,"*"),b.Pb(),b.Pb(),b.Qb(42,"div",2),b.Qb(43,"div",19),b.Hc(44,h,6,3,"ng-container",20),b.Qb(45,"div",17),b.Qb(46,"label",18),b.Jc(47," Please provide an estimate of your total monthly income "),b.Qb(48,"span"),b.Jc(49,"*"),b.Pb(),b.Pb(),b.Qb(50,"input",21,22),b.Xb("ngModelChange",(function(e){return t.componentForm.estimatedMonthlyIncome=e})),b.Pb(),b.Qb(52,"div",23),b.Qb(53,"span",24),b.Jc(54,"Field can't be empty"),b.Pb(),b.Qb(55,"span",24),b.Jc(56,"Please enter valid input(only numbers)"),b.Pb(),b.Pb(),b.Pb(),b.Qb(57,"div",17),b.Qb(58,"label",18),b.Jc(59," Please provide an estimate of your total monthly household expenses "),b.Qb(60,"span"),b.Jc(61,"*"),b.Pb(),b.Pb(),b.Qb(62,"input",25,26),b.Xb("ngModelChange",(function(e){return t.componentForm.monthlyHouseholdExpenses=e})),b.Pb(),b.Qb(64,"p"),b.Jc(65," Such as rent/mortgage, utilities, phone, internet, vehicle, insurance, childcare, child support, debt payments, food, medical, personal, or transit expenses "),b.Pb(),b.Qb(66,"div",23),b.Qb(67,"span",24),b.Jc(68,"Field can't be empty"),b.Pb(),b.Qb(69,"span",24),b.Jc(70,"Please enter valid input(only numbers)"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(71,"div",27),b.Qb(72,"ul"),b.Qb(73,"li"),b.Qb(74,"button",28),b.Lb(75,"i",29),b.Jc(76," Previous step "),b.Pb(),b.Pb(),b.Qb(77,"li"),b.Qb(78,"button",30),b.Jc(79," Next step "),b.Lb(80,"i",31),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&e){const e=b.wc(4),n=b.wc(51),o=b.wc(63);b.yb(44),b.ic("ngForOf",t.sources),b.yb(6),b.ic("ngModel",t.componentForm.estimatedMonthlyIncome),b.yb(2),b.ic("hidden",!e.submitted),b.yb(1),b.ic("hidden",!(null!=n.errors&&n.errors.required)),b.yb(2),b.ic("hidden",!(null!=n.errors&&n.errors.pattern)),b.yb(7),b.ic("ngModel",t.componentForm.monthlyHouseholdExpenses),b.yb(4),b.ic("hidden",!e.submitted),b.yb(1),b.ic("hidden",!(null!=o.errors&&o.errors.required)),b.yb(2),b.ic("hidden",!(null!=o.errors&&o.errors.pattern))}},directives:[u.A,u.o,u.p,o.m,u.c,u.t,u.w,u.n,u.q,i.g,u.a],styles:[""]}),e})()},{path:"step4",component:(()=>{class e{constructor(e,t,n,o,i,r){this.ps=e,this.ss=t,this.fb=n,this.router=o,this.ar=i,this.loader=r,this.componentForm=this.fb.group({additionalDietaryInfo:["",u.y.required],fullname:["",u.y.compose([u.y.required,u.y.pattern(/^[a-z ]+$/i)])],phone:["",u.y.compose([u.y.required,u.y.pattern(/^\+?[0-9]{10,13}$/)])]}),this.submitting=!1,this.unsub$=new s.a,this.init_form_data()}ngOnInit(){this.ps.AdObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{if(!e._id)return this.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1;this.ad=e,this.preset_input_data()}),this.ss.getUserSessionObservable().pipe(Object(a.a)(this.unsub$)).subscribe(e=>{this.session=e})}preset_input_data(){var e;const{dietaryConsideration:t}=this.ad;let n=null;t instanceof Object&&(n=Object.assign({},t)),this.componentForm.patchValue(n||{});let o=null===(e=this.ad.dietaryConsideration)||void 0===e?void 0:e.needs;o instanceof Array||(o=[]),o.length>0&&(this.needs[0].checked=!1),o.map(e=>{let t=this.needs.find(t=>t.name==e.name);t&&(t.checked=!0)})}save(){this.load();const e=this.prepare_form_data();this.ps.save_contact_details_step4(this.ad._id,e).subscribe(e=>{this.stopload(),e.status?(this.ps.newMessage("success","Details were saved",e.message),this.ps.NewAdData(e.data),this.router.navigate(["../../steps/photos"],{relativeTo:this.ar})):this.ps.newMessage("error","Details not saved",e.message)},this.handle_error.bind(this))}prepare_form_data(){const e=this.needs.filter(e=>e.checked),{fullname:t,additionalDietaryInfo:n,phone:o}=this.componentForm.value;return{fullname:t,additionalDietaryInfo:n,phone:o,needs:e}}nextPage(){if(console.log(this.componentForm),"INVALID"==this.componentForm.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_need_combination()||this.save()}wrong_need_combination(){return!this.needs.find(e=>e.checked)&&(this.ps.newMessage("error","Invalid Form Details","Please select one or more income need"),!0)}handle_error(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}init_form_data(){this.needs=[{_id:null,name:"Diabetic",checked:!0},{_id:null,name:"Fish only",checked:!1},{_id:null,name:"Halal",checked:!1},{_id:null,name:"Kosher",checked:!1},{_id:null,name:"Milk allergy",checked:!1},{_id:null,name:"No pork",checked:!1},{_id:null,name:"Peanut allergy",checked:!1},{_id:null,name:"Egg allergy",checked:!1},{_id:null,name:"Pregnant",checked:!1},{_id:null,name:"Sesame allergy",checked:!1},{_id:null,name:"Vegan",checked:!1},{_id:null,name:"Vegetarian",checked:!1},{_id:null,name:"Wheat allergy",checked:!1},{_id:null,name:"Other",checked:!1}]}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(l.a),b.Kb(p.a),b.Kb(u.d),b.Kb(i.f),b.Kb(i.a),b.Kb(m.a))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-step4"]],features:[b.xb([u.d])],decls:86,vars:9,consts:[[1,"d-header"],[1,"container-fluid"],[1,"row"],[1,"col-12",3,"formGroup","ngSubmit"],["step4FormRef","ngForm"],[1,"col-sm-12"],[1,"delivery-step-list"],[1,"completed"],["src","assets/images/check.png","alt","Check"],[1,"active"],[1,"btn","btn-preview"],[1,"fa","fa-eye"],[1,"delivery-form"],[1,"col-lg-6","offset-lg-3"],[1,"form-input"],[1,"form-contact"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","additionalDietaryInfo","formControlName","additionalDietaryInfo",1,"form-control"],[1,"errors"],[1,"error",3,"hidden"],["type","text","name","fullname","placeholder","firstname lastname","formControlName","fullname",1,"form-control"],[1,"errors",3,"hidden"],["type","text","name","phone","placeholder","9999999999","formControlName","phone",1,"form-control"],[1,"d-footer"],["type","button","routerLink","../step3",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e&&(b.Qb(0,"section",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"form",3,4),b.Xb("ngSubmit",(function(){return t.nextPage()})),b.Qb(5,"div",5),b.Qb(6,"div",6),b.Qb(7,"ul"),b.Qb(8,"li",7),b.Qb(9,"span"),b.Lb(10,"img",8),b.Pb(),b.Jc(11," Contact details "),b.Pb(),b.Qb(12,"li",7),b.Qb(13,"span"),b.Lb(14,"img",8),b.Pb(),b.Jc(15," Household members & Educations "),b.Pb(),b.Qb(16,"li",7),b.Qb(17,"span"),b.Lb(18,"img",8),b.Pb(),b.Jc(19," Monthly income "),b.Pb(),b.Qb(20,"li",9),b.Qb(21,"span"),b.Jc(22," 4 "),b.Pb(),b.Jc(23," Dietary considerations "),b.Pb(),b.Qb(24,"li"),b.Qb(25,"button",10),b.Lb(26,"i",11),b.Jc(27," Preview Ad "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(28,"div",12),b.Qb(29,"div",2),b.Qb(30,"div",13),b.Qb(31,"div",14),b.Qb(32,"fieldset",15),b.Qb(33,"legend"),b.Jc(34,"Dietary considerations"),b.Pb(),b.Qb(35,"div",16),b.Qb(36,"label",17),b.Jc(37," What, if any, dietary needs do you have? "),b.Pb(),b.Qb(38,"div",2),b.Qb(39,"div",18),b.Hc(40,g,6,5,"ng-container",19),b.Qb(41,"div",16),b.Qb(42,"label",17),b.Jc(43," Please provide any additional dietary information "),b.Qb(44,"span"),b.Jc(45,"*"),b.Pb(),b.Pb(),b.Lb(46,"input",20),b.Qb(47,"div",21),b.Qb(48,"span",22),b.Jc(49," Field can't be left empty. "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(50,"fieldset",15),b.Qb(51,"legend"),b.Jc(52,"Dietary considerations"),b.Pb(),b.Qb(53,"div",16),b.Qb(54,"label",17),b.Jc(55," What, if any, dietary needs do you have? "),b.Pb(),b.Qb(56,"div",2),b.Qb(57,"div",18),b.Qb(58,"div",16),b.Qb(59,"label",17),b.Jc(60," Full name "),b.Pb(),b.Lb(61,"input",23),b.Qb(62,"div",24),b.Qb(63,"span",22),b.Jc(64," Field can't be left empty "),b.Pb(),b.Qb(65,"span",22),b.Jc(66," Invalid field value (only alphabets) "),b.Pb(),b.Pb(),b.Pb(),b.Qb(67,"div",16),b.Qb(68,"label",17),b.Jc(69," Phone number "),b.Pb(),b.Lb(70,"input",25),b.Qb(71,"div",24),b.Qb(72,"span",22),b.Jc(73," Field can't be left empty "),b.Pb(),b.Qb(74,"span",22),b.Jc(75," Invalid field value (only numbers) "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(76,"div",26),b.Qb(77,"ul"),b.Qb(78,"li"),b.Qb(79,"button",27),b.Lb(80,"i",28),b.Jc(81," Previous step "),b.Pb(),b.Pb(),b.Qb(82,"li"),b.Qb(83,"button",29),b.Jc(84," Next Step "),b.Lb(85,"i",30),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e){const e=b.wc(4);b.yb(3),b.ic("formGroup",t.componentForm),b.yb(37),b.ic("ngForOf",t.needs),b.yb(8),b.ic("hidden",!(e.submitted&&null!=t.componentForm.controls.additionalDietaryInfo.errors&&t.componentForm.controls.additionalDietaryInfo.errors.required)),b.yb(14),b.ic("hidden",!e.submitted),b.yb(1),b.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.pattern)),b.yb(6),b.ic("hidden",!e.submitted),b.yb(1),b.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.required)),b.yb(2),b.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.pattern))}},directives:[u.A,u.o,u.h,o.m,u.c,u.n,u.f,i.g,u.a,u.q],styles:[""]}),e})()}]}];let y=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[i.j.forChild(v)],i.j]}),e})();var f=n("qxW0"),Q=n("FMpt");let J=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[o.b,y,u.j,u.v,f.a,d.b,Q.a]]}),e})()},qxW0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ofXK"),i=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(t){return new(t||e)},imports:[[o.b]]}),e})()}}]);