(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"o/Q4":function(e,t,s){"use strict";s.r(t),s.d(t,"MainStepsModule",(function(){return K}));var i=s("ofXK"),n=s("tyNb"),a=s("XNiG"),o=s("1G5W"),r=s("fXoL"),c=s("E+NS"),d=s("5dVO"),b=s("ndxW"),l=s("3Pt+"),h=s("QIUk"),u=s("7zfz"),p=s("dgC2");const g=["next"];function v(e,t){1&e&&(r.Qb(0,"div",42),r.Qb(1,"span",43),r.Jc(2,"Please enter a valid advertisement title."),r.Pb(),r.Pb())}function m(e,t){1&e&&(r.Qb(0,"div",42),r.Qb(1,"span",43),r.Jc(2,"Please enter a valid name. (Only alphabets)"),r.Pb(),r.Pb())}function f(e,t){1&e&&(r.Qb(0,"div",42),r.Qb(1,"span",43),r.Jc(2,"Please select a household member"),r.Pb(),r.Pb())}function P(e,t){1&e&&(r.Qb(0,"div",42),r.Qb(1,"span",43),r.Jc(2,"Please enter a valid tag line."),r.Pb(),r.Pb())}function y(e,t){1&e&&(r.Qb(0,"div",42),r.Qb(1,"span",43),r.Jc(2,"Please enter a valid description."),r.Pb(),r.Pb())}const Q=function(){return{height:"320px","font-size":"16px"}};function C(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",11),r.Qb(1,"label",12),r.Jc(2,"Advertisement Title"),r.Pb(),r.Qb(3,"p",13),r.Jc(4),r.Pb(),r.Qb(5,"div",14),r.Qb(6,"input",15,16),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.adTitle=t})),r.Pb(),r.Lb(8,"img",17),r.Pb(),r.Hc(9,v,3,0,"div",18),r.Pb(),r.Qb(10,"div",19),r.Qb(11,"div",20),r.Qb(12,"label",21),r.Jc(13,"Name"),r.Pb(),r.Qb(14,"span",22),r.Jc(15,"First Name Only"),r.Pb(),r.Qb(16,"p",13),r.Jc(17),r.Pb(),r.Qb(18,"input",23,24),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.firstName=t})),r.Pb(),r.Hc(20,m,3,0,"div",18),r.Pb(),r.Qb(21,"div",25),r.Qb(22,"label",26),r.Jc(23,"Household Members"),r.Pb(),r.Qb(24,"select",27,28),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.householdMember=t})),r.Qb(26,"option",29),r.Jc(27,"Select"),r.Pb(),r.Qb(28,"option",30),r.Jc(29,"Single Parent 1"),r.Pb(),r.Qb(30,"option",31),r.Jc(31,"Single Parent 2"),r.Pb(),r.Qb(32,"option",32),r.Jc(33,"Single Parent 3"),r.Pb(),r.Qb(34,"option",33),r.Jc(35,"Seniors 1"),r.Pb(),r.Qb(36,"option",34),r.Jc(37,"Seniors 2"),r.Pb(),r.Qb(38,"option",35),r.Jc(39,"Seniors 3"),r.Pb(),r.Pb(),r.Hc(40,f,3,0,"div",18),r.Pb(),r.Pb(),r.Qb(41,"div",36),r.Qb(42,"label",37),r.Jc(43,"Tag Line"),r.Pb(),r.Qb(44,"input",38,39),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.tagline=t})),r.Pb(),r.Hc(46,P,3,0,"div",18),r.Pb(),r.Qb(47,"div",11),r.Qb(48,"label",40),r.Jc(49,"Description"),r.Pb(),r.Qb(50,"p-editor",41),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().adContent.description=t})),r.Pb(),r.Hc(51,y,3,0,"div",18),r.Pb()}if(2&e){const e=r.wc(7),t=r.wc(19),s=r.wc(25),i=r.wc(45),n=r.bc(),a=r.wc(1);r.yb(4),r.Lc("",60-((null==n.adContent.adTitle?null:n.adContent.adTitle.length)||0)," characters left"),r.yb(2),r.ic("ngModel",n.adContent.adTitle),r.yb(3),r.ic("ngIf",a.submitted&&e.invalid),r.yb(8),r.Lc("",25-((null==n.adContent.firstName?null:n.adContent.firstName.length)||0)," charaters left"),r.yb(1),r.ic("ngModel",n.adContent.firstName),r.yb(2),r.ic("ngIf",a.submitted&&t.invalid),r.yb(4),r.ic("ngModel",n.adContent.householdMember),r.yb(16),r.ic("ngIf",a.submitted&&s.invalid),r.yb(4),r.ic("ngModel",n.adContent.tagline),r.yb(2),r.ic("ngIf",a.submitted&&i.invalid),r.yb(4),r.Fc(r.mc(14,Q)),r.ic("ngModel",n.adContent.description),r.yb(1),r.ic("ngIf",a.submitted&&!n.adContent.description)}}let M=(()=>{class e{constructor(e,t,s,i,n,o){this.ren=e,this.ps=t,this.router=s,this.loader=i,this.ar=n,this.ss=o,this.submitting=!1,this.saved=!1,this.unsub$=new a.a,this.adContent={adTitle:"",firstName:"",description:"",householdMember:"",tagline:""}}ngOnInit(){this.ps.newPage(3),this.getUserSession(),this.ps.AdObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad._id||(this.ps.newMessage("info","Ad Not Initialized","Please start an ad by selecting category"),this.router.navigate(["../select-location"],{relativeTo:this.ar})),this.presetData(e)})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{var t,s;console.log("hello"+e),console.log(this.submitButtonRef),"save-next"==e?null===(s=null===(t=this.submitButtonRef)||void 0===t?void 0:t.nativeElement)||void 0===s||s.click():"prev"==e?this.prevPage():this.nextNoSave()})}getUserSession(){this.ss.getUserSessionObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.session=e})}presetData(e){const{adTitle:t,firstName:s,description:i,householdMember:n,tagline:a}=e;this.adContent={adTitle:t,firstName:s,description:i,householdMember:n,tagline:a},t&&n&&i&&s&&a&&(this.saved=!0)}ngAfterViewInit(){const e=document.getElementsByClassName("ql-formats"),t=this.ren.parentNode(e[0]);this.ren.removeChild(t,e[0]),this.ren.removeChild(t,e[2]),this.ren.removeChild(t,e[4]),this.buttonEventFromParent()}save_ad_content(){return new Promise((e,t)=>{this.ps.save_ad_content(this.adContent).pipe(Object(o.a)(this.unsub$)).subscribe(s=>s.status?(this.ps.newMessage("success","Ad Content Saved","The content was saved!"),this.ps.NewAdData(s.data),this.stopload(),e(!0)):(this.ps.newMessage("error","Content Save Failed",s.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}prevPage(){this.router.navigate(["../../select-location"],{relativeTo:this.ar})}nextPage(e,t="../../contact-details/step1"){if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.load(),this.saved?this.checkAndHandleUnsavedChanges(t):this.saveAndMove(t)}nextNoSave(){this.router.navigate(["../../contact-details/step1"],{relativeTo:this.ar})}checkAndHandleUnsavedChanges(e){this.checkUnsavedChanges()?this.handleUnsavedChanges().then(()=>{this.stopload(),this.saveAndMove(e)}).catch(()=>this.stopload()):(this.stopload(),this.router.navigate([e],{relativeTo:this.ar}))}checkUnsavedChanges(){return this.ad.firstName!=this.adContent.firstName||this.ad.description!=this.adContent.description||this.ad.householdMember!=this.adContent.householdMember||this.ad.adTitle!=this.adContent.adTitle||this.ad.tagline!=this.adContent.tagline}handleUnsavedChanges(){return new Promise((e,t)=>{e(!0)})}saveAndMove(e){this.save_ad_content().then(()=>{this.stopload(),this.router.navigate([e],{relativeTo:this.ar})}).catch(()=>{this.stopload()})}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.D),r.Kb(c.a),r.Kb(n.f),r.Kb(d.a),r.Kb(n.a),r.Kb(b.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-ad-content"]],viewQuery:function(e,t){var s;1&e&&r.Qc(g,!0),2&e&&r.vc(s=r.Yb())&&(t.submitButtonRef=s.first)},decls:19,vars:2,consts:[[1,"input-container",3,"ngSubmit"],["sadForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","content"],[1,"d-footer","c-footer",2,"display","none"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit","name","submit",1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"],[1,"form-group"],["for","adTitle"],[1,"left-char"],[1,"form-icon","right-icon"],["type","text","name","adTitle","placeholder","","maxlength","60","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["adTitle","ngModel"],["src","assets/images/emoji-icon.png","alt","Icons"],["class","errors",4,"ngIf"],[1,"group"],["id","name-input",1,"form-group","flex-2"],["for","name"],[1,"badge"],["type","text","autocapitalize","words","name","name","placeholder","","maxlength","25","pattern","[a-zA-Z ]+","required","","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name","ngModel"],["id","gender-input",1,"form-group","mx-md-3","flex-1"],["for","householdMember"],["name","householdMember","id","selecthouseHoldMember","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["householdMember","ngModel"],["value","","disabled",""],["value","single parent 1"],["value","single parent 2"],["value","single parent 3"],["value","seniors 1"],["value","seniors 2"],["value","seniors 3"],["id","name-input",1,"form-group"],["for","tag"],["type","text","name","tag","placeholder","Describe your best attribute in short and catchy way","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["tag","ngModel"],["for","description"],["name","description","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){const e=r.Rb();r.Qb(0,"form",0,1),r.Xb("ngSubmit",(function(){r.zc(e);const s=r.wc(1);return t.nextPage(s)})),r.Qb(2,"section",2),r.Qb(3,"p-card"),r.Hc(4,C,52,15,"ng-template",3),r.Pb(),r.Pb(),r.Qb(5,"div",4),r.Qb(6,"ul"),r.Qb(7,"li"),r.Qb(8,"button",5),r.Xb("click",(function(){return t.prevPage()})),r.Lb(9,"i",6),r.Jc(10,"Previous step"),r.Pb(),r.Pb(),r.Qb(11,"li"),r.Qb(12,"button",7),r.Xb("click",(function(){r.zc(e);const s=r.wc(1);return t.nextPage(s,"/"+t.session.type)})),r.Jc(13," Save & Exit "),r.Pb(),r.Pb(),r.Qb(14,"li"),r.Qb(15,"button",8,9),r.Jc(17," Next step "),r.Lb(18,"i",10),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}2&e&&(r.yb(2),r.Cb("submitting",t.submitting))},directives:[l.A,l.o,l.p,h.a,u.j,l.c,l.k,l.w,l.n,l.q,i.n,l.t,l.x,l.r,l.z,p.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.form-group[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700;font-size:24px!important}.form-control[_ngcontent-%COMP%]{height:50px!important}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{min-width:100%;margin-right:0}}']}),e})();var w=s("3LrJ");let x=(()=>{class e{constructor(e,t,s,i,n){this.router=e,this.ss=t,this.ar=s,this.ps=i,this.loader=n,this.submitting=!1,this.unsub$=new a.a}ngOnInit(){this.ps.newPage(6),this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad._id||(alert("ad is not initialized"),this.router.navigate(["../select-location"],{relativeTo:this.ar}))})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{"save-next"==e?this.nextPage():"prev"==e?this.prevPage():this.nextNoSave()})}nextPage(e="../finalize"){this.router.navigate([e],{relativeTo:this.ar})}nextNoSave(){this.router.navigate(["../finalize"],{relativeTo:this.ar})}prevPage(){this.router.navigate(["../photos"],{relativeTo:this.ar})}errorHandle(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",null===(t=e.error)||void 0===t?void 0:t.message),this.stopload()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(n.f),r.Kb(b.a),r.Kb(n.a),r.Kb(c.a),r.Kb(d.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-choose-grocery"]],decls:29,vars:8,consts:[[1,"d-header","cat-header"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"panl-list-sec","upgrade-list"],["alt","home-pic",3,"src"],[1,"cancer-des"],[1,"d-footer","c-footer",2,"display","none"],["type","button",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","button",1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"]],template:function(e,t){1&e&&(r.Qb(0,"section",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"div",3),r.Qb(4,"form"),r.Qb(5,"div",4),r.Qb(6,"ul"),r.Qb(7,"li"),r.Lb(8,"img",5),r.cc(9,"server"),r.Pb(),r.Qb(10,"li"),r.Qb(11,"div",6),r.Jc(12," Foodbank "),r.Qb(13,"p"),r.Jc(14),r.cc(15,"date"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(16,"div",7),r.Qb(17,"ul"),r.Qb(18,"li"),r.Qb(19,"button",8),r.Lb(20,"i",9),r.Jc(21," Previous step "),r.Pb(),r.Pb(),r.Qb(22,"li"),r.Qb(23,"button",10),r.Xb("click",(function(){return t.nextPage("/"+t.session.type)})),r.Jc(24," Save & Exit "),r.Pb(),r.Pb(),r.Qb(25,"li"),r.Qb(26,"button",10),r.Xb("click",(function(){return t.nextPage()})),r.Jc(27," Next step "),r.Lb(28,"i",11),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(8),r.jc("src",r.dc(9,3,t.ad.identityImages[0])||"assets/images/no-image.jpg",r.Cc),r.yb(6),r.Mc(" Start date ",r.ec(15,5,t.ad.createdOn,"medium")," - ",t.ad.city," "))},directives:[l.A,l.o,l.p],pipes:[w.a,i.d],styles:[""]}),e})(),_=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-main-steps"]],features:[r.xb([u.h])],decls:1,vars:0,template:function(e,t){1&e&&r.Lb(0,"router-outlet")},directives:[n.k],styles:[""]}),e})();var O=s("DPk/");function S(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",10),r.Qb(1,"input",11),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedCountry=t}))("click",(function(){r.zc(e);const s=t.$implicit;return r.bc().change_country(s._id)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,s=r.bc();r.yb(1),r.jc("value",e._id),r.ic("ngModel",s.selectedCountry),r.yb(2),r.Kc(e.countryName)}}function N(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",10),r.Qb(1,"input",12),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedState=t}))("click",(function(){r.zc(e);const s=t.$implicit;return r.bc().change_state(s.stateName)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,s=r.bc();r.yb(1),r.jc("value",e.stateName),r.ic("ngModel",s.selectedState),r.yb(2),r.Kc(e.stateName)}}function k(e,t){if(1&e){const e=r.Rb();r.Qb(0,"label",10),r.Qb(1,"input",13),r.Xb("ngModelChange",(function(t){return r.zc(e),r.bc().selectedCity=t}))("click",(function(){r.zc(e);const s=t.$implicit;return r.bc().change_city(s.cityName)})),r.Pb(),r.Qb(2,"span"),r.Jc(3),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit,s=r.bc();r.yb(1),r.jc("value",e.cityName),r.ic("ngModel",s.selectedCity),r.yb(2),r.Kc(e.cityName)}}function J(e,t){1&e&&r.Lb(0,"div",14)}let A=(()=>{class e{constructor(e,t,s,i,n,o){this.ds=e,this.ps=t,this.router=s,this.loader=i,this.ar=n,this.ss=o,this.submitting=!1,this.loading=!1,this.saved=!1,this.unsub$=new a.a,this.cities=[],this.states=[],this.countries=[],this.selectedCountry="",this.selectedState="",this.selectedCity=""}ngOnInit(){this.ps.newPage(2),this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.ad=e}),this.check_session(),this.check_action(),this.get_country().then(()=>{this.prefill_selected_options()})}check_session(){this.ss.getUserSessionObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{e._id||(this.ps.newMessage("error","Login Needed","Please login to perform this action"),this.router.navigate(["/"]))})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{"save-next"==e?this.nextPage():this.nextNoSave()})}check_action(){}prefill_selected_options(){this.ps.AdObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{(null==e?void 0:e.country)&&this.prefill_country(e)})}prefill_country(e){const t=this.countries.find(t=>e.country==t.countryName);this.selectedCountry=t?t._id:"",this.selectedCountryName=t?t.countryName:"",this.prefill_state(t,e)}prefill_state(e,t){this.states=e?e.states:[],t.state&&(this.selectedState=t.state,this.prefill_city(t))}prefill_city(e){this.change_state(e.state).then(()=>{this.ad.city&&(this.selectedCity=e.city,this.saved=!0)})}getAdData(e){this.ps.get_ad(e).pipe(Object(o.a)(this.unsub$)).subscribe(e=>{e.status?this.ps.NewAdData(e.data):this.ps.newMessage("error","No Data",e.message)},this.handle_error.bind(this))}get_country(){return new Promise((e,t)=>{this.ds.get_countries().pipe(Object(o.a)(this.unsub$)).subscribe(s=>s.status?(this.countries=s.data,e(!0)):(this.ps.newMessage("error","Country Fetch Failed",s.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}change_country(e){this.selectedCountry=e;const t=this.countries.find(e=>e._id==this.selectedCountry);this.states=t.states,this.selectedCountryName=t.countryName,this.selectedState=null,this.saved=!1}change_state(e){return this.saved=!1,this.loading=!0,this.selectedState=e,new Promise((e,t)=>this.get_cities_from_server(e,t))}get_cities_from_server(e,t){this.ds.get_cities(this.selectedCountry,this.selectedState).pipe(Object(o.a)(this.unsub$)).subscribe(s=>(this.loading=!1,s.status?(this.cities=s.data[0].cities,e(!0)):(this.ps.newMessage("error","Cities Fetch Failed",s.message),t(!1))),e=>(this.handle_error(e),t(!1)))}change_city(e){this.saved=!1,this.selectedCity=e,this.nextPage()}save_location(){this.emptySelect()||(this.load(),this.ps.selectLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?(this.ps.NewAdData(e.data),this.ps.newMessage("success","Ad Created","New Ad was created."),this.saved=!0,this.nextPage()):this.ps.newMessage("error","Couldn't Save",e.message)},this.handle_error.bind(this)))}update_location(){this.emptySelect()||(this.load(),this.ps.updateLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?(this.ps.NewAdData(e.data),this.ps.newMessage("success","Location Updated","Location was updated"),this.saved=!0,this.nextPage()):this.ps.newMessage("error","Couldn't Update",e.message)},this.handle_error.bind(this)))}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",""+e.error.message),this.stopload()}nextPage(){this.saved&&!this.UnsavedChangesExists()?this.router.navigate(["../ad-content"],{relativeTo:this.ar}):this.ad&&this.ad._id?this.update_location():this.save_location()}nextNoSave(){"published"==this.ad.adState&&this.router.navigate(["../ad-content"],{relativeTo:this.ar})}emptySelect(){if(""==this.selectedCountry)this.ps.newMessage("info","Country Not Selected","please Select a country");else if(""==this.selectedState)this.ps.newMessage("info","State Not Selected","Please select a state");else{if(""!=this.selectedCity)return!1;this.ps.newMessage("info","City Not Selected","Please select a city")}return!0}UnsavedChangesExists(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(O.a),r.Kb(c.a),r.Kb(n.f),r.Kb(d.a),r.Kb(n.a),r.Kb(b.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-select-location"]],decls:26,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"cat-select-list"],[1,"col-lg-4"],[1,"cat-select-list-des"],[1,"cat-select-head"],[1,"cat-seledt-link"],["class","yes-radio",4,"ngFor","ngForOf"],["class","loader-spinner",4,"ngIf"],[1,"yes-radio"],["type","radio","name","province","id","provines","data-provines","22","data-name","Alberta",3,"ngModel","value","ngModelChange","click"],["type","radio","name","region","id","regions","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],["type","radio","name","city","id","cities","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],[1,"loader-spinner"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"div",3),r.Qb(4,"div",0),r.Qb(5,"form"),r.Qb(6,"div",1),r.Qb(7,"div",4),r.Qb(8,"div",5),r.Qb(9,"h2",6),r.Jc(10," Select a Province "),r.Pb(),r.Qb(11,"div",7),r.Hc(12,S,4,3,"label",8),r.Pb(),r.Pb(),r.Pb(),r.Qb(13,"div",4),r.Qb(14,"div",5),r.Qb(15,"h2",6),r.Jc(16," Select a Region "),r.Pb(),r.Qb(17,"div",7),r.Hc(18,N,4,3,"label",8),r.Pb(),r.Pb(),r.Pb(),r.Qb(19,"div",4),r.Qb(20,"div",5),r.Qb(21,"h2",6),r.Jc(22," Select a City "),r.Pb(),r.Qb(23,"div",7),r.Hc(24,k,4,3,"label",8),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Hc(25,J,1,0,"div",9)),2&e&&(r.Cb("submitting",t.submitting),r.yb(12),r.ic("ngForOf",t.countries),r.yb(6),r.ic("ngForOf",t.states),r.yb(6),r.ic("ngForOf",t.cities),r.yb(1),r.ic("ngIf",t.loading))},directives:[l.A,l.o,l.p,i.m,i.n,l.u,l.c,l.n,l.q],styles:['.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.select[_ngcontent-%COMP%]{min-width:32%;flex:1;max-width:48%;height:60px;margin:5px 2px}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;background:#f5f5f5}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}[_nghost-%COMP%]     .p-dropdown-label{display:flex;align-items:center}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.loader-spinner[_ngcontent-%COMP%]{border:10px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:70px;height:70px;-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite;z-index:1000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media screen and (max-width:700px){.select[_ngcontent-%COMP%]{min-width:45%;max-width:unset}}@media screen and (max-width:500px){.select[_ngcontent-%COMP%]{width:100%}}']}),e})(),T=(()=>{class e{constructor(e,t,s,i,n){this.router=e,this.ss=t,this.ar=s,this.ps=i,this.loader=n,this.submitting=!1,this.unsub$=new a.a}ngOnInit(){this.ps.newPage(7),this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad._id||(alert("ad is not initialized"),this.router.navigate(["../select-location"],{relativeTo:this.ar}))}),this.ss.getUserSessionObservable().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.session=e})}buttonEventFromParent(){this.ps.checkSubmition().pipe(Object(o.a)(this.unsub$)).subscribe(e=>{"save-next"==e?this.nextPage():"prev"==e?this.prevPage():this.nextNoSave()})}nextPage(){this.plan instanceof Object&&this.plan.planId&&this.plan._id?this.handle_upgrade():"published"==this.ad.adState?(this.ps.newMessage("success","Ad Saved","The ad was saved with all the changes"),this.router.navigate(["complete/"+this.ad._id],{relativeTo:this.ar})):this.publish()}nextNoSave(){this.router.navigate([this.session.type+"/foodbank/edit/complete/"+this.ad._id],{})}publish(){this.load(),this.ps.publish_normal(this.ad._id).pipe(Object(o.a)(this.unsub$)).subscribe(e=>{e.status?(this.stopload(),this.router.navigate([this.session.type+"/foodbank/edit/complete/"+this.ad._id],{})):(this.stopload(),alert(e.message))},this.errorHandle.bind(this))}handle_upgrade(){this.router.navigate(["/receiver/post/pay-via-card"],{queryParams:{action:"upgrade"}})}prevPage(){this.router.navigate(["../choose-grocery"],{relativeTo:this.ar})}errorHandle(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",null===(t=e.error)||void 0===t?void 0:t.message),this.stopload()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(n.f),r.Kb(b.a),r.Kb(n.a),r.Kb(c.a),r.Kb(d.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-finalize"]],decls:34,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","ad-sub-cat"],[1,"cat-list"],[1,"ad-sub-list","new-lis-sub"],[1,"border-0"],["type","text","placeholder","Enter Order Id",1,"form-control"],[1,"row",2,"display","none"],[1,"col-lg-6"],[1,"price-sec"],[1,"fa","fa-angle-left"],[1,"price-btn","text-right"],[3,"click"],[1,"understand-sec","finalize-sec"],[1,"agree-head"],["href","#"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"form"),r.Qb(4,"div",3),r.Qb(5,"div",4),r.Qb(6,"div",5),r.Qb(7,"ul",6),r.Qb(8,"li"),r.Qb(9,"span"),r.Jc(10,"Order Id"),r.Pb(),r.Pb(),r.Qb(11,"li"),r.Lb(12,"input",7),r.Pb(),r.Pb(),r.Pb(),r.Qb(13,"div",8),r.Qb(14,"div",9),r.Qb(15,"div",10),r.Qb(16,"a"),r.Lb(17,"i",11),r.Pb(),r.Jc(18," All price are listed in "),r.Qb(19,"span"),r.Jc(20,"CAD"),r.Pb(),r.Pb(),r.Pb(),r.Qb(21,"div",9),r.Qb(22,"div",12),r.Qb(23,"a",13),r.Xb("click",(function(){return t.nextPage()})),r.Jc(24," Post Now "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(25,"div",14),r.Qb(26,"div",0),r.Qb(27,"div",15),r.Qb(28,"h5"),r.Jc(29," Prices listed are in CAD "),r.Pb(),r.Qb(30,"p"),r.Jc(31," MyIssues charges wil read MyIssues services on your statement. Need help with payments?"),r.Qb(32,"a",16),r.Jc(33,"Contact Us"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb())},directives:[l.A,l.o,l.p],styles:[""]}),e})();var $=s("RYz/");const j=[{path:"",component:_,children:[{path:"",redirectTo:"select-location",pathMatch:"full"},{path:"select-location",canActivate:[$.a],component:A,data:{moveToStep:2,isStartStep:!0}},{path:"ad-content",canActivate:[$.a],component:M,data:{moveToStep:3}},{path:"photos",canActivate:[$.a],loadChildren:()=>s.e(49).then(s.bind(null,"35ha")).then(e=>e.PhotosModule),data:{moveToStep:8}},{path:"choose-grocery",canActivate:[$.a],component:x,data:{moveToStep:9}},{path:"finalize",canActivate:[$.a],component:T,data:{moveToStep:10}}]}];let E=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(j)],n.j]}),e})();var z=s("qxW0"),I=s("Gxio"),F=s("FMpt");let K=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.b,E,l.j,z.a,h.b,p.b,I.b,F.a,z.a]]}),e})()}}]);