(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{MA2U:function(e,t,i){"use strict";i.r(t),i.d(t,"PhotosModule",(function(){return w}));var a=i("ofXK"),s=i("tyNb"),n=i("mrSG"),o=i("tk/3"),d=i("XNiG"),l=i("1G5W"),c=i("fXoL"),r=i("E+NS"),b=i("5dVO"),g=i("ndxW"),m=i("3Pt+"),h=i("3LrJ");const u=["adImagesModalClose"],p=["identityImagesModalClose"];function f(e,t){if(1&e){const e=c.Rb();c.Qb(0,"ul"),c.Qb(1,"li"),c.Qb(2,"a"),c.Lb(3,"i",45),c.Pb(),c.Pb(),c.Qb(4,"li"),c.Lb(5,"img",46),c.cc(6,"server"),c.Pb(),c.Qb(7,"li"),c.Jc(8),c.Pb(),c.Qb(9,"li"),c.Qb(10,"a",47),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,a=t.index;return c.bc().deleteAdImage(i,a)})),c.Jc(11,"-"),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=t.index;c.yb(5),c.jc("src",c.dc(6,2,e),c.Cc),c.yb(3),c.Lc("Ad Image ",i+1,"/10 ")}}function _(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",48),c.Qb(1,"label",49),c.Lb(2,"img",50),c.Qb(3,"input",51),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,a=t.index;return c.bc().ad_image_selection_change(i.imagePath,a)})),c.Pb(),c.Lb(4,"span",52),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.jc("src",e.imgPath,c.Cc)}}function P(e,t){if(1&e&&(c.Qb(0,"div",53),c.Qb(1,"label",49),c.Lb(2,"img",50),c.cc(3,"server"),c.Pb(),c.Pb()),2&e){const e=t.$implicit;c.yb(2),c.jc("src",c.dc(3,1,e),c.Cc)}}function v(e,t){if(1&e&&(c.Qb(0,"div",48),c.Qb(1,"label",49),c.Lb(2,"img",50),c.Pb(),c.Pb()),2&e){const e=t.$implicit;c.yb(2),c.jc("src",e.imgPath,c.Cc)}}const y=[{path:"",component:(()=>{class e{constructor(e,t,i,a,s){this.ps=e,this.router=t,this.loader=i,this.ar=a,this.ss=s,this.submitting=!1,this.currentSelectedAdImages=[],this.newlyAddedAdImages=0,this.maxAdImages=10,this.currentSelectedIdentityImages=[],this.newlyAddedIdentityImages=0,this.unsub$=new d.a,this.uploadedAdImages=[],this.uploadedIdentityImages=[]}ngOnInit(){this.ps.newPage(5),this.getUserSession(),this.get_ad_data_from_service()}getUserSession(){this.ss.getUserSessionObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.session=e})}get_ad_data_from_service(){this.load(),this.ps.AdObservable().pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.stopload(),this.ad_initialized()&&this.preset_images(e)})}ad_initialized(){var e;return!!(null===(e=this.ad)||void 0===e?void 0:e._id)||(this.ps.newMessage("info","Ad Not Initialized","Please start a new ad by selecting category"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1)}preset_images(e){e.adImages instanceof Array&&(this.uploadedAdImages=e.adImages,this.maxAdImages=10-this.uploadedAdImages.length),e.identityImages instanceof Array&&(this.uploadedIdentityImages=e.identityImages)}uploadAdImages(e){this.load();const t=e;this.ps.save_ad_images(t).pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.handle_ad_image_upload_http_events(e,t)},this.handle_error.bind(this))}handle_ad_image_upload_http_events(e,t){if(e.type==o.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof o.f){const i=e.body;this.stopload(),i.status?this.handle_ad_images_upload_success(i,t):this.ps.newMessage("error","Couldn't Upload",i.message)}}handle_ad_images_upload_success(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedAdImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedAdImages=[],this.adImagesModalCloseButton.nativeElement.click()}uploadIdentityImages(e){if(this.ad.identityImages.length>0&&!confirm("A photo identity image is already Uploaded, Do You want to ReUpload?"))return;const t=e;this.ps.save_identity_images(t).pipe(Object(l.a)(this.unsub$)).subscribe(e=>{this.handle_identity_images_upload_http_events(e,t)},e=>{this.handle_error(e)})}handle_identity_images_upload_http_events(e,t){if(e.type==o.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total),"Uploading.....");else if(e instanceof o.f){const i=e.body;this.stopload(),i.status?this.handle_identity_images_upload_success(i,t):this.ps.newMessage("error","Couldn't Upload",i.message)}}handle_identity_images_upload_success(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedIdentityImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedIdentityImages=[],this.identityImagesModalCloseButton.nativeElement.click()}nextPage(e="../choose-grocery"){this.router.navigate([e],{relativeTo:this.ar.parent})}prevPage(){this.router.navigate(["../../contact-details/step4"],{relativeTo:this.ar})}checkUnuploadedFiles(){return this.currentSelectedAdImages.length>0||this.currentSelectedIdentityImages.length>0}select_new_image_for_ad_images(e,t){return Object(n.a)(this,void 0,void 0,(function*(){this.submitting=!0;const i=e.target.files;for(let e of i)if(this.currentSelectedAdImages.length<=10-this.uploadedAdImages.length){const t=yield this.convertToBase64(e);this.currentSelectedAdImages.push({imgPath:t,blob:e,selected:!0})}else this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");t.reset(),this.submitting=!1}))}select_new_image_for_identity_images(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i=e.target.files[0],a=yield this.convertToBase64(i);this.currentSelectedIdentityImages=[{imgPath:a,blob:i}],t.reset()}))}convertToBase64(e){return new Promise((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t(a.result)},a.onerror=()=>{i("error in parsing")}})}ad_image_selection_change(e,t){var i;if((null===(i=this.currentSelectedAdImages[t])||void 0===i?void 0:i.imgPath)==e)this.currentSelectedAdImages[t].selected=!this.currentSelectedAdImages[t].selected;else{const t=this.currentSelectedAdImages.find(t=>t.imgPath==e);t.selected=!t.selected}}finalize_selected_ad_images(){const e=this.currentSelectedAdImages.map(e=>{if(1==e.selected)return e.blob});this.uploadAdImages(e)}finalize_selected_identity_images(){this.uploadIdentityImages([this.currentSelectedIdentityImages[0].blob])}confirm_to_discard_selected_images(){return!1}deleteAdImage(e,t){this.load(),this.ps.deleteAdImage(e).pipe(Object(l.a)(this.unsub$)).subscribe(i=>{i.status?(this.ps.newMessage("success","Delete Ad Image","Image was deleted from server"),this.remove_image_from_views(e,t),this.ad.adImages=this.uploadedAdImages,this.ps.NewAdData(this.ad)):(this.ps.newMessage("error","Failed To Delete",i.message),this.stopload())},this.handle_error.bind(this))}remove_image_from_views(e,t){if(this.uploadedAdImages[t]==e)this.uploadedAdImages.splice(t,1);else{const t=this.uploadedAdImages.indexOf(e);this.uploadedAdImages.splice(t,1)}}handle_error(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Couldn't Save",e.error.message),this.stopload()}openFileDialog(e){e.click()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){var e,t;this.unsub$.next(!0),this.unsub$.complete(),null===(e=this.adImagesModalCloseButton)||void 0===e||e.nativeElement.click(),null===(t=this.identityImagesModalCloseButton)||void 0===t||t.nativeElement.click()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(r.a),c.Kb(s.f),c.Kb(b.a),c.Kb(s.a),c.Kb(g.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-photos"]],viewQuery:function(e,t){var i;1&e&&(c.Qc(u,!0),c.Qc(p,!0)),2&e&&(c.vc(i=c.Yb())&&(t.adImagesModalCloseButton=i.first),c.vc(i=c.Yb())&&(t.identityImagesModalCloseButton=i.first))},decls:100,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form"],[1,"col-lg-12"],[1,"upload-img","text-center"],["data-toggle","modal","data-name1","photo","id","pic1","data-target",".adImg-modal"],["aria-hidden","true",1,"fa","fa-picture-o"],["data-toggle","modal","data-name","photo","id","pic","data-target",".identityImg-modal"],[1,"img-list"],[1,"img-sub-list"],["id","show_image"],[4,"ngFor","ngForOf"],[1,"top-tip"],[1,"fa","fa-info-circle"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","adImg-modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["adImagesInputForm",""],[1,"modal-header","text-left",2,"border-bottom","none"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["adImagesModalClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"upload-file"],["id","saved-pictures",1,"moderation__grid"],[1,"row","gallery-img-id"],["class","col-sm-2 selectedImages",4,"ngFor","ngForOf"],["id","prepend_div",1,"col-sm-2"],["for","gallery-photo-add",1,"label-head"],["type","file","name","adImages","multiple","","id","gallery-photo-add","accept","image/jpg, image/png",3,"change"],[1,"modal-footer"],["type","button","name","submit",1,"btn","btn-select",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","identityImg-modal","fade","bd-example-modal-lg"],["identityImagesInputForm",""],["identityImagesModalClose",""],["class","col-sm-2 uploadedImages",4,"ngFor","ngForOf"],["for","gallery-photo-add-identity",1,"label-head"],["type","file","name","identityImages","id","gallery-photo-add-identity","accept","image/jpg, image/png",2,"display","none",3,"change"],[1,"fa","fa-bars"],["alt","Images",3,"src"],["href","javascript:void(0)",1,"minus-btn",3,"click"],[1,"col-sm-2","selectedImages"],[1,"image-with-selection"],[1,"image-with-selection__image",3,"src"],["type","checkbox","checked","",1,"image-with-selection__checkbox",3,"click"],[1,"image-with-selection__checkmark"],[1,"col-sm-2","uploadedImages"]],template:function(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form"),c.Qb(4,"div",3),c.Qb(5,"div",0),c.Qb(6,"div",1),c.Qb(7,"div",4),c.Qb(8,"div",5),c.Qb(9,"ul"),c.Qb(10,"li",6),c.Lb(11,"i",7),c.Jc(12," Add Pictures"),c.Qb(13,"span"),c.Jc(14),c.Pb(),c.Pb(),c.Qb(15,"li",8),c.Lb(16,"i",7),c.Jc(17," Profile ID"),c.Qb(18,"span"),c.Jc(19,"Photo"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(20,"div",9),c.Qb(21,"div",10),c.Qb(22,"span",11),c.Hc(23,f,12,4,"ul",12),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(24,"div",13),c.Qb(25,"h3"),c.Lb(26,"i",14),c.Jc(27," Top tip for a successful advertisement "),c.Pb(),c.Qb(28,"p"),c.Jc(29," It's obvious that adding a good photo will increase your ad's potential for success, but it's equally important to have agood number of photos, especially from different angles,perspectives,and locations. Experiment. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(30,"div",15),c.Qb(31,"ul"),c.Qb(32,"li"),c.Qb(33,"button",16),c.Xb("click",(function(){return t.prevPage()})),c.Lb(34,"i",17),c.Jc(35,"Previous step"),c.Pb(),c.Pb(),c.Qb(36,"li"),c.Qb(37,"button",18),c.Xb("click",(function(){return t.nextPage("/"+t.session.type)})),c.Jc(38," Save & Exit "),c.Pb(),c.Pb(),c.Qb(39,"li"),c.Qb(40,"button",18),c.Xb("click",(function(){return t.nextPage()})),c.Jc(41," Next step "),c.Lb(42,"i",19),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(43,"div",20),c.Qb(44,"div",21),c.Qb(45,"div",22),c.Qb(46,"div",22),c.Qb(47,"form",null,23),c.Qb(49,"div",24),c.Qb(50,"h5",25),c.Jc(51,"Select from your computer"),c.Pb(),c.Qb(52,"button",26,27),c.Qb(54,"span",28),c.Jc(55,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(56,"div",29),c.Qb(57,"div",30),c.Qb(58,"div",31),c.Qb(59,"div",32),c.Hc(60,_,5,1,"div",33),c.Qb(61,"div",34),c.Qb(62,"label",35),c.Qb(63,"span"),c.Jc(64,"+"),c.Pb(),c.Jc(65,"Add"),c.Pb(),c.Qb(66,"input",36),c.Xb("change",(function(i){c.zc(e);const a=c.wc(48);return t.select_new_image_for_ad_images(i,a)})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(67,"div",37),c.Qb(68,"button",38),c.Xb("click",(function(){return t.finalize_selected_ad_images()})),c.Jc(69,"Use selected Pics "),c.Lb(70,"i",19),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(71,"div",39),c.Qb(72,"div",21),c.Qb(73,"div",22),c.Qb(74,"div",22),c.Qb(75,"form",null,40),c.Qb(77,"div",24),c.Qb(78,"h5",25),c.Jc(79,"Provide To Passport Like Photos No Head Or Face Covering. For Verification Delivery And Cash Pickups"),c.Pb(),c.Qb(80,"button",26,41),c.Qb(82,"span",28),c.Jc(83,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(84,"div",29),c.Qb(85,"div",30),c.Qb(86,"div",31),c.Qb(87,"div",32),c.Hc(88,P,4,3,"div",42),c.Hc(89,v,3,1,"div",33),c.Qb(90,"div",34),c.Qb(91,"label",43),c.Qb(92,"span"),c.Jc(93,"+"),c.Pb(),c.Jc(94,"Add"),c.Pb(),c.Qb(95,"input",44),c.Xb("change",(function(i){c.zc(e);const a=c.wc(76);return t.select_new_image_for_identity_images(i,a)})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(96,"div",37),c.Qb(97,"button",38),c.Xb("click",(function(){return t.finalize_selected_identity_images()})),c.Jc(98,"Use selected Pics "),c.Lb(99,"i",19),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&e&&(c.Cb("submitting",t.submitting),c.yb(14),c.Lc("",10-t.uploadedAdImages.length," Left"),c.yb(9),c.ic("ngForOf",t.uploadedAdImages),c.yb(37),c.ic("ngForOf",t.currentSelectedAdImages),c.yb(28),c.ic("ngForOf",t.uploadedIdentityImages),c.yb(1),c.ic("ngForOf",t.currentSelectedIdentityImages))},directives:[m.A,m.o,m.p,a.m],pipes:[h.a],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}button.btn.btn-select[_ngcontent-%COMP%]{color:#fff;font-weight:700;background:#01768a;padding:9px 30px 5px}.image-with-selection__checkmark[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:18px;height:18px;top:4.5px;right:4.5px;border:1.5px solid hsla(0,0%,100%,.9);background-color:rgba(0,0,0,.5);z-index:10;border-radius:50%}.image-with-selection__checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute}.image-with-selection__checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]:after{left:6.5px;top:3.5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.image-with-selection[_ngcontent-%COMP%]{width:100%;border-radius:6px;overflow:hidden;display:flex;position:relative;margin-right:15px;margin-bottom:15px}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]{background-color:#58a688;box-shadow:0 2px 9px 0 rgba(0,0,0,.76);border:none}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:4px 0 0;margin-top:1px\\9;line-height:normal}.image-with-selection__image[_ngcontent-%COMP%]{width:100px;height:100px}']}),e})()}];let I=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[s.j.forChild(y)],s.j]}),e})();var Q=i("qxW0");let w=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[a.b,I,m.j,Q.a]]}),e})()},mrSG:function(e,t,i){"use strict";function a(e,t,i,a){return new(i||(i=Promise))((function(s,n){function o(e){try{l(a.next(e))}catch(t){n(t)}}function d(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,d)}l((a=a.apply(e,t||[])).next())}))}i.d(t,"a",(function(){return a}))}}]);