(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{LJki:function(e,t,i){"use strict";i.r(t),i.d(t,"ReceiverPostModule",(function(){return fe}));var n=i("ofXK"),a=i("tyNb"),s=i("7zfz"),o=i("XNiG"),d=i("1G5W"),c=i("fXoL"),r=i("wAps"),l=i("Gxio");let b=(()=>{class e{constructor(e,t,i){this.ms=e,this.ps=t,this.router=i,this.activeIndex=1,this.currentPage=2,this.unsub$=new o.a,this.items=[{label:"Category",routerLink:"select-category"},{label:"Location",routerLink:"select-location"},{label:"Content",routerLink:"ad-content"},{label:"Images",routerLink:"upload-images"},{label:"contact",routerLink:"user-details"},{label:"Upgrades",routerLink:"upgrades"},{label:"finalize",routerLink:"finalize"}]}ngOnInit(){this.ps.lock=!1,this.ps.messageObserver().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.ms.add(e)}),this.ps.page$.asObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.currentPage=e,console.log(e)})}new_ad(e){this.currentAd=e}seePreview(){this.ps.lock=!0,this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{if(e._id)return this.router.navigate(["/ads/full"],{queryParams:{mode:"preview"}});this.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting a category")})}ngOnDestroy(){this.ps.NewAdData(null),this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(s.h),c.Kb(r.a),c.Kb(a.f))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-receiver-post"]],features:[c.xb([s.h])],decls:140,vars:28,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","py-5"],[1,"tabs","col-lg-9","mx-auto","pb-5"],[1,"container-fluid","mb-4",2,"padding","0px"],[1,""],[1,"step-menu__list"],[1,"step-menu__item"],[1,"step-menu__link"],[1,"step-menu__icon","active"],[1,"number-1"],[1,"step-menu__description"],[1,"number-2"],[1,"number-4"],[1,"number-5"],[1,"number-6"],[1,"btn","btn-primary",2,"min-width","150px !important",3,"click"],[1,"fa","fa-eye"],[1,"agree-sec"],[1,"container"],[1,"agree-head"],["href","javascript:void(0);","data-toggle","modal","data-target","#tcModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#ppModal","data-dismiss","modal"],["href","javascript:void(0);","data-toggle","modal","data-target","#rulesModal","data-dismiss","modal"],[1,"understand-sec"],["id","tcModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],["id","ppModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"],["id","rulesModal","aria-labelledby","tcModal","aria-hidden","true",1,"modal","fade","bd-example-modal-lg"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Lb(3,"p-toast"),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"ul",6),c.Qb(8,"li",7),c.Qb(9,"a",8),c.Qb(10,"span",9),c.Qb(11,"i",10),c.Jc(12,"1"),c.Pb(),c.Pb(),c.Qb(13,"span",11),c.Jc(14,"Category"),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"li",7),c.Qb(16,"a",8),c.Qb(17,"span",9),c.Qb(18,"i",10),c.Jc(19,"2"),c.Pb(),c.Pb(),c.Qb(20,"span",11),c.Jc(21,"Region"),c.Pb(),c.Pb(),c.Pb(),c.Qb(22,"li",7),c.Qb(23,"a",8),c.Qb(24,"span",9),c.Qb(25,"i",12),c.Jc(26,"3"),c.Pb(),c.Pb(),c.Qb(27,"span",11),c.Jc(28,"Description"),c.Pb(),c.Pb(),c.Pb(),c.Qb(29,"li",7),c.Qb(30,"a",8),c.Qb(31,"span",9),c.Qb(32,"i",13),c.Jc(33,"4"),c.Pb(),c.Pb(),c.Qb(34,"span",11),c.Jc(35,"Upload "),c.Lb(36,"br"),c.Jc(37,"Your Images"),c.Pb(),c.Pb(),c.Pb(),c.Qb(38,"li",7),c.Qb(39,"a",8),c.Qb(40,"span",9),c.Qb(41,"i",12),c.Jc(42,"5"),c.Pb(),c.Pb(),c.Qb(43,"span",11),c.Jc(44," Contact Details"),c.Pb(),c.Pb(),c.Pb(),c.Qb(45,"li",7),c.Qb(46,"a",8),c.Qb(47,"span",9),c.Qb(48,"i",14),c.Jc(49,"6"),c.Pb(),c.Pb(),c.Qb(50,"span",11),c.Jc(51,"Choose "),c.Lb(52,"br"),c.Jc(53,"Your Upgrades"),c.Pb(),c.Pb(),c.Pb(),c.Qb(54,"li",7),c.Qb(55,"a",8),c.Qb(56,"span",9),c.Qb(57,"i",15),c.Jc(58,"7"),c.Pb(),c.Pb(),c.Qb(59,"span",11),c.Jc(60,"Finalize "),c.Lb(61,"br"),c.Jc(62,"& Post"),c.Pb(),c.Pb(),c.Pb(),c.Qb(63,"li"),c.Qb(64,"a",16),c.Xb("click",(function(){return t.seePreview()})),c.Lb(65,"i",17),c.Jc(66," Preview Ad"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Lb(67,"router-outlet"),c.Qb(68,"div",18),c.Qb(69,"div",19),c.Qb(70,"div",20),c.Qb(71,"h4"),c.Jc(72," You agree to the following when on MyIssues.ca "),c.Pb(),c.Qb(73,"p"),c.Jc(74," I agree to the "),c.Qb(75,"a",21),c.Jc(76,"Terms & Conditions,"),c.Pb(),c.Jc(77,"\xa0 "),c.Qb(78,"a",22),c.Jc(79,"Privacy Policy,"),c.Pb(),c.Jc(80," and "),c.Qb(81,"a",23),c.Jc(82,"Rules"),c.Pb(),c.Jc(83," of this site. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(84,"div",24),c.Qb(85,"div",19),c.Qb(86,"div",20),c.Qb(87,"p"),c.Jc(88," You understand and agree that any posts which do not comply with these terms aforementioned may result in the removal of the post without refund or warning. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(89,"div",25),c.Qb(90,"div",26),c.Qb(91,"div",27),c.Qb(92,"div",28),c.Qb(93,"h2",29),c.Jc(94,"Terms & Condtition"),c.Pb(),c.Qb(95,"button",30),c.Qb(96,"span",31),c.Jc(97,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(98,"div",32),c.Qb(99,"div",33),c.Qb(100,"div",1),c.Qb(101,"div",34),c.Qb(102,"p"),c.Jc(103," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Qb(104,"p"),c.Jc(105," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(106,"div",35),c.Qb(107,"div",26),c.Qb(108,"div",27),c.Qb(109,"div",28),c.Qb(110,"h2",29),c.Jc(111,"Privacy Policy"),c.Pb(),c.Qb(112,"button",30),c.Qb(113,"span",31),c.Jc(114,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(115,"div",32),c.Qb(116,"div",33),c.Qb(117,"div",1),c.Qb(118,"div",34),c.Qb(119,"p"),c.Jc(120," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Qb(121,"p"),c.Jc(122," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(123,"div",36),c.Qb(124,"div",26),c.Qb(125,"div",27),c.Qb(126,"div",28),c.Qb(127,"h2",29),c.Jc(128,"Rules"),c.Pb(),c.Qb(129,"button",30),c.Qb(130,"span",31),c.Jc(131,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(132,"div",32),c.Qb(133,"div",33),c.Qb(134,"div",1),c.Qb(135,"div",34),c.Qb(136,"p"),c.Jc(137," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Qb(138,"p"),c.Jc(139," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(8),c.Cb("active",1==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>1),c.yb(5),c.Cb("active",2==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>2),c.yb(5),c.Cb("active",3==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>3),c.yb(5),c.Cb("active",4==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>4),c.yb(7),c.Cb("active",5==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>5),c.yb(5),c.Cb("active",6==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>6),c.yb(7),c.Cb("active",7==t.currentPage),c.yb(2),c.Cb("active1",t.currentPage>7))},directives:[l.a,a.k],styles:['.tabs[_ngcontent-%COMP%]{padding:15px 0}.col-12[_ngcontent-%COMP%]{padding:0;background:#fcfdf8}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px rgba(0,0,0,.3)}[_nghost-%COMP%]     .p-card{box-shadow:0 0 4px rgba(0,0,0,.3)}[_nghost-%COMP%]     .p-steps{width:98%;margin:0 auto;border-radius:7px}[_nghost-%COMP%]     .p-steps .p-steps-item{padding-top:5px;padding-bottom:5px;overflow:hidden!important}[_nghost-%COMP%]     .p-steps .p-steps-current{overflow:hidden!important}[_nghost-%COMP%]     .p-steps .p-steps-item:before{bottom:0;top:0;background:#ccc;opacity:1%;color:#000}[_nghost-%COMP%]     .p-steps .p-steps-current:before{content:"";opacity:0}@media screen and (max-width:600px){[_nghost-%COMP%]     .p-steps{width:900px!important}.py-3[_ngcontent-%COMP%]{overflow:scroll!important}}',".step-menu__list[_ngcontent-%COMP%] {\n                        display: -ms-flexbox;\n                        display: flex;\n                        background: #f2f2ed;\n                        border: 1px solid #ebebe6;\n                        margin: 0;\n                        list-style: none;\n                        border-radius: 6px;\n                        box-shadow: 0 1px 0 0 #fff, inset 0 1px 3px -2px rgba(0,0,0,.3);\n                        overflow: auto;\n                        padding-left: 0px;\n                        margin-top:20px;\n                    }\n                \n                    ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\n                    background: #00000017;\n                }\n                ul.step-menu__list[_ngcontent-%COMP%]::-webkit-scrollbar {\n                    height: 7px;\n                    backface-visibility: visible;\n                    opacity: 1;\n                }\n                    .step-menu__item.active[_ngcontent-%COMP%] {\n                        background: #fff;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:first-child {\n                        box-shadow: none;\n                        border-radius: 5px 0 0 5px;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%] {\n                        float: left;\n                        padding: 15px 20px 15px 15px;\n                        position: relative;\n                        \n                        flex-grow: 1;\n                        white-space: nowrap;\n                        \n                        user-select: none;\n                    }\n                    .step-menu__item[_ngcontent-%COMP%]:hover{\n                        background: #fff;\n                        color: #575757;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%]:hover{\n                        color: #575757;\n                    }\n                    .step-menu__item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n                        color: #5e5e5e;\n                    }\n                    .step-menu__link[_ngcontent-%COMP%] {\n                        display: flex;\n                        align-items: center;\n                        line-height: 17px;\n                        text-decoration: none;\n                        font-weight: 700;\n                        font-size: 14px;\n                        color: #b8b8b4;\n                    }\n                    \n                    .step-menu__icon[_ngcontent-%COMP%] {\n                        float: left;\n                        margin-right: 8px;\n                        width: 32px;\n                        height: 32px;\n                        border-radius: 75px;\n                        flex-shrink: 0;\n                        display: -ms-flexbox;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        line-height: 1;\n                        color: #fff;\n                        background: #5e5e5e;\n                    }\n                    .step-menu__icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%] {\n                        background: #b8b8b4;\n                        color: #fff;\n                    }\n                    .step-menu__description[_ngcontent-%COMP%] {\n                        float: left;\n                    }\n                    .step-menu__icon.unpassed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n                        font-style: normal;\n                        font-size: 20px;\n                    }\n                    .step-menu__list[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%], .rewards[_ngcontent-%COMP%]   .btn.btn-black[_ngcontent-%COMP%]:hover {\n                        background-color: #6d95aa;\n                        border-color: #6d95aa;\n                        margin: 0 8px;\n                        margin-top: 10px;\n                        padding: 0 12px;\n                        color: #fff;\n                        font-weight: 700;\n                        font-size: 16px;\n                        line-height: 40px;\n                        height: 42px;\n                        vertical-align: top;\n                    }\n                    .step-menu__icon.active1[_ngcontent-%COMP%]{\n                        background: green;\n                    }"]}),e})();var p=i("ndxW"),u=i("5dVO"),h=i("3Pt+"),g=i("bhfF"),m=i("3LrJ");const P=["modalButton"];function f(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",24),c.Qb(1,"li",25),c.Qb(2,"a",26),c.Xb("click",(function(){c.zc(e);const t=c.bc().$implicit;return c.bc().select_category(t._id)})),c.Lb(3,"img",27),c.cc(4,"server"),c.Lb(5,"img",28),c.cc(6,"server"),c.Jc(7),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=c.bc().$implicit,t=c.bc();c.yb(1),c.Cb("active",e._id==t.selectedCategory),c.yb(2),c.jc("src",e.imagePath?c.dc(4,7,e.imagePath):"assets/images/banner1.jpg",c.Cc),c.jc("alt",e.title),c.yb(2),c.jc("src",e.imagePath?c.dc(6,9,e.imagePath):"assets/images/banner1.jpg",c.Cc),c.jc("alt",e.title),c.yb(2),c.Lc(" ",e.title," ")}}function v(e,t){1&e&&(c.Ob(0),c.Hc(1,f,8,11,"ng-template",23),c.Nb())}function y(e,t){if(1&e){const e=c.Rb();c.Ob(0),c.Qb(1,"div",29),c.Qb(2,"div",30),c.Xb("click",(function(){c.zc(e);const i=t.$implicit;return c.bc().select_category(i._id)})),c.Qb(3,"a"),c.Jc(4),c.Pb(),c.Pb(),c.Pb(),c.Nb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(2),c.Cb("active",i.selectedCategory==e._id),c.yb(2),c.Lc(" ",e.title,"\t")}}let Q=(()=>{class e{constructor(e,t,i,n,a){this.ps=e,this.router=t,this.ar=i,this.ss=n,this.loader=a,this.customOptions={loop:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:1},740:{items:3},940:{items:4},1100:{items:6}},nav:!0,autoWidth:!0},this.submitting=!1,this.duplicateAdId=null,this.unsub$=new o.a,this.selectedCategory=void 0}ngOnInit(){this.ps.newPage(1),this.getCategories().then(this.checkAction.bind(this)),this.ss.getUserSessionObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e._id||(this.ps.newMessage("error","Login Needed","Please login to perform this action"),this.router.navigate(["/"]))}),this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad instanceof Object&&this.ad.categoryId&&(this.selectedCategory=this.ad.categoryId)})}checkAction(){}getCategories(){return new Promise((e,t)=>{this.ps.getCategories().pipe(Object(d.a)(this.unsub$)).subscribe(i=>{if(i.status)return this.categories=i.data.categories,e(!0);this.ps.newMessage("error","Failed","couldn't fetch categories"),t(!1)},e=>{this.handle_error(e),t(!1)})})}select_category(e){if(this.selectedCategory=e,this.selected_category_is_foodbank(this.selectedCategory))return;let t=null,i=null;if(this.ad instanceof Object&&this.ad._id){if(this.selectedCategory==this.ad.categoryId)return this.nextPage();if(!confirm("category is already selected, do you want to change ad category?"))return this.selectedCategory=this.ad.categoryId,!1;t=this.ad._id,i="update-category"}this.load(),this.ps.selectCategory(this.selectedCategory,t).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{if(this.stopload(),e.status)return"update-category"==i?(this.ad.categoryId=e.data.categoryId,this.ad.categoryName=e.data.categoryName,e.data.completedSteps instanceof Object&&(this.ad.completedSteps=e.data.completedSteps),this.ps.NewAdData(this.ad)):this.ps.NewAdData(e.data),this.nextPage();this.handle_selection_failure(e,t)},e=>{this.handle_error(e),t&&(this.selectedCategory=this.ad.categoryId)})}handle_selection_failure(e,t){if(e.code){if("duplicate-record"==e.code)return this.duplicateAdId=e.data.adId,this.handle_duplicate();"no-record"==e.code?this.ps.newMessage("info","Category Not Found",e.message+", this category might be deleted"):this.ps.newMessage("error","Error",e.message)}t&&(this.selectedCategory=this.ad.categoryId)}nextPage(){var e;if(!this.selectedCategory)return this.ps.newMessage("error","No Category Selected","Please select a category");if(this.selectedCategory==(null===(e=this.ad)||void 0===e?void 0:e.categoryId)){if(this.ps.newMessage("success","Category Saved","selected category was saved"),this.selected_category_is_foodbank(this.ad.categoryName))return;this.router.navigate(["/agency/post/select-location"])}else this.select_category(this.selectedCategory)}selected_category_is_foodbank(e){const t=this.categories.find(t=>t._id==e);return"foodbank"==(null==t?void 0:t.title.toLowerCase())&&(setTimeout(()=>{this.router.navigate(["/agency/foodbank/steps/select-location"])},0),!0)}editAd(e){this.load(),this.ps.get_ad(e).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?this.ps.NewAdData(e.data):alert(e.message)},this.handle_error.bind(this))}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}handle_duplicate(){this.modalButton.nativeElement.click()}delete_previous(){this.load(),this.ps.delete_with_category(this.selectedCategory,this.duplicateAdId).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.stopload(),this.modalButton.nativeElement.click(),e.status?(this.ps.newMessage("success","Previous Ad Deleted","Previous Ad was deleted"),this.select_category(this.selectedCategory)):this.ps.newMessage("error","Couldn't Delete Ad",e.message)},e=>{this.modalButton.nativeElement.click(),this.handle_error(e)})}handle_error(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",""+((null===(t=e.error)||void 0===t?void 0:t.message)||e.message)),this.stopload()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(r.a),c.Kb(a.f),c.Kb(a.a),c.Kb(p.a),c.Kb(u.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-select-category"]],viewQuery:function(e,t){var i;1&e&&c.Qc(P,!0),2&e&&c.vc(i=c.Yb())&&(t.modalButton=i.first)},decls:34,vars:5,consts:[["type","button","data-toggle","modal","data-target","#exampleModalCenter",1,"btn","btn-primary",2,"display","none"],["modalButton",""],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-header","cat-header",2,"padding","0px"],[1,"container-fluid",2,"padding","0px"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form",2,"margin-top","0px"],[1,"col-lg-12"],[1,"cat-list"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,"item"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"img-white","category_img",3,"src","alt"],[1,"img-red","category_img",3,"src","alt"],[1,"col-lg-3","col-md-6"],[1,"tab-list",2,"height","55px",3,"click"]],template:function(e,t){1&e&&(c.Qb(0,"button",0,1),c.Jc(2," Launch demo modal "),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"h5",6),c.Jc(8,"Action"),c.Pb(),c.Qb(9,"button",7),c.Qb(10,"span",8),c.Jc(11,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(12,"div",9),c.Jc(13," An Ad with this category is already present, Do you want to delete it and continue with this ad? "),c.Pb(),c.Qb(14,"div",10),c.Qb(15,"button",11),c.Jc(16,"Close"),c.Pb(),c.Qb(17,"button",12),c.Xb("click",(function(){return t.delete_previous()})),c.Jc(18,"Delete"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(19,"section",13),c.Qb(20,"div",14),c.Qb(21,"div",15),c.Qb(22,"div",16),c.Qb(23,"div",17),c.Qb(24,"form"),c.Qb(25,"div",15),c.Qb(26,"div",18),c.Qb(27,"div",19),c.Qb(28,"ul",20),c.Qb(29,"owl-carousel-o",21),c.Hc(30,v,2,0,"ng-container",22),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"div",19),c.Qb(32,"div",15),c.Hc(33,y,5,3,"ng-container",22),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(19),c.Cb("submitting",t.submitting),c.yb(10),c.ic("options",t.customOptions),c.yb(1),c.ic("ngForOf",t.categories),c.yb(3),c.ic("ngForOf",t.categories))},directives:[h.A,h.o,h.p,g.a,n.m,g.c],pipes:[m.a],styles:['.categories[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.categories[_ngcontent-%COMP%], .category[_ngcontent-%COMP%]{display:flex;justify-content:center}.category[_ngcontent-%COMP%]{min-width:16.66%;max-width:30%;height:140px;position:relative;padding:2px;margin:2px;flex-direction:column;align-items:center;background:#f5f5f5;overflow:hidden}.category[_ngcontent-%COMP%]:hover{cursor:pointer}.category[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;left:0;bottom:0;height:2px;background-color:#962179;transition:.4s;width:0}.category[_ngcontent-%COMP%]:hover:after{width:100%}.category[_ngcontent-%COMP%]:hover   .category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.category-image[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;overflow:hidden;margin:0 auto}.category-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.category-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-size:20px;font-weight:bolder;padding:0;margin:0}.category.active[_ngcontent-%COMP%]:after{width:100%}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bd4630!important}.cat-list[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.tab-list.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tab-list[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#bd4630}.subtitle[_ngcontent-%COMP%]{font-weight:400;color:#6c757d}.subtitle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:700!important}.category_img[_ngcontent-%COMP%]{height:100px!important;width:100px!important;border-radius:50%}@media screen and (max-width:700px){.category[_ngcontent-%COMP%]{flex:1;max-width:unset}}@media screen and (max-width:500px){.category[_ngcontent-%COMP%]{min-width:45%}}']}),e})();var _=i("DPk/");function w(e,t){if(1&e){const e=c.Rb();c.Qb(0,"label",18),c.Qb(1,"input",19),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().selectedCountry=t}))("click",(function(){c.zc(e);const i=t.$implicit;return c.bc().change_country(i._id)})),c.Pb(),c.Qb(2,"span"),c.Jc(3),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(1),c.jc("value",e._id),c.ic("ngModel",i.selectedCountry),c.yb(2),c.Kc(e.countryName)}}function C(e,t){if(1&e){const e=c.Rb();c.Qb(0,"label",18),c.Qb(1,"input",20),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().selectedState=t}))("click",(function(){c.zc(e);const i=t.$implicit;return c.bc().change_state(i.stateName)})),c.Pb(),c.Qb(2,"span"),c.Jc(3),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(1),c.jc("value",e.stateName),c.ic("ngModel",i.selectedState),c.yb(2),c.Kc(e.stateName)}}function M(e,t){if(1&e){const e=c.Rb();c.Qb(0,"label",18),c.Qb(1,"input",21),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().selectedCity=t}))("click",(function(){c.zc(e);const i=t.$implicit;return c.bc().change_city(i.cityName)})),c.Pb(),c.Qb(2,"span"),c.Jc(3),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(1),c.jc("value",e.cityName),c.ic("ngModel",i.selectedCity),c.yb(2),c.Kc(e.cityName)}}function x(e,t){1&e&&c.Lb(0,"div",22)}let O=(()=>{class e{constructor(e,t,i,n,a,s){this.ds=e,this.ps=t,this.router=i,this.loader=n,this.ar=a,this.ss=s,this.submitting=!1,this.loading=!1,this.saved=!1,this.unsub$=new o.a,this.cities=[],this.states=[],this.countries=[],this.selectedCountry="",this.selectedState="",this.selectedCity=""}ngOnInit(){this.ps.newPage(2),this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.ad=e}),this.check_session(),this.check_action(),this.get_country().then(()=>{this.prefill_selected_options()})}check_session(){this.ss.getUserSessionObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e._id||(this.ps.newMessage("error","Login Needed","Please login to perform this action"),this.router.navigate(["/"]))})}check_action(){this.ar.queryParams.subscribe(e=>{"edit"==e.action&&e.adId&&this.getAdData(e.adId)})}prefill_selected_options(){this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{(null==e?void 0:e.country)&&this.prefill_country(e)})}prefill_country(e){const t=this.countries.find(t=>e.country==t.countryName);this.selectedCountry=t?t._id:"",this.selectedCountryName=t?t.countryName:"",this.prefill_state(t,e)}prefill_state(e,t){this.states=e?e.states:[],t.state&&(this.selectedState=t.state,this.prefill_city(t))}prefill_city(e){this.change_state(e.state).then(()=>{this.ad.city&&(this.selectedCity=e.city,this.saved=!0)})}getAdData(e){this.ps.get_ad(e).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e.status?this.ps.NewAdData(e.data):this.ps.newMessage("error","No Data",e.message)},this.handle_error.bind(this))}get_country(){return new Promise((e,t)=>{this.ds.get_countries().pipe(Object(d.a)(this.unsub$)).subscribe(i=>i.status?(this.countries=i.data,e(!0)):(this.ps.newMessage("error","Country Fetch Failed",i.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}change_country(e){this.selectedCountry=e;const t=this.countries.find(e=>e._id==this.selectedCountry);this.states=t.states,this.selectedCountryName=t.countryName,this.selectedState=null,this.saved=!1}change_state(e){return this.saved=!1,this.loading=!0,this.selectedState=e,new Promise((e,t)=>this.get_cities_from_server(e,t))}get_cities_from_server(e,t){this.ds.get_cities(this.selectedCountry,this.selectedState).pipe(Object(d.a)(this.unsub$)).subscribe(i=>(this.loading=!1,i.status?(this.cities=i.data[0].cities,e(!0)):(console.log(i),this.ps.newMessage("error","Cities Fetch Failed",i.message),t(!1))),e=>(this.handle_error(e),t(!1)))}change_city(e){this.saved=!1,this.selectedCity=e,this.nextPage()}save_location(){this.emptySelect()||(this.load(),this.ps.selectLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?(this.ps.NewAdData(e.data),this.ps.newMessage("success","Ad Created","New Ad was created."),this.saved=!0,this.nextPage()):this.ps.newMessage("error","Couldn't Save",e.message)},this.handle_error.bind(this)))}update_location(){this.emptySelect()||(this.load(),this.ps.updateLocation(this.selectedCountry,this.selectedCountryName,this.selectedState,this.selectedCity).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.stopload(),e.status?(this.ps.NewAdData(e.data),this.ps.newMessage("success","Location Updated","Location was updated"),this.saved=!0,this.nextPage()):this.ps.newMessage("error","Couldn't Update",e.message)},this.handle_error.bind(this)))}handle_error(e){e instanceof ErrorEvent?this.ps.newMessage("error","Failed","couldn't connect to the url"):this.ps.newMessage("error","Failed",`${e.status}: ${e.error.message}`),this.stopload()}prevPage(){this.unsavedChangesExists()||this.router.navigate(["/agency/post/select-category"])}nextPage(){this.saved&&!this.UnsavedChangesExists()?this.router.navigate(["/agency/post/ad-content"]):this.ad&&this.ad._id?this.update_location():this.save_location()}unsavedChangesExists(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}emptySelect(){if(""==this.selectedCountry)this.ps.newMessage("info","Country Not Selected","please Select a country");else if(""==this.selectedState)this.ps.newMessage("info","State Not Selected","Please select a state");else{if(""!=this.selectedCity)return!1;this.ps.newMessage("info","City Not Selected","Please select a city")}return!0}UnsavedChangesExists(){return!(1!=this.saved||!(this.ad.country||this.ad.state||this.ad.city)||this.ad.country==this.selectedCountryName&&this.ad.state==this.selectedState&&this.ad.city==this.selectedCity||(this.ps.newMessage("info","Unsaved Changes","You have unsaved changes, discard them?"),0))}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(_.a),c.Kb(r.a),c.Kb(a.f),c.Kb(u.a),c.Kb(a.a),c.Kb(p.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-location"]],decls:41,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","cat-form"],[1,"col-lg-12"],[1,"cat-list"],[1,"cat-sub-list"],[3,"click"],["src","assets/images/left-arrow.png","alt","Icons"],["src","assets/images/no-image.jpg","alt","Icons",2,"width","50px","height","50px","border-radius","50%"],[2,"color","red"],[1,"cat-select-list"],[1,"col-lg-4"],[1,"cat-select-list-des"],[1,"cat-select-head"],[1,"cat-seledt-link"],["class","yes-radio",4,"ngFor","ngForOf"],["class","loader-spinner",4,"ngIf"],[1,"yes-radio"],["type","radio","name","province","id","provines","data-provines","22","data-name","Alberta",3,"ngModel","value","ngModelChange","click"],["type","radio","name","region","id","regions","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],["type","radio","name","city","id","cities","data-provines","22","data-name","Alberta",3,"value","ngModel","ngModelChange","click"],[1,"loader-spinner"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"form"),c.Qb(5,"div",0),c.Qb(6,"div",1),c.Qb(7,"div",4),c.Qb(8,"div",5),c.Qb(9,"ul",6),c.Qb(10,"li"),c.Qb(11,"a",7),c.Xb("click",(function(){return t.prevPage()})),c.Lb(12,"img",8),c.Pb(),c.Pb(),c.Qb(13,"li"),c.Lb(14,"img",9),c.Qb(15,"span",10),c.Jc(16,"Posting in"),c.Pb(),c.Jc(17),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(18,"div",11),c.Qb(19,"div",0),c.Qb(20,"form"),c.Qb(21,"div",1),c.Qb(22,"div",12),c.Qb(23,"div",13),c.Qb(24,"h2",14),c.Jc(25," Select a Province "),c.Pb(),c.Qb(26,"div",15),c.Hc(27,w,4,3,"label",16),c.Pb(),c.Pb(),c.Pb(),c.Qb(28,"div",12),c.Qb(29,"div",13),c.Qb(30,"h2",14),c.Jc(31," Select a Region "),c.Pb(),c.Qb(32,"div",15),c.Hc(33,C,4,3,"label",16),c.Pb(),c.Pb(),c.Pb(),c.Qb(34,"div",12),c.Qb(35,"div",13),c.Qb(36,"h2",14),c.Jc(37," Select a City "),c.Pb(),c.Qb(38,"div",15),c.Hc(39,M,4,3,"label",16),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Hc(40,x,1,0,"div",17)),2&e&&(c.Cb("submitting",t.submitting),c.yb(17),c.Lc(" ",t.ad.categoryName,". "),c.yb(10),c.ic("ngForOf",t.countries),c.yb(6),c.ic("ngForOf",t.states),c.yb(6),c.ic("ngForOf",t.cities),c.yb(1),c.ic("ngIf",t.loading))},directives:[h.A,h.o,h.p,n.m,n.n,h.u,h.c,h.n,h.q],styles:['.selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.select[_ngcontent-%COMP%]{min-width:32%;flex:1;max-width:48%;height:60px;margin:5px 2px}[_nghost-%COMP%]     .p-dropdown{width:100%;height:100%;background:#f5f5f5}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}[_nghost-%COMP%]     .p-dropdown-label{display:flex;align-items:center}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.loader-spinner[_ngcontent-%COMP%]{border:10px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:70px;height:70px;-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite;z-index:1000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media screen and (max-width:700px){.select[_ngcontent-%COMP%]{min-width:45%;max-width:unset}}@media screen and (max-width:500px){.select[_ngcontent-%COMP%]{width:100%}}']}),e})();var k=i("QIUk"),I=i("dgC2");function J(e,t){1&e&&c.Jc(0," Ad Content ")}function A(e,t){1&e&&c.Jc(0," Enter relevant ad content here. ")}function L(e,t){1&e&&(c.Qb(0,"div",34),c.Qb(1,"span",35),c.Jc(2,"Please enter an advertisement title."),c.Pb(),c.Pb())}function B(e,t){1&e&&(c.Qb(0,"div",34),c.Qb(1,"span",35),c.Jc(2,"Please fill Agency Title here."),c.Pb(),c.Pb())}function $(e,t){1&e&&(c.Qb(0,"div",34),c.Qb(1,"span",35),c.Jc(2,"Please enter a valid year of establishment"),c.Pb(),c.Pb())}function S(e,t){1&e&&(c.Qb(0,"div",34),c.Qb(1,"span",35),c.Jc(2,"Please enter a tag line"),c.Pb(),c.Pb())}const N=function(){return{height:"320px","font-size":"16px"}};function j(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",12),c.Qb(1,"label",13),c.Jc(2,"Advertisement Title"),c.Pb(),c.Qb(3,"p",14),c.Jc(4),c.Pb(),c.Qb(5,"div",15),c.Qb(6,"input",16,17),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().adContent.adTitle=t})),c.Pb(),c.Lb(8,"img",18),c.Pb(),c.Hc(9,L,3,0,"div",19),c.Pb(),c.Qb(10,"div",20),c.Qb(11,"div",21),c.Qb(12,"label",22),c.Jc(13,"Organization Name"),c.Pb(),c.Qb(14,"input",23,24),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().adContent.agencyTitle=t})),c.Pb(),c.Hc(16,B,3,0,"div",19),c.Pb(),c.Qb(17,"div",25),c.Qb(18,"label",26),c.Jc(19,"Year Established"),c.Pb(),c.Qb(20,"input",27,28),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().adContent.yearEstablished=t})),c.Pb(),c.Hc(22,$,3,0,"div",19),c.Pb(),c.Pb(),c.Qb(23,"div",21),c.Qb(24,"label",29),c.Jc(25,"Tag Line"),c.Pb(),c.Qb(26,"input",30,31),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().adContent.tagline=t})),c.Pb(),c.Hc(28,S,3,0,"div",19),c.Pb(),c.Qb(29,"div",12),c.Qb(30,"label",32),c.Jc(31,"Description"),c.Pb(),c.Qb(32,"p-editor",33),c.Xb("ngModelChange",(function(t){return c.zc(e),c.bc().adContent.description=t})),c.Pb(),c.Pb()}if(2&e){const e=c.wc(7),t=c.wc(15),i=c.wc(21),n=c.wc(27),a=c.bc(),s=c.wc(1);c.yb(4),c.Lc("",100-((null==a.adContent.adTitle?null:a.adContent.adTitle.length)||0)," characters left"),c.yb(2),c.ic("ngModel",a.adContent.adTitle),c.yb(3),c.ic("ngIf",s.submitted&&e.invalid),c.yb(5),c.ic("ngModel",a.adContent.agencyTitle),c.yb(2),c.ic("ngIf",s.submitted&&t.invalid),c.yb(4),c.ic("ngModel",a.adContent.yearEstablished),c.yb(2),c.ic("ngIf",s.submitted&&i.invalid),c.yb(4),c.ic("ngModel",a.adContent.tagline),c.yb(2),c.ic("ngIf",s.submitted&&n.invalid),c.yb(4),c.Fc(c.mc(12,N)),c.ic("ngModel",a.adContent.description)}}let F=(()=>{class e{constructor(e,t,i,n,a){this.ren=e,this.ps=t,this.router=i,this.loader=n,this.ss=a,this.unsub$=new o.a,this.submitting=!1,this.saved=!1,this.adContent={adTitle:"",agencyTitle:"",description:"",tagline:"",yearEstablished:null}}ngOnInit(){this.ps.newPage(3),this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.ad=e,this.ad._id||(this.ps.newMessage("info","Ad Not Initialized","Please start an ad by selecting category"),this.router.navigate(["/agency/post/select-location"])),this.prefill_ad_data(e)}),this.ss.getUserSessionObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>this.adContent.agencyTitle=e.agencyTitle)}prefill_ad_data(e){this.adContent.adTitle=e.adTitle||"",this.adContent.agencyTitle=e.agencyTitle||"",this.adContent.description=e.description||"",this.adContent.tagline=e.tagline||"",this.adContent.yearEstablished=e.yearEstablished||null,e.adTitle&&e.description&&e.agencyTitle&&(this.saved=!0)}ngAfterViewInit(){const e=document.getElementsByClassName("ql-formats"),t=this.ren.parentNode(e[0]);this.ren.removeChild(t,e[0]),this.ren.removeChild(t,e[2]),this.ren.removeChild(t,e[4])}save_ad_content(){return new Promise((e,t)=>{this.ps.save_ad_content(this.adContent).subscribe(i=>i.status?(this.ps.newMessage("success","Ad Content Saved","The content was saved!"),this.ps.NewAdData(i.data),e(!0)):(this.ps.newMessage("error","Content Save Failed",i.message),t(!1)),e=>(this.handle_error(e),t(!1)))})}prevPage(){this.router.navigate(["/agency/post/select-location"])}nextPage(e,t="/agency/post/upload-images"){if("INVALID"==e.status)return this.ps.newMessage("error","Invalid Input","Please fill the form with valid inputs");this.saved?this.check_and_handle_unsaved_changes(t):this.save_and_move(t)}check_and_handle_unsaved_changes(e){this.load(),this.checkUnsavedChanges()&&this.confirmActionForUnsavedChanges()?this.save_and_move(e):(this.stopload(),this.router.navigate([e]))}save_and_move(e){this.load(),this.save_ad_content().then(()=>{this.stopload(),this.router.navigate([e])}).catch(()=>{this.stopload()})}checkUnsavedChanges(){return this.ad.agencyTitle!=this.adContent.agencyTitle||this.ad.description!=this.adContent.description||this.ad.adTitle!=this.adContent.adTitle||this.ad.tagline!=this.adContent.tagline||this.ad.yearEstablished!=this.adContent.yearEstablished}confirmActionForUnsavedChanges(){return!0}handle_error(e){e instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.D),c.Kb(r.a),c.Kb(a.f),c.Kb(u.a),c.Kb(p.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-ad-content"]],decls:20,vars:2,consts:[["ngForm","",1,"input-container",3,"ngSubmit"],["sadForm","ngForm"],[1,"stepsdemo-content"],["pTemplate","title"],["pTemplate","subtitle"],["pTemplate","content"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["type","submit","name","submit",1,"btn","btn-next"],[1,"fa","fa-angle-right"],[1,"form-group"],["for","adTitle"],[1,"left-char"],[1,"form-icon","right-icon"],["type","text","autocapitalize","on","name","adTitle","placeholder","Max: 60 words","maxlength","60","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["adTitle","ngModel"],["src","assets/images/emoji-icon.png","alt","Icons"],["class","errors",4,"ngIf"],[1,"group"],["id","name-input",1,"form-group"],["for","name"],["type","text","autocapitalize","on","name","name","placeholder","","pattern","[a-zA-Z0-9 ]+","required","","ngModel","",1,"form-control","capitalize",3,"ngModel","ngModelChange"],["name","ngModel"],["id","age-input",1,"form-group"],["for","yearEstablished"],["type","number","name","age","min","0","pattern","[0-9]{4}","required","","ngModel","","placeholder","YYYY",1,"form-control",3,"ngModel","ngModelChange"],["yearEstablished","ngModel"],["for","tag"],["type","text","autocapitalize","on","name","tag","placeholder","Describe your best attribute in short and catchy way","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["tag","ngModel"],["for","description"],["name","description","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error"]],template:function(e,t){if(1&e){const e=c.Rb();c.Qb(0,"form",0,1),c.Xb("ngSubmit",(function(){c.zc(e);const i=c.wc(1);return t.nextPage(i.form)})),c.Qb(2,"section",2),c.Qb(3,"p-card"),c.Hc(4,J,1,0,"ng-template",3),c.Hc(5,A,1,0,"ng-template",4),c.Hc(6,j,33,13,"ng-template",5),c.Pb(),c.Pb(),c.Qb(7,"div",6),c.Qb(8,"ul"),c.Qb(9,"li"),c.Qb(10,"button",7),c.Xb("click",(function(){return t.prevPage()})),c.Lb(11,"i",8),c.Jc(12,"Previous step"),c.Pb(),c.Pb(),c.Qb(13,"li"),c.Qb(14,"button",9),c.Xb("click",(function(){c.zc(e);const i=c.wc(1);return t.nextPage(i.form,"/agency")})),c.Jc(15," Save & Exit "),c.Pb(),c.Pb(),c.Qb(16,"li"),c.Qb(17,"button",10),c.Jc(18," Next step "),c.Lb(19,"i",11),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&e&&(c.yb(2),c.Cb("submitting",t.submitting))},directives:[h.A,h.o,h.p,k.a,s.j,h.c,h.k,h.w,h.n,h.q,n.n,h.t,h.s,I.a],styles:['.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b9bb2;font-size:20px;font-weight:700}form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{flex:3;margin-right:5px}.group[_ngcontent-%COMP%]   #gender-input[_ngcontent-%COMP%]{flex:2;margin-right:5px}.group[_ngcontent-%COMP%]   #age-input[_ngcontent-%COMP%]{flex:1}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]{height:50px!important}@media screen and (max-width:550px){.group[_ngcontent-%COMP%]   #name-input[_ngcontent-%COMP%]{min-width:100%;margin-right:0}}']}),e})();var R=i("mrSG"),z=i("tk/3"),T=i("JP5V");const D=["adImagesModalClose"],E=["BusinessRegModalClose"],H=["adVideoModalClose"];function X(e,t){if(1&e){const e=c.Rb();c.Qb(0,"ul"),c.Qb(1,"li"),c.Qb(2,"a"),c.Lb(3,"i",58),c.Pb(),c.Pb(),c.Qb(4,"li"),c.Lb(5,"img",59),c.cc(6,"server"),c.Pb(),c.Qb(7,"li"),c.Jc(8),c.Pb(),c.Qb(9,"li"),c.Qb(10,"a",60),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=t.index;return c.bc().deleteAdImage(i,n)})),c.Jc(11,"-"),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=t.index;c.yb(5),c.jc("src",c.dc(6,2,e),c.Cc),c.yb(3),c.Lc("Ad Image ",i+1,"/10 ")}}function U(e,t){if(1&e){const e=c.Rb();c.Qb(0,"ul"),c.Qb(1,"li"),c.Qb(2,"a"),c.Lb(3,"i",58),c.Pb(),c.Pb(),c.Qb(4,"li"),c.Lb(5,"img",59),c.cc(6,"server"),c.Pb(),c.Qb(7,"li"),c.Jc(8),c.Pb(),c.Qb(9,"li"),c.Qb(10,"a",60),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=t.index;return c.bc().delete_BRP(i,n)})),c.Jc(11,"-"),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=t.index;c.yb(5),c.jc("src",c.dc(6,2,e),c.Cc),c.yb(3),c.Lc("Business Registration Proof ",i+1,"/2 ")}}function K(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",61),c.Qb(1,"label",62),c.Lb(2,"img",63),c.Qb(3,"input",64),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=t.index;return c.bc().ad_image_selection_change(i.imgPath,n)})),c.Pb(),c.Lb(4,"span",65),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.jc("src",e.imgPath,c.Cc)}}function V(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",61),c.Qb(1,"label",62),c.Lb(2,"img",63),c.Qb(3,"input",64),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=t.index;return c.bc().BRP_selection_change(i.imgPath,n)})),c.Pb(),c.Lb(4,"span",65),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.jc("src",e.imgPath,c.Cc)}}let Y=(()=>{class e{constructor(e,t,i){this.ps=e,this.router=t,this.loader=i,this.submitting=!1,this.currentSelectedAdImages=[],this.maxAdImages=10,this.newlyAddedAdImages=0,this.currentSelectedBRP=[],this.maxBRPFiles=2,this.uploadedAdVideo=null,this.newVideoLink=null,this.unsub$=new o.a,this.uploadedAdImages=[],this.uploadedBRP=[]}ngOnInit(){this.ps.newPage(4),this.load(),this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.stopload(),this.ad=e,this.isAdInitialized(),this.prefill_component_data(e)})}isAdInitialized(){var e;(null===(e=this.ad)||void 0===e?void 0:e._id)||(this.ps.newMessage("info","Ad Not Initialized","Please start a new ad by selecting category"),this.router.navigate(["/agency/post/select-location"]))}prefill_component_data(e){e.adImages instanceof Array&&(this.uploadedAdImages=e.adImages,this.maxAdImages=10-this.uploadedAdImages.length),e.BRPFiles instanceof Array&&(this.uploadedBRP=e.BRPFiles),e.adVideo&&(this.uploadedAdVideo=e.adVideo)}uploadAdImages(e){const t=e;this.load(),this.ps.save_ad_images(t).subscribe(e=>{this.handle_adImage_upload_httpEvents(e,t)},this.errorHandle.bind(this))}handle_adImage_upload_httpEvents(e,t){if(e.type==z.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof z.f){const i=e.body;this.stopload(),i.status?(this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedAdImages+=t.length,this.ps.NewAdData(i.data),this.currentSelectedAdImages=[],this.adImagesModalCloseButton.nativeElement.click()):this.ps.newMessage("error","Couldn't Upload",i.message)}}deleteAdImage(e,t){this.load(),this.ps.deleteAdImage(e).subscribe(i=>{i.status?(this.ps.newMessage("success","Delete Ad Image","Image was deleted from server"),this.remove_adimage_from_component_array(e,t),this.ad.adImages=this.uploadedAdImages,this.ps.NewAdData(this.ad)):(this.ps.newMessage("error","Failed To Delete",i.message),this.stopload())},this.errorHandle.bind(this))}remove_adimage_from_component_array(e,t){if(this.uploadedAdImages[t]==e)this.uploadedAdImages.splice(t,1);else{const t=this.uploadedAdImages.indexOf(e);this.uploadedAdImages.splice(t,1)}}delete_BRP(e,t){this.load(),this.ps.deleteBRP(e).subscribe(i=>{i.status?(this.ps.newMessage("success","Delete File","File was deleted from server"),this.remove_BRP_from_component_array(e,t),this.ad.adImages=this.uploadedAdImages,this.ps.NewAdData(this.ad)):(this.ps.newMessage("error","Failed To Delete",i.message),this.stopload())},this.errorHandle.bind(this))}remove_BRP_from_component_array(e,t){if(this.uploadedBRP[t]==e)this.uploadedBRP.splice(t,1);else{const t=this.uploadedBRP.indexOf(e);this.uploadedAdImages.splice(t,1)}}uploadAdVideo(){this.confirmVideoReupload()&&(this.load(),this.ps.save_ad_video_link(this.newVideoLink).subscribe(e=>{this.handle_adVideo_upload_httpEvents(e)},this.errorHandle.bind(this)))}confirmVideoReupload(){return!this.ad.adVideo||confirm("A Video is already saved, Do You want to save new link?")}handle_adVideo_upload_httpEvents(e){if(e.type==z.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof z.f){const t=e.body;this.stopload(),t.status?(this.ps.newMessage("success","Video Uploaded","The video was uploaded"),this.ps.NewAdData(t.data),this.newVideoLink=null,this.adVideoModalCloseButton.nativeElement.click()):this.ps.newMessage("error","Couldn't Upload",t.message)}}uploadBRProof(e){this.ps.save_BRP_files(e).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.handle_BRP_upload_httpEvents(e)},e=>{this.errorHandle(e)})}handle_BRP_upload_httpEvents(e){if(e.type==z.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total),"Uploading.....");else if(e instanceof z.f){const t=e.body;this.stopload(),t.status?this.handle_BRP_upload_success(t):this.ps.newMessage("error","Couldn't Upload",t.message)}}handle_BRP_upload_success(e){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.ps.NewAdData(e.data),this.currentSelectedBRP=[],this.businessRegModalCloseButton.nativeElement.click()}nextPage(e="/agency/post/user-details"){this.uploadedAdImages.length>0&&this.uploadedAdVideo?this.unuploadedFilesExists()?this.ifDiscardUnuploadedFiles()&&this.router.navigate([e]):this.router.navigate([e]):this.ps.newMessage("error","No Image Uploaded","Please upload required images")}prevPage(){this.router.navigate(["/agency/post/ad-content"])}unuploadedFilesExists(){return this.currentSelectedAdImages.length>0||null!=this.newVideoLink}ifDiscardUnuploadedFiles(){return!1}select_new_image_for_ad_images(e,t){return Object(R.a)(this,void 0,void 0,(function*(){this.submitting=!0;const i=e.target.files;for(let e of i)if(this.currentSelectedAdImages.length<10-this.uploadedAdImages.length){const t=yield this.convertToBase64(e);this.currentSelectedAdImages.push({imgPath:t,blob:e,selected:!0})}else this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");t.reset(),this.submitting=!1}))}convertToBase64(e){return new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)},n.onerror=()=>{i("error in parsing")}})}finalize_selected_ad_images(){const e=this.currentSelectedAdImages.map(e=>{if(1==e.selected)return e.blob});this.uploadAdImages(e)}finalize_selected_BRP(){const e=this.currentSelectedBRP.map(e=>{if(1==e.selected)return e.blob});this.uploadBRProof(e)}ad_image_selection_change(e,t){var i;if((null===(i=this.currentSelectedAdImages[t])||void 0===i?void 0:i.imgPath)==e)this.currentSelectedAdImages[t].selected=!this.currentSelectedAdImages[t].selected;else{const t=this.currentSelectedAdImages.find(t=>t.imgPath==e);t&&(t.selected=!t.selected)}}BRP_selection_change(e,t){var i;if((null===(i=this.currentSelectedBRP[t])||void 0===i?void 0:i.imgPath)==e)this.currentSelectedBRP[t].selected=!this.currentSelectedBRP[t].selected;else{const t=this.currentSelectedBRP.find(t=>t.imgPath==e);t&&(t.selected=!t.selected)}}add_new_BR_proof(e,t){return Object(R.a)(this,void 0,void 0,(function*(){const i=e.target.files;for(let e of i){if(!(this.currentSelectedBRP.length<2-this.uploadedBRP.length)){this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");break}{const t=yield this.convertToBase64(e);this.currentSelectedBRP.push({imgPath:t,blob:e,selected:!0})}}t.reset()}))}errorHandle(e){e instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Couldn't Save",e.error.message),this.stopload()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){var e,t,i;this.unsub$.next(!0),this.unsub$.complete(),null===(e=this.adImagesModalCloseButton)||void 0===e||e.nativeElement.click(),null===(t=this.businessRegModalCloseButton)||void 0===t||t.nativeElement.click(),null===(i=this.adVideoModalCloseButton)||void 0===i||i.nativeElement.click()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(r.a),c.Kb(a.f),c.Kb(u.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-photos"]],viewQuery:function(e,t){var i;1&e&&(c.Qc(D,!0),c.Qc(E,!0),c.Qc(H,!0)),2&e&&(c.vc(i=c.Yb())&&(t.adImagesModalCloseButton=i.first),c.vc(i=c.Yb())&&(t.businessRegModalCloseButton=i.first),c.vc(i=c.Yb())&&(t.adVideoModalCloseButton=i.first))},decls:133,vars:13,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form"],[1,"col-lg-12"],[1,"upload-img","text-center"],["data-toggle","modal","data-name1","photo","id","pic1","data-target",".adImg-modal"],["aria-hidden","true",1,"fa","fa-picture-o"],["data-toggle","modal","data-target",".video-modal"],["aria-hidden","true",1,"fa","fa-video-camera"],["data-toggle","modal","data-name","photo","id","pic","data-target",".identityImg-modal"],["aria-hidden","true",1,"fa","fa-file"],[1,"img-list"],[1,"img-sub-list"],["id","show_image"],[4,"ngFor","ngForOf"],[1,"top-tip"],[1,"fa","fa-info-circle"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","adImg-modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["adImagesInputForm",""],[1,"modal-header","text-left",2,"border-bottom","none"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["adImagesModalClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"upload-file"],["id","saved-pictures",1,"moderation__grid"],[1,"row","gallery-img-id"],["class","col-sm-2 selectedImages",4,"ngFor","ngForOf"],["id","prepend_div",1,"col-sm-2"],["for","gallery-photo-add",1,"label-head"],["type","file","name","adImages","multiple","","id","gallery-photo-add","accept","image/jpg, image/png",3,"change"],[1,"modal-footer"],["type","button","name","submit",1,"btn","btn-select",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","identityImg-modal","fade","bd-example-modal-lg"],["BRPInputForm",""],["id","exampleModalLongTitle",1,"modal-title","pr-3"],["BusinessRegModalClose",""],["for","gallery-photo-add-identity",1,"label-head"],["type","file","name","identityImages","id","gallery-photo-add-identity","accept","image/jpg, image/png","multiple","",2,"display","none",3,"change"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","img-modal","fade","video-modal","bd-example-modal-lg"],[1,"modal-header","text-left",2,"border-bottom","0px"],["adVideoModalClose",""],[1,"cssform"],[1,"col-12","px-0"],["type","url","name","video","required","",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"video-container"],[1,"loading-message"],["id","cartoonVideo","width","100%","height","250","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","frameborder","0","allowfullscreen","",1,"embed-responsive-item",3,"src"],["type","submit","name","submit",1,"btn","btn-select",3,"click"],[1,"fa","fa-bars"],["alt","Images",3,"src"],["href","javascript:void(0)",1,"minus-btn",3,"click"],[1,"col-sm-2","selectedImages"],[1,"image-with-selection"],[1,"image-with-selection__image",3,"src"],["type","checkbox","checked","",1,"image-with-selection__checkbox",3,"click"],[1,"image-with-selection__checkmark"]],template:function(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form"),c.Qb(4,"div",3),c.Qb(5,"div",0),c.Qb(6,"div",1),c.Qb(7,"div",4),c.Qb(8,"div",5),c.Qb(9,"ul"),c.Qb(10,"li",6),c.Lb(11,"i",7),c.Jc(12," Add Pictures"),c.Qb(13,"span"),c.Jc(14),c.Pb(),c.Pb(),c.Qb(15,"li",8),c.Lb(16,"i",9),c.Jc(17," Add Video"),c.Qb(18,"span"),c.Jc(19),c.Pb(),c.Pb(),c.Qb(20,"li",10),c.Lb(21,"i",11),c.Jc(22," Business Registration"),c.Qb(23,"span"),c.Jc(24,"Document"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(25,"div",12),c.Qb(26,"div",13),c.Qb(27,"span",14),c.Hc(28,X,12,4,"ul",15),c.Hc(29,U,12,4,"ul",15),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(30,"div",16),c.Qb(31,"h3"),c.Lb(32,"i",17),c.Jc(33," Top tip for a successful advertisement "),c.Pb(),c.Qb(34,"p"),c.Jc(35," It's obvious that adding a good photo will increase your ad's potential for success, but it's equally important to have agood number of photos, especially from different angles,perspectives,and locations. Experiment. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(36,"div",18),c.Qb(37,"ul"),c.Qb(38,"li"),c.Qb(39,"button",19),c.Xb("click",(function(){return t.prevPage()})),c.Lb(40,"i",20),c.Jc(41,"Previous step"),c.Pb(),c.Pb(),c.Qb(42,"li"),c.Qb(43,"button",21),c.Xb("click",(function(){return t.nextPage("/agency")})),c.Jc(44," Save & Exit "),c.Pb(),c.Pb(),c.Qb(45,"li"),c.Qb(46,"button",21),c.Xb("click",(function(){return t.nextPage()})),c.Jc(47," Next step "),c.Lb(48,"i",22),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(49,"div",23),c.Qb(50,"div",24),c.Qb(51,"div",25),c.Qb(52,"div",25),c.Qb(53,"form",null,26),c.Qb(55,"div",27),c.Qb(56,"h5",28),c.Jc(57,"Select from your computer"),c.Pb(),c.Qb(58,"button",29,30),c.Qb(60,"span",31),c.Jc(61,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(62,"div",32),c.Qb(63,"div",33),c.Qb(64,"div",34),c.Qb(65,"div",35),c.Hc(66,K,5,1,"div",36),c.Qb(67,"div",37),c.Qb(68,"label",38),c.Qb(69,"span"),c.Jc(70,"+"),c.Pb(),c.Jc(71,"Add"),c.Pb(),c.Qb(72,"input",39),c.Xb("change",(function(i){c.zc(e);const n=c.wc(54);return t.select_new_image_for_ad_images(i,n)})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(73,"div",40),c.Qb(74,"button",41),c.Xb("click",(function(){return t.finalize_selected_ad_images()})),c.Jc(75,"Use selected Pics "),c.Lb(76,"i",22),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(77,"div",42),c.Qb(78,"div",24),c.Qb(79,"div",25),c.Qb(80,"div",25),c.Qb(81,"form",null,43),c.Qb(83,"div",27),c.Qb(84,"h5",44),c.Jc(85,"Provide 2 Business Registration Documents verifying your business."),c.Pb(),c.Qb(86,"button",29,45),c.Qb(88,"span",31),c.Jc(89,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(90,"div",32),c.Qb(91,"div",33),c.Qb(92,"div",34),c.Qb(93,"div",35),c.Hc(94,V,5,1,"div",36),c.Qb(95,"div",37),c.Qb(96,"label",46),c.Qb(97,"span"),c.Jc(98,"+"),c.Pb(),c.Jc(99,"Add"),c.Pb(),c.Qb(100,"input",47),c.Xb("change",(function(i){c.zc(e);const n=c.wc(82);return t.add_new_BR_proof(i,n)})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(101,"div",40),c.Qb(102,"button",41),c.Xb("click",(function(){return t.finalize_selected_BRP()})),c.Jc(103,"Use selected Pics "),c.Lb(104,"i",22),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(105,"div",48),c.Qb(106,"div",24),c.Qb(107,"div",25),c.Qb(108,"div",25),c.Qb(109,"div",49),c.Qb(110,"h5",28),c.Jc(111,"Video URL"),c.Pb(),c.Qb(112,"button",29,50),c.Qb(114,"span",31),c.Jc(115,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(116,"form",51),c.Qb(117,"div",32),c.Qb(118,"div",33),c.Qb(119,"ul"),c.Qb(120,"li",52),c.Qb(121,"input",53),c.Xb("ngModelChange",(function(e){return t.newVideoLink=e})),c.Pb(),c.Pb(),c.Pb(),c.Qb(122,"div",54),c.Qb(123,"div",55),c.Qb(124,"h4"),c.Qb(125,"small"),c.Jc(126,"Preview will load here."),c.Pb(),c.Pb(),c.Pb(),c.Lb(127,"iframe",56),c.cc(128,"safe"),c.Pb(),c.Pb(),c.Pb(),c.Qb(129,"div",40),c.Qb(130,"button",57),c.Xb("click",(function(){return t.uploadAdVideo()})),c.Jc(131," Use selected Video "),c.Lb(132,"i",22),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&e&&(c.Cb("submitting",t.submitting),c.yb(14),c.Lc("",10-t.uploadedAdImages.length," Left"),c.yb(5),c.Lc("",t.uploadedAdVideo?"0":"1"," Left"),c.yb(9),c.ic("ngForOf",t.uploadedAdImages),c.yb(1),c.ic("ngForOf",t.uploadedBRP),c.yb(37),c.ic("ngForOf",t.currentSelectedAdImages),c.yb(28),c.ic("ngForOf",t.currentSelectedBRP),c.yb(27),c.jc("placeholder",t.uploadedAdVideo||"e.g. http://youtube.com/JDJSU72 or http://vimeo.com/8273612"),c.ic("ngModel",t.newVideoLink),c.yb(6),c.ic("src",c.dc(128,11,t.newVideoLink||t.uploadedAdVideo),c.Bc))},directives:[h.A,h.o,h.p,n.m,h.c,h.w,h.n,h.q],pipes:[T.a,m.a],styles:['.label[_ngcontent-%COMP%]{color:#6b9bb2;font-weight:700}.page-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}.uploadedImages[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 15px}.uploadedImages[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:5px 0}.uploadedImages[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}video[_ngcontent-%COMP%]{width:150px;height:auto}button.btn.btn-select[_ngcontent-%COMP%]{color:#fff;font-weight:700;background:#01768a;padding:9px 30px 5px}.image-with-selection__checkmark[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:18px;height:18px;top:4.5px;right:4.5px;border:1.5px solid hsla(0,0%,100%,.9);background-color:rgba(0,0,0,.5);z-index:10;border-radius:50%}.image-with-selection__checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute}.image-with-selection__checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]:after{left:6.5px;top:3.5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.image-with-selection[_ngcontent-%COMP%]{width:100%;border-radius:6px;overflow:hidden;display:flex;position:relative;margin-right:15px;margin-bottom:15px}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]{background-color:#58a688;box-shadow:0 2px 9px 0 rgba(0,0,0,.76);border:none}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:4px 0 0;margin-top:1px\\9;line-height:normal}.image-with-selection__image[_ngcontent-%COMP%]{width:100px;height:100px}']}),e})();function q(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",94),c.Qb(1,"div",95),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=c.bc();return n.select_plan(n.adPlans[0]._id,n.adPlans[0].planName,i)})),c.Qb(2,"a",96),c.Jc(3),c.Qb(4,"span"),c.Jc(5),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(2),c.Cb("active",e._id==i.categoryId),c.yb(1),c.Lc(" ",e.inDays?e.days+" Day":e.hours+" Hour"," "),c.yb(2),c.Lc("$ ",e.price,"")}}function G(e,t){if(1&e){const e=c.Rb();c.Ob(0),c.Qb(1,"li",97),c.Xb("click",(function(){c.zc(e);const i=t.$implicit,n=c.bc();return n.select_plan(n.adPlans[1]._id,n.adPlans[1].planName,i)})),c.Qb(2,"a",98),c.Jc(3),c.Pb(),c.Pb(),c.Nb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(2),c.Cb("active",e._id==i.categoryId),c.yb(1),c.Lc(" ",e.inHours?e.hours+" Hour":e.days+" Days"," ")}}function W(e,t){if(1&e){const e=c.Rb();c.Qb(0,"li"),c.Qb(1,"a",99),c.Xb("click",(function(){c.zc(e);const i=t.$implicit;return c.bc().select_bump(i)})),c.Jc(2),c.Qb(3,"span"),c.Jc(4),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit,i=c.bc();c.yb(1),c.Cb("active",e._id==i.selectedBump._id),c.yb(1),c.Lc(" ",e.count," bumps "),c.yb(2),c.Lc("$ ",e.price,"/each")}}function Z(e,t){if(1&e&&(c.Qb(0,"ul"),c.Qb(1,"li"),c.Qb(2,"h4"),c.Jc(3),c.Qb(4,"span"),c.Jc(5),c.Pb(),c.Pb(),c.Qb(6,"p"),c.Jc(7),c.Pb(),c.Pb(),c.Pb()),2&e){const e=c.bc();c.yb(3),c.Lc(" ",e.plan.planName," "),c.yb(2),c.Lc("$ ",e.plan.price,""),c.yb(2),c.Lc(" ",e.plan.inDays?e.plan.days+" Day":e.plan.hours+" Hour"," ")}}function ee(e,t){if(1&e&&(c.Qb(0,"ul"),c.Qb(1,"li"),c.Qb(2,"h4"),c.Jc(3," Additional Bump Ups "),c.Qb(4,"span"),c.Jc(5),c.Pb(),c.Pb(),c.Qb(6,"p"),c.Jc(7),c.Pb(),c.Pb(),c.Pb()),2&e){const e=c.bc();c.yb(5),c.Lc(" $ ",e.selectedBump.price,""),c.yb(2),c.Lc(" ",e.selectedBump.count+" Bumps"," ")}}function te(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",100),c.Qb(1,"p",101),c.Jc(2),c.Pb(),c.Qb(3,"button",102),c.Xb("click",(function(){return c.zc(e),c.bc().close_modal()})),c.Jc(4,"Cancel"),c.Pb(),c.Qb(5,"button",103),c.Xb("click",(function(){return c.zc(e),c.bc().buyBumpWithBalance()})),c.Jc(6,"Pay"),c.Pb(),c.Pb()}if(2&e){const e=c.bc();c.yb(2),c.Mc("You will be charge $",e.selectedBump.price," for ",e.selectedBump.count," bumps from your balance.")}}let ie=(()=>{class e{constructor(e,t,i,n,a,s){this.router=e,this.ps=t,this.ss=i,this.ds=n,this.ar=a,this.loader=s,this.unsub$=new o.a,this.submitting=!1,this.adPlans=[],this.showPlan=!1,this.bumps=[],this.selectedBump={},this.showBumps=!1,this.FlagPlanAdded=!1,this.FlagPlanChanged=!1,this.FlagPlanPaid=!1,this.showMainPageOptions=!1,this.showPage1Options=!1,this.showBumpsOptions=!1,this.transactionDetails={}}ngOnInit(){this.ps.newPage(6),this.check_and_handle_ad(),this.getAdPlan(),this.ss.getUserSessionObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.balance=e.balance})}check_and_handle_ad(){this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{if(this.ad=e,!this.ad._id)return this.checkParamForAdId()})}checkParamForAdId(){this.ar.queryParams.pipe(Object(d.a)(this.unsub$)).subscribe(e=>{if(e.adId)return this.getAdData(e.adId);this.ps.newMessage("info","Ad Not Initialized","Please initialize the ad first by selecting category"),this.router.navigate(["/agency/post/select-category"])})}getAdData(e){this.ps.get_ad(e).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e.status?this.ps.NewAdData(e.data):this.ps.newMessage("error","No Data",e.message)},this.errorHandle.bind(this))}getAdPlan(){this.ps.get_ad_plans().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e.status?(this.adPlans=e.data.adPlans,this.bumps=e.data.bumps,this.fillPrePurchasedPlan()):this.ps.newMessage("error","No Plan Found",e.message)},this.errorHandle.bind(this))}fillPrePurchasedPlan(){if(this.check_ad_plan_selected(),this.ad.bumpupPlanCheck){const e=this.bumps.find(e=>{var t;return e._id==(null===(t=this.ad.bumpupPlan)||void 0===t?void 0:t._id)});this.selectedBump=e,this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,this.showBumpsOptions=!0}}check_ad_plan_selected(){var e,t,i;if(this.ad.advertisePlanCheck){const n=this.adPlans.find(e=>{var t,i,n;return(null===(t=e.planName)||void 0===t?void 0:t.toLowerCase())==(null===(n=null===(i=this.ad.advertisePlan)||void 0===i?void 0:i.adPlanName)||void 0===n?void 0:n.toLowerCase())});n||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0));const a=null===(e=this.ad.advertisePlan)||void 0===e?void 0:e.adPlanCategory,s=n.categories.find(e=>a==e._id);s||(this.FlagPlanChanged=!0,this.ds.newMessage("info","Plan Not Found","Plan you chose was not found or may have changed",!0)),this.select_plan(n._id,n.planName,s,null===(t=this.ad.advertisePlan)||void 0===t?void 0:t.paid),this.FlagPlanChanged=!1,this.FlagPlanAdded=!0,n.planName==(null===(i=this.adPlans[0])||void 0===i?void 0:i.planName)?this.showMainPageOptions=!0:this.showPage1Options=!0,this.ad.advertisePlan.paid&&(this.FlagPlanPaid=!0)}}select_plan(e,t,i,n=!1){e==this.planId&&i._id==this.categoryId||(this.planId=e,this.categoryId=i._id,this.plan=Object.assign({planId:e,planName:t,paid:n},i),this.FlagPlanChanged=!0)}select_bump(e){this.selectedBump=e,this.FlagPlanChanged=!0}buyBumps(){this.ps.lock=!0;const e=this.selectedBump;this.router.navigate(["/agency/bumps/pay-with-card"],{queryParams:{bumpId:e._id,price:e.price,count:e.count,back:"/agency/post/upgrades",adId:this.ad._id}})}nextPage(e="/agency/post/finalize"){this.load(),this.save_plan().then(()=>{this.stopload(),this.router.navigate([e])}).catch(()=>{this.stopload()})}prevPage(){this.router.navigate(["/agency/post/user-details"])}save_plan(){return new Promise((e,t)=>this.FlagPlanAdded&&!this.FlagPlanChanged?e(!0):this.FlagPlanAdded&&this.FlagPlanPaid&&!window.confirm("you have already purchased a plan, upgrading will cost you extra")?(this.planId=this.ad.advertisePlan.adPlanId,this.categoryId=this.ad.advertisePlan.adPlanCategory,t(!1)):(this.ps.newPlanTake(this.plan),void this.save_plans_to_server(e,t)))}save_plans_to_server(e,t){var i;const n={adId:this.ad._id,adPlan:{planId:this.planId,categoryId:this.categoryId},bumps:{bumpId:null===(i=this.selectedBump)||void 0===i?void 0:i._id}};this.ps.save_plan(n).subscribe(i=>{i.status?(this.ad.completedSteps instanceof Object&&(this.ad.completedSteps[6]=!0),this.ps.NewAdData(Object.assign(Object.assign({},this.ad),i.data)),e(!0)):(this.ds.newMessage("error","Couldn't Save Plan",i.message),t(!1))},e=>{this.errorHandle(e),t(!1)})}upgrade(){this.showPlan=!0}cancelPlan(){this.showPlan=!1,this.plan=null,this.ps.newPlanTake({})}errorHandle(e){e instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",e.status+":"+e.error.message)}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(!0),this.unsub$.complete()}buyBumpWithBalance(){}close_page1_selection(){this.showPage1Options=!1,this.plan.planName==this.adPlans[1].planName&&(this.plan={},this.planId=null,this.categoryId=null)}close_main_page_selection(){this.showMainPageOptions=!1,this.plan.planName==this.adPlans[0].planName&&(this.plan={},this.planId=null,this.categoryId=null)}close_bumps_selection(){this.showBumpsOptions=!1,this.selectedBump={}}close_modal(){this.showConfirm=!1,this.selectedBump=null}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(a.f),c.Kb(r.a),c.Kb(p.a),c.Kb(_.a),c.Kb(a.a),c.Kb(u.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-upgrades"]],decls:265,vars:36,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"panl-list-sec","upgrade-list"],["alt","home-pic",3,"src"],[1,"cancer-des"],[1,"delivery-form"],[1,"col-lg-9"],[1,"upgrade-sec"],[1,"top-tip"],[1,"col-md-2"],["href","javascript:void(0);",1,"tip-links"],[1,"col-md-10"],[1,"up-common-header","upgrade-purple-header"],["src","assets/images/upgrade-1.png","alt","Icons"],[1,"common-page-des","upgrade-des"],[1,"btn","btn-featured",3,"click"],[1,"fa","fa-angle-right"],[1,"upgrade-hide-sec","common-hide-sec"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3",3,"click"],[1,"hide-sec-des","upgrade-close"],["href","javascript:void(0);"],[1,"fa","fa-close"],[1,"upgrade-sec","page-up-sec"],[1,"up-common-header","upgrade-black-header"],["src","assets/images/upgrade-2.png","alt","Icons"],[1,"common-page-des","page-sec-des"],[1,"btn","btn-page",3,"click"],[1,"page-hide-sec","common-hide-sec"],[1,"up-page-head"],["id","myTab","role","tablist",1,"nav","nav-tabs"],[4,"ngFor","ngForOf"],[1,"upgrade-close",3,"click"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"page-tab-des"],["id","hour_bumps"],["id","pg_one"],[1,"upgrade-sec","bump-up-sec"],[1,"up-common-header","upgrade-blue-header"],["src","assets/images/bump-icon-1.png","alt","Icons"],[1,"badge"],[1,"common-page-des","bump-page-des"],[1,"btn","btn-bumps-des",3,"click"],[1,"bumps-hide-sec","common-hide-sec"],[1,"bump-tab-list"],[1,"top-tip","yellow-tip"],[1,"fa","fa-info-circle"],[1,"understand-sec"],[1,"agree-head"],["href","javascript:void(0);",1,"contact-link"],[1,"col-lg-3"],["id","upgrades_invoice",1,"upgrades-invoice"],["id","calc_credit"],["type","hidden","id","credit","name","credit","value",""],[4,"ngIf"],["id","main_page_add"],["id","page11"],["id","additional_bumps"],[1,"grand-total"],["id","grand_total"],["type","hidden","id","grand_tl"],["type","hidden","id","user_main_balance","name","user_main_balance","value",""],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],["name","submit",1,"btn","btn-next",3,"click"],["href","javascript:void(0)","data-toggle","modal","data-target","#reportModal",1,"btn","btn-report",2,"visibility","hidden"],["paymentOption",""],["id","reportModal","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","cancer-patient"],[1,"cancer-head","pl-3"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["optionClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"login-form"],[1,"col-md-12"],[1,"btn","btn-success","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-dollar"],[1,"btn","btn-primary","w-100","text-center","py-2","my-1","font-xl",3,"click"],[1,"pi","pi-payment"],["class","form-group mt-2",4,"ngIf"],["href","javascript:void(0)","data-toggle","modal","data-target","#paymentStatus",1,"btn","btn-report",2,"visibility","hidden"],["paymentStatus",""],["id","paymentStatus","role","dialog","aria-labelledby","reportModal","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"text-center","text-dark"],[1,"table","my-2"],[1,"color"],[1,"col-md-3"],[1,"hide-sec-des",3,"click"],["href","javascript:void(0);","id","main_page"],[1,"nav-item",3,"click"],["id","home-tab",1,"nav-link"],["id","add_bumps",3,"click"],[1,"form-group","mt-2"],[1,"text-danger"],[1,"btn","btn-danger","px-3","mr-1",3,"click"],[1,"btn","btn-warning","text-center","px-3",3,"click"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form"),c.Qb(4,"div",3),c.Qb(5,"ul"),c.Qb(6,"li"),c.Lb(7,"img",4),c.cc(8,"server"),c.Pb(),c.Qb(9,"li"),c.Qb(10,"div",5),c.Jc(11),c.Qb(12,"p"),c.Jc(13),c.cc(14,"date"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"div",6),c.Qb(16,"div",1),c.Qb(17,"div",7),c.Qb(18,"div",8),c.Qb(19,"div",9),c.Qb(20,"div",1),c.Qb(21,"div",10),c.Qb(22,"a",11),c.Jc(23," TIP "),c.Pb(),c.Pb(),c.Qb(24,"div",12),c.Qb(25,"p"),c.Qb(26,"strong"),c.Jc(27,"Paid for features:"),c.Pb(),c.Jc(28," money for ads will be deducted from your account at a later point in time if you choose to use these features. "),c.Pb(),c.Qb(29,"p"),c.Jc(30," By using this features it will help increase your chances of more people viewing your profile issues. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"div",13),c.Lb(32,"img",14),c.Jc(33," Main Page Ad "),c.Pb(),c.Qb(34,"div",15),c.Qb(35,"p"),c.Qb(36,"strong"),c.Jc(37,"Do you want maximum for your ad ?"),c.Pb(),c.Jc(38,"Your ad will be displayed in our highest visiblit Featured Ad format in the panhandlers category of Greater Toronto Area. "),c.Pb(),c.Qb(39,"a",16),c.Xb("click",(function(){return t.showMainPageOptions=!0})),c.Jc(40," Upgrade to Main Page Ad "),c.Lb(41,"i",17),c.Pb(),c.Pb(),c.Qb(42,"div",18),c.Qb(43,"div",1),c.Hc(44,q,6,4,"div",19),c.Qb(45,"div",20),c.Xb("click",(function(){return t.close_main_page_selection()})),c.Qb(46,"div",21),c.Qb(47,"a",22),c.Lb(48,"i",23),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(49,"div",24),c.Qb(50,"div",25),c.Qb(51,"ul"),c.Qb(52,"li"),c.Lb(53,"img",26),c.Jc(54," Page 1 "),c.Pb(),c.Qb(55,"li"),c.Jc(56," From "),c.Qb(57,"span"),c.Jc(58,"$ 2"),c.Pb(),c.Jc(59," / Bump "),c.Pb(),c.Pb(),c.Pb(),c.Qb(60,"div",27),c.Qb(61,"p"),c.Qb(62,"strong"),c.Jc(63,"Put your Ad on Autopilot."),c.Pb(),c.Jc(64,"MyIssues will monitor your ad so that it always stays on page 1. No more babysitting your ad. The most effective and hands off approach. "),c.Pb(),c.Qb(65,"a",28),c.Xb("click",(function(){return t.showPage1Options=!0})),c.Jc(66," Get page 1 "),c.Lb(67,"i",17),c.Pb(),c.Pb(),c.Qb(68,"div",29),c.Qb(69,"div",1),c.Qb(70,"div",2),c.Qb(71,"div",30),c.Qb(72,"h3"),c.Jc(73," How many Hours do you want to keep your ad on main page? "),c.Pb(),c.Pb(),c.Qb(74,"ul",31),c.Hc(75,G,4,3,"ng-container",32),c.Qb(76,"li"),c.Qb(77,"div",33),c.Xb("click",(function(){return t.close_page1_selection()})),c.Qb(78,"a",22),c.Lb(79,"i",23),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(80,"div",34),c.Qb(81,"div",35),c.Qb(82,"div",30),c.Qb(83,"h3"),c.Jc(84," How many days do you want to keep your ad on main page? "),c.Pb(),c.Pb(),c.Qb(85,"div",36),c.Qb(86,"ul"),c.Lb(87,"span",37),c.Pb(),c.Qb(88,"ul"),c.Lb(89,"span",38),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(90,"div",39),c.Qb(91,"div",40),c.Qb(92,"ul"),c.Qb(93,"li"),c.Lb(94,"img",41),c.Jc(95," Bumps "),c.Qb(96,"label",42),c.Jc(97,"New 2 bumps package"),c.Pb(),c.Pb(),c.Qb(98,"li"),c.Jc(99," From "),c.Qb(100,"span"),c.Jc(101,"$ 2"),c.Pb(),c.Jc(102," / Bump "),c.Pb(),c.Pb(),c.Pb(),c.Qb(103,"div",43),c.Qb(104,"p"),c.Qb(105,"strong"),c.Jc(106,"Do you want to be able to Bump your ad to the top with one click any time you like?"),c.Pb(),c.Jc(107," When you click Bump, your ad will instantly be posted to the top. "),c.Pb(),c.Qb(108,"a",44),c.Xb("click",(function(){return t.showBumpsOptions=!0})),c.Jc(109," Let me bumps "),c.Lb(110,"i",17),c.Pb(),c.Pb(),c.Qb(111,"div",45),c.Qb(112,"div",1),c.Qb(113,"div",2),c.Qb(114,"div",30),c.Qb(115,"h3"),c.Jc(116," How many Bumps do you want? "),c.Qb(117,"span"),c.Jc(118,"(select one)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(119,"ul",46),c.Hc(120,W,5,4,"li",32),c.Qb(121,"li"),c.Qb(122,"div",33),c.Xb("click",(function(){return t.close_bumps_selection()})),c.Qb(123,"a",22),c.Lb(124,"i",23),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(125,"div",47),c.Qb(126,"p"),c.Lb(127,"i",48),c.Jc(128," 2 Bump Package, limited time offer "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(129,"div",49),c.Qb(130,"div",50),c.Qb(131,"h5"),c.Jc(132," Price listed are in CAD $ "),c.Pb(),c.Qb(133,"p"),c.Jc(134," MyIssues charges will Services on your Acc. Need help with payments? "),c.Qb(135,"a",51),c.Jc(136,"Contact Us"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(137,"div",52),c.Qb(138,"div",53),c.Qb(139,"ul"),c.Qb(140,"li"),c.Qb(141,"h4"),c.Jc(142," Advertisement "),c.Qb(143,"span"),c.Jc(144," $ Free"),c.Pb(),c.Pb(),c.Qb(145,"p"),c.Jc(146," Panhandlers / Greater toronto $ "),c.Lb(147,"span",54),c.Lb(148,"input",55),c.Pb(),c.Pb(),c.Pb(),c.Hc(149,Z,8,3,"ul",56),c.Hc(150,ee,8,2,"ul",56),c.Lb(151,"span",57),c.Lb(152,"span",58),c.Lb(153,"span",59),c.Qb(154,"ul"),c.Qb(155,"li"),c.Qb(156,"h4"),c.Jc(157," Transaction fee "),c.Qb(158,"span"),c.Jc(159," $1.00"),c.Pb(),c.Pb(),c.Qb(160,"p"),c.Jc(161," You pay in if the total is less than $ 50.00 "),c.Pb(),c.Pb(),c.Pb(),c.Qb(162,"ul"),c.Qb(163,"li"),c.Qb(164,"h4"),c.Jc(165," Gift card "),c.Qb(166,"span"),c.Jc(167," - $1.00"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(168,"ul",60),c.Qb(169,"li"),c.Qb(170,"h4"),c.Jc(171," Grand Total "),c.Qb(172,"span",61),c.Jc(173),c.Pb(),c.Lb(174,"input",62),c.Lb(175,"input",63),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(176,"div",64),c.Qb(177,"ul"),c.Qb(178,"li"),c.Qb(179,"button",65),c.Xb("click",(function(){return t.prevPage()})),c.Lb(180,"i",66),c.Jc(181," Previous step "),c.Pb(),c.Pb(),c.Qb(182,"li"),c.Qb(183,"button",67),c.Xb("click",(function(){return t.nextPage("/sponsor/")})),c.Jc(184," Save & Exit "),c.Pb(),c.Pb(),c.Qb(185,"li"),c.Qb(186,"button",68),c.Xb("click",(function(){return t.nextPage()})),c.Jc(187," Next step "),c.Lb(188,"i",17),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Lb(189,"a",69,70),c.Qb(191,"div",71),c.Qb(192,"div",72),c.Qb(193,"div",73),c.Qb(194,"div",74),c.Qb(195,"h3",75),c.Jc(196,"Payment Options"),c.Pb(),c.Qb(197,"button",76,77),c.Xb("click",(function(){return t.close_modal()})),c.Qb(199,"span",78),c.Jc(200,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(201,"div",79),c.Qb(202,"div",80),c.Qb(203,"div",1),c.Qb(204,"div",81),c.Qb(205,"form"),c.Qb(206,"h3"),c.Qb(207,"small"),c.Jc(208,"Pay using card or account balance."),c.Pb(),c.Pb(),c.Qb(209,"button",82),c.Xb("click",(function(){return t.showConfirm=!0})),c.Qb(210,"h4"),c.Lb(211,"i",83),c.Qb(212,"small"),c.Jc(213),c.Pb(),c.Pb(),c.Pb(),c.Qb(214,"button",84),c.Xb("click",(function(){return t.buyBumps()})),c.Qb(215,"h4"),c.Lb(216,"i",85),c.Qb(217,"small"),c.Jc(218,"Pay With Card"),c.Pb(),c.Pb(),c.Pb(),c.Hc(219,te,7,2,"div",86),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Lb(220,"a",87,88),c.Qb(222,"div",89),c.Qb(223,"div",72),c.Qb(224,"div",73),c.Qb(225,"div",74),c.Qb(226,"h3",75),c.Jc(227,"Payment Status"),c.Pb(),c.Qb(228,"button",90,77),c.Qb(230,"span",78),c.Jc(231,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(232,"div",79),c.Qb(233,"div",80),c.Qb(234,"div",1),c.Qb(235,"div",81),c.Qb(236,"form"),c.Qb(237,"h2",91),c.Qb(238,"small"),c.Jc(239,"Bumps Purchased"),c.Pb(),c.Pb(),c.Qb(240,"table",92),c.Qb(241,"tr"),c.Qb(242,"td",93),c.Jc(243,"Transaction Id"),c.Pb(),c.Qb(244,"td"),c.Jc(245),c.Pb(),c.Pb(),c.Qb(246,"tr"),c.Qb(247,"td",93),c.Jc(248,"Bumps Count"),c.Pb(),c.Qb(249,"td"),c.Jc(250),c.Pb(),c.Pb(),c.Qb(251,"tr"),c.Qb(252,"td",93),c.Jc(253,"Bump Price"),c.Pb(),c.Qb(254,"td"),c.Jc(255),c.Pb(),c.Pb(),c.Qb(256,"tr"),c.Qb(257,"td",93),c.Jc(258,"Date"),c.Pb(),c.Qb(259,"td"),c.Jc(260),c.cc(261,"date"),c.Pb(),c.Pb(),c.Qb(262,"tr"),c.Lb(263,"td"),c.Lb(264,"td"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(7),c.jc("src",(null==t.ad||null==t.ad.identityImages?null:t.ad.identityImages.length)>0?c.dc(8,28,t.ad.identityImages[0]):"assets/images/home-pic.jpg",c.Cc),c.yb(4),c.Lc(" Hello ",t.ad.adTitle," "),c.yb(2),c.Mc(" Start date ",c.ec(14,30,t.ad.createdOn,"medium")," - ",t.ad.categoryName+"-"+t.ad.city," "),c.yb(21),c.Gc("display",t.showMainPageOptions?"none":"block"),c.yb(8),c.Gc("display",t.showMainPageOptions?"block":"none"),c.yb(2),c.ic("ngForOf",null==t.adPlans[0]?null:t.adPlans[0].categories),c.yb(16),c.Gc("display",t.showPage1Options?"none":"block"),c.yb(8),c.Gc("display",t.showPage1Options?"block":"none"),c.yb(7),c.ic("ngForOf",null==t.adPlans[1]?null:t.adPlans[1].categories),c.yb(28),c.Gc("display",t.showBumpsOptions?"none":"block"),c.yb(8),c.Gc("display",t.showBumpsOptions?"block":"none"),c.yb(9),c.ic("ngForOf",t.bumps),c.yb(29),c.ic("ngIf",(null==t.plan?null:t.plan.planName)&&0==(null==t.plan?null:t.plan.paid)),c.yb(1),c.ic("ngIf",null==t.selectedBump?null:t.selectedBump.count),c.yb(23),c.Lc(" $ ",((null==t.plan?null:t.plan.price)||0)+((null==t.selectedBump?null:t.selectedBump.price)||0)+1," "),c.yb(40),c.Lc("Current Balance: $",t.balance.toFixed(2),""),c.yb(6),c.ic("ngIf",t.showConfirm),c.yb(26),c.Kc(t.transactionDetails.transactionId),c.yb(5),c.Kc(t.transactionDetails.count),c.yb(5),c.Kc(t.transactionDetails.price),c.yb(5),c.Kc(c.ec(261,33,t.transactionDetails.date,"medium")))},directives:[h.A,h.o,h.p,n.m,n.n],pipes:[m.a,n.d],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.center[_ngcontent-%COMP%]{display:block;margin:0 auto;width:auto}.btn-purple[_ngcontent-%COMP%]{background:#b367c9;font-size:20px;font-weight:900;color:#fff;padding:10px 30px}.deck[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#737574;font-size:20px;font-weight:700;border:1px solid #e3e3e3;border-top:5px solid #e3e3e3;padding:40px 10px;border-radius:5px;min-height:140px;width:auto}.deck[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{color:#615f5f}.deck-link[_ngcontent-%COMP%]{text-decoration:none;outline:none}.active[_ngcontent-%COMP%], .deck[_ngcontent-%COMP%]:hover{border-top-width:1px;border-color:#58a788;border-bottom:5px solid #58a788;color:#58a788}.card-body.hide[_ngcontent-%COMP%]{display:none}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}@media screen and (max-width:600px){.upgrade-card[_ngcontent-%COMP%]{width:95%!important}}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.upgrades-invoice-sticky[_ngcontent-%COMP%]{width:16.4%}.delivery-form[_ngcontent-%COMP%]{position:relative}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-29px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice[_ngcontent-%COMP%]{margin-left:-10px}#remove3[_ngcontent-%COMP%], #removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%]{position:absolute;left:-18px;height:40px;width:40px;background:#fff;color:#424242;border-radius:50%;text-align:center;padding-top:8px;font-size:20px;border:none;box-shadow:-1px 0 0 0 rgba(0,0,0,.2)}#removed[_ngcontent-%COMP%], #removed2[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #remove3[_ngcontent-%COMP%]{left:-22px}.upgrade-close[_ngcontent-%COMP%], .upgrades-invoice-sticky[_ngcontent-%COMP%]   #removed[_ngcontent-%COMP%]{left:-21px}.btn-page[_ngcontent-%COMP%], .upgrade-black-header[_ngcontent-%COMP%]{background-color:#4d493c}.btn-bumps-des[_ngcontent-%COMP%], .upgrade-blue-header[_ngcontent-%COMP%]{background-color:#59a8ea}']}),e})();function ne(e,t){if(1&e&&(c.Qb(0,"div",5),c.Qb(1,"ul"),c.Qb(2,"li"),c.Qb(3,"span"),c.Jc(4),c.Pb(),c.Jc(5),c.Pb(),c.Qb(6,"li"),c.Jc(7),c.Pb(),c.Pb(),c.Pb()),2&e){const e=c.bc();c.yb(4),c.Kc(null==e.adPlan?null:e.adPlan.adPlanName),c.yb(1),c.Lc(" ",e.adPlan.inDays?e.adPlan.days+" Day":e.adPlan.hours+" Hour"," "),c.yb(2),c.Lc(" $ ",e.adPlan.advertisePrice," ")}}function ae(e,t){if(1&e&&(c.Qb(0,"div",5),c.Qb(1,"ul"),c.Qb(2,"li"),c.Qb(3,"span"),c.Jc(4,"Bump Up Plan"),c.Pb(),c.Jc(5),c.Pb(),c.Qb(6,"li"),c.Jc(7),c.Pb(),c.Pb(),c.Pb()),2&e){const e=c.bc();c.yb(5),c.Lc(" ",e.bumpupPlan.count||0," Bump "),c.yb(2),c.Lc(" $ ",e.bumpupPlan.price," ")}}let se=(()=>{class e{constructor(e,t,i,n,a){this.router=e,this.ar=t,this.ps=i,this.loader=n,this.ss=a,this.submitting=!1,this.adPlan=null,this.bumpupPlan=null,this.unsub$=new o.a,this.total=0}ngOnInit(){this.ps.newPage(7),this.ps.AdObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{var t,i,n;this.ad=e,this.ad._id||(alert("ad is not initialized"),this.router.navigate(["/agency/post/select-category"])),this.ad.advertisePlanCheck&&0==(null===(t=this.ad.advertisePlan)||void 0===t?void 0:t.paid)&&(this.adPlan=this.ad.advertisePlan),this.ad.bumpupPlanCheck&&(this.bumpupPlan=this.ad.bumpupPlan),this.total=((null===(i=this.adPlan)||void 0===i?void 0:i.advertisePrice)||0)+((null===(n=this.bumpupPlan)||void 0===n?void 0:n.price)||0),this.total>0&&(this.total+=1)}),this.ss.getUserSessionObservable().pipe(Object(d.a)(this.unsub$)).subscribe(e=>{this.session=e})}nextPage(){this.ad.advertisePlanCheck||this.ad.bumpupPlanCheck?this.handle_upgrade():"published"==this.ad.adState?setTimeout(()=>{this.router.navigate(["/agency/post/edited"])},100):this.publish()}publish(){this.load(),this.ps.publish_normal(this.ad._id).pipe(Object(d.a)(this.unsub$)).subscribe(e=>{e.status?(this.stopload(),this.router.navigate(["/agency/post/complete/"+this.ad._id])):(this.stopload(),alert(e.message))},this.errorHandle.bind(this))}handle_upgrade(){this.router.navigate(["/agency/post/pay-via-card"])}prevPage(){this.router.navigate(["/agency/post/upgrades"])}errorHandle(e){var t;e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Error Occured",e.status+":"+(null===(t=e.error)||void 0===t?void 0:t.message)||e.message),this.stopload()}load(){this.submitting=!0,this.loader.start()}stopload(){this.submitting=!1,this.loader.stop()}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(a.f),c.Kb(a.a),c.Kb(r.a),c.Kb(u.a),c.Kb(p.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-finalize"]],decls:68,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form","ad-sub-cat"],[1,"cat-list"],[1,"ad-sub-list"],["class","ad-sub-list",4,"ngIf"],[1,"border-0"],[1,"col-lg-6"],[1,"price-sec"],[3,"click"],[1,"fa","fa-angle-left"],[1,"price-btn","text-right"],[1,"understand-sec","finalize-sec"],[1,"agree-head"],["href","#"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form"),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"ul"),c.Qb(8,"li"),c.Qb(9,"span"),c.Jc(10,"Advertisement"),c.Pb(),c.Jc(11," Panhandlers / greater toronto area "),c.Pb(),c.Qb(12,"li"),c.Jc(13," $00.00 "),c.Pb(),c.Pb(),c.Pb(),c.Hc(14,ne,8,3,"div",6),c.Hc(15,ae,8,2,"div",6),c.Qb(16,"div",5),c.Qb(17,"ul"),c.Qb(18,"li"),c.Qb(19,"span"),c.Jc(20,"Transactions fee"),c.Pb(),c.Jc(21," You pay it if the total is less than $50.00 "),c.Pb(),c.Qb(22,"li"),c.Jc(23," $00.00 "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(24,"div",3),c.Qb(25,"div",4),c.Qb(26,"div",5),c.Qb(27,"ul"),c.Qb(28,"li"),c.Qb(29,"span"),c.Jc(30,"Sub Total"),c.Pb(),c.Pb(),c.Qb(31,"li"),c.Jc(32," $00.00 "),c.Pb(),c.Pb(),c.Pb(),c.Qb(33,"div",5),c.Qb(34,"ul"),c.Qb(35,"li"),c.Qb(36,"span"),c.Jc(37,"Account Balance"),c.Pb(),c.Pb(),c.Qb(38,"li"),c.Jc(39),c.Pb(),c.Pb(),c.Pb(),c.Qb(40,"div",5),c.Qb(41,"ul",7),c.Qb(42,"li"),c.Qb(43,"span"),c.Jc(44,"Grand Total to Pay"),c.Pb(),c.Pb(),c.Qb(45,"li"),c.Jc(46),c.Pb(),c.Pb(),c.Pb(),c.Qb(47,"div",1),c.Qb(48,"div",8),c.Qb(49,"div",9),c.Qb(50,"a",10),c.Xb("click",(function(){return t.prevPage()})),c.Lb(51,"i",11),c.Pb(),c.Jc(52," All price are listed in "),c.Qb(53,"span"),c.Jc(54,"CAD"),c.Pb(),c.Pb(),c.Pb(),c.Qb(55,"div",8),c.Qb(56,"div",12),c.Qb(57,"a",10),c.Xb("click",(function(){return t.nextPage()})),c.Jc(58," Post Now "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(59,"div",13),c.Qb(60,"div",0),c.Qb(61,"div",14),c.Qb(62,"h5"),c.Jc(63," Prices listed are in CAD "),c.Pb(),c.Qb(64,"p"),c.Jc(65," MyIssues charges wil read MyIssues services on your statement. Need help with payments?"),c.Qb(66,"a",15),c.Jc(67,"Contact Us"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.Cb("submitting",t.submitting),c.yb(14),c.ic("ngIf",null==t.adPlan?null:t.adPlan.adPlanId),c.yb(1),c.ic("ngIf",t.ad.bumpupPlanCheck),c.yb(24),c.Lc(" $",t.session.balance?t.session.balance.toFixed(2):"0.00"," "),c.yb(7),c.Lc(" $ ",t.total," "))},directives:[h.A,h.o,h.p,n.n],styles:['.fixcolor[_ngcontent-%COMP%]{color:#737574}.card-footer[_ngcontent-%COMP%]{padding:.75rem 2rem!important}.submitting[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]     .p-card{box-shadow:0 0 3px rgb(0 0 0/30%)}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}']}),e})();var oe=i("f0io");let de=(()=>{class e{constructor(e,t,i){this.adService=e,this.ds=t,this.router=i}canActivate(e,t){var i,n;const a=null===(i=this.adService._currentAd)||void 0===i?void 0:i._id,s=!!(null===(n=e.data)||void 0===n?void 0:n.isStartStep);return console.log(a),!!s||(a?this.validateRoute.apply(this,[e]):(console.log("hello"),setTimeout(()=>{this.router.navigate(["/agency/post/select-category"])},5),!1))}validateRoute(e){const t=this.lastCompletedStep(),i=e.data.moveToStep;if(1==i)return setTimeout(()=>{this.router.navigate(["/agency/post/select-category"])},5),!1;if(5==i&&t>=4.3)return!0;if(6==i&&t>=5){if("draft"==this.adService._currentAd.adState)return!0}else if(t>=i-1)return!0;return!1}lastCompletedStep(){var e;const t=null===(e=this.adService._currentAd)||void 0===e?void 0:e.completedSteps;console.log(t);const i={1:1,2:2,3:3,5:5,6:6,"4Images":4.1,"4Video":4.2,"4BRP":4.3};let n=0;for(let a in t)t[a]&&i[a]>n&&(n=i[a]);return n>4&&n<5&&(t["4Images"]&&t["4Video"]&&t["4BRP"]||(n=3)),n}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(r.a),c.Ub(_.a),c.Ub(a.f))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ce=[{path:"",component:b,children:[{path:"",redirectTo:"select-category",pathMatch:"full"},{path:"select-category",canActivate:[de],data:{moveToStep:1,isStartStep:!0},component:Q},{path:"select-location",canActivate:[de],data:{moveToStep:2},component:O},{path:"ad-content",canActivate:[de],data:{moveToStep:3},component:F},{path:"upload-images",canActivate:[de],data:{moveToStep:4},component:Y},{path:"user-details",canActivate:[de],data:{moveToStep:5},loadChildren:()=>Promise.all([i.e(5),i.e(0),i.e(73)]).then(i.bind(null,"ByRa")).then(e=>e.AgencyDetailsModule)},{path:"upgrades",canActivate:[de],data:{moveToStep:6},component:ie},{path:"finalize",canActivate:[de],data:{moveToStep:7},component:se},{path:"pay-via-card",loadChildren:()=>i.e(75).then(i.bind(null,"BNUH")).then(e=>e.CardPaymentModule)}]},{path:"complete/:adId",component:oe.a},{path:"add",loadChildren:()=>i.e(74).then(i.bind(null,"yTzj")).then(e=>e.AgencyPostAddModule)}];let re=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(ce)],a.j]}),e})();var le=i("FMpt"),be=i("jIHw"),pe=i("arFO"),ue=i("7kUa"),he=i("dPl2"),ge=i("CwEU"),me=i("eO1q"),Pe=i("qxW0");let fe=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[n.b,re,a.j,l.b,le.a,k.b,be.c,pe.b,h.j,ue.b,I.b,he.c,ge.b,me.b,Pe.a,g.b]]}),e})()}}]);