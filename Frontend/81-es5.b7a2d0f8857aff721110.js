!function(){function i(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function n(i,n){for(var t=0;t<n.length;t++){var c=n[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{wMrW:function(t,c,o){"use strict";o.r(c),o.d(c,"NotificationsModule",(function(){return x}));var e=o("ofXK"),r=o("tyNb"),a=o("fXoL"),s=o("DPk/"),b=o("OC8m"),f=["modalButton"];function d(i,n){if(1&i){var t=a.Rb();a.Qb(0,"div",8),a.Xb("click",(function(){a.zc(t);var i=a.bc().$implicit;return a.bc().check_notif(i)})),a.Qb(1,"p"),a.Qb(2,"i",9),a.Lb(3,"img",10),a.Pb(),a.Qb(4,"strong"),a.Jc(5),a.Pb(),a.Jc(6),a.Pb(),a.Qb(7,"span"),a.Jc(8),a.cc(9,"date"),a.Pb(),a.Pb()}if(2&i){var c=a.bc().$implicit;a.yb(5),a.Kc(c.fromName||"anonymous"),a.yb(1),a.Lc(" ",c.message.substr(0,30),"... "),a.yb(2),a.Kc(a.ec(9,3,c.createdOn,"medium"))}}function l(i,n){if(1&i){var t=a.Rb();a.Qb(0,"div",8),a.Xb("click",(function(){a.zc(t);var i=a.bc().$implicit;return a.bc().check_notif(i)})),a.Qb(1,"p"),a.Qb(2,"i",9),a.Lb(3,"img",10),a.Pb(),a.Qb(4,"strong"),a.Jc(5),a.Pb(),a.Jc(6),a.Pb(),a.Qb(7,"span"),a.Jc(8),a.cc(9,"date"),a.Pb(),a.Pb()}if(2&i){var c=a.bc().$implicit;a.yb(5),a.Kc(c.fromName||"anonymous"),a.yb(1),a.Lc(" ",c.message.substr(0,30),"... "),a.yb(2),a.Kc(a.ec(9,3,c.createdOn,"medium"))}}function u(i,n){if(1&i){var t=a.Rb();a.Qb(0,"div",8),a.Xb("click",(function(){a.zc(t);var i=a.bc().$implicit;return a.bc().check_notif(i)})),a.Qb(1,"p"),a.Qb(2,"i",9),a.Lb(3,"img",10),a.Pb(),a.Qb(4,"strong"),a.Jc(5,"From Admin: "),a.Pb(),a.Jc(6),a.Pb(),a.Qb(7,"span"),a.Jc(8),a.cc(9,"date"),a.Pb(),a.Pb()}if(2&i){var c=a.bc().$implicit;a.yb(6),a.Lc("",c.message.substr(0,30),"... "),a.yb(2),a.Lc("- ",a.ec(9,2,c.createdOn,"medium"),"")}}function p(i,n){if(1&i){var t=a.Rb();a.Qb(0,"div",8),a.Xb("click",(function(){a.zc(t);var i=a.bc().$implicit;return a.bc().check_notif(i)})),a.Qb(1,"p"),a.Qb(2,"i",9),a.Lb(3,"img",10),a.Pb(),a.Qb(4,"strong"),a.Jc(5,"From Admin: "),a.Pb(),a.Jc(6),a.Pb(),a.Qb(7,"span"),a.Jc(8),a.cc(9,"date"),a.Pb(),a.Pb()}if(2&i){var c=a.bc().$implicit;a.yb(6),a.Lc("",c.message.substr(0,30),"... "),a.yb(2),a.Lc("- ",a.ec(9,2,c.createdOn,"medium"),"")}}function g(i,n){if(1&i){var t=a.Rb();a.Qb(0,"div",8),a.Xb("click",(function(){a.zc(t);var i=a.bc().$implicit;return a.bc().check_notif(i)})),a.Qb(1,"p"),a.Qb(2,"i",9),a.Lb(3,"img",10),a.Pb(),a.Qb(4,"strong"),a.Jc(5,"From Admin: "),a.Pb(),a.Jc(6),a.Pb(),a.Qb(7,"span"),a.Jc(8),a.cc(9,"date"),a.Pb(),a.Pb()}if(2&i){var c=a.bc().$implicit;a.yb(6),a.Lc("",c.message.substr(0,30),"... "),a.yb(2),a.Lc("- ",a.ec(9,2,c.createdOn,"medium"),"")}}function m(i,n){if(1&i&&(a.Qb(0,"div",6),a.Hc(1,d,10,6,"div",7),a.Hc(2,l,10,6,"div",7),a.Hc(3,u,10,5,"div",7),a.Hc(4,p,10,5,"div",7),a.Hc(5,g,10,5,"div",7),a.Pb()),2&i){var t=n.$implicit;a.yb(1),a.ic("ngIf","donated"==t.type),a.yb(1),a.ic("ngIf","donated housing"==t.type),a.yb(1),a.ic("ngIf","rejected"==t.type),a.yb(1),a.ic("ngIf","approved"==t.type),a.yb(1),a.ic("ngIf","info"==t.type)}}function v(i,n){1&i&&(a.Qb(0,"p"),a.Jc(1,"You have 0 Notifications"),a.Pb())}function y(i,n){1&i&&a.Lb(0,"div",11)}var h,P,Q,_=[{path:"",component:(h=function(){function t(n,c){i(this,t),this.ds=n,this.notification=c,this.loading=!0,this.selectedNotif=null}var c,o,e;return c=t,(o=[{key:"get_notifications",value:function(){var i=this,n=this.db.transaction(["notifs"],"readwrite");n.objectStore("notifs").get(1),n.oncomplete=function(){i.loading=!1,i.get_notifications_from_server()},n.onerror=function(){console.log(n.error),i.get_notifications_from_server()}}},{key:"get_notifications_from_server",value:function(){var i=this;this.loading=!0,this.ds.get_notifications().subscribe((function(n){i.loading=!1,n.status?(i.notificationArray=n.data,i.save_notifs(n.data)):(alert(n.message),console.log(n))}),(function(n){i.loading=!1,n instanceof ErrorEvent?alert("sorry some unknown error occured in the browser"):alert("".concat(n.status," : ").concat(n.error.message))}))}},{key:"save_notifs",value:function(i){if(this.db){var n=this.db.transaction(["notifs"],"readwrite");n.objectStore("notifs").add(i),n.oncomplete=function(){}}else localStorage.setItem("notifs",JSON.stringify(i))}},{key:"ngOnInit",value:function(){this.get_notifications()}},{key:"check_notif",value:function(i){this.notification.showNotif(i)}}])&&n(c.prototype,o),e&&n(c,e),t}(),h.\u0275fac=function(i){return new(i||h)(a.Kb(s.a),a.Kb(b.a))},h.\u0275cmp=a.Eb({type:h,selectors:[["app-notifications"]],viewQuery:function(i,n){var t;1&i&&a.Qc(f,!0),2&i&&a.vc(t=a.Yb())&&(n.modalButton=t.first)},inputs:{db:"db"},decls:6,vars:3,consts:[[1,"container-fluid",2,"padding","10px 0px"],[1,"row","w-100",2,"margin","0px"],["class","col-12 notif well",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","width","100%","padding","15px 0px"],["class","loader-spinner","style","width: 60px; height: 60px; position: unset;",4,"ngIf"],[1,"col-12","notif","well"],["class","details px-1",3,"click",4,"ngIf"],[1,"details","px-1",3,"click"],[1,"icon-image"],["src","assets\\images\\cancel.png","alt","close icon",1,"icon"],[1,"loader-spinner",2,"width","60px","height","60px","position","unset"]],template:function(i,n){1&i&&(a.Qb(0,"section",0),a.Qb(1,"div",1),a.Hc(2,m,6,5,"div",2),a.Hc(3,v,2,0,"p",3),a.Qb(4,"div",4),a.Hc(5,y,1,0,"div",5),a.Pb(),a.Pb(),a.Pb()),2&i&&(a.yb(2),a.ic("ngForOf",n.notificationArray),a.yb(1),a.ic("ngIf",!n.loading&&0==n.notificationArray.length),a.yb(2),a.ic("ngIf",n.loading))},directives:[e.m,e.n],pipes:[e.d],styles:[".notif[_ngcontent-%COMP%]{position:relative;padding:10px 5px;cursor:pointer}.notif[_ngcontent-%COMP%]:hover{background:#f5f5f5}p[_ngcontent-%COMP%]{text-align:justify;font-size:15px;margin-bottom:0;color:#222221}strong[_ngcontent-%COMP%]{color:#8d0b77;font-weight:bolder}.notif[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;display:block;text-align:right;color:#222221}.icon-image[_ngcontent-%COMP%]{margin-right:5px}.icon[_ngcontent-%COMP%]{width:20px;height:20px}"]}),h)}],w=((P=function n(){i(this,n)}).\u0275mod=a.Ib({type:P}),P.\u0275inj=a.Hb({factory:function(i){return new(i||P)},imports:[[r.j.forChild(_)],r.j]}),P),k=o("3Pt+"),x=((Q=function n(){i(this,n)}).\u0275mod=a.Ib({type:Q}),Q.\u0275inj=a.Hb({factory:function(i){return new(i||Q)},imports:[[e.b,w,k.j]]}),Q)}}])}();