!function(){function e(e,i){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,d=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){d=!0,s=e},f:function(){try{r||null==a.return||a.return()}finally{if(d)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{MA2U:function(t,n,o){"use strict";o.r(n),o.d(n,"PhotosModule",(function(){return O}));var s=o("ofXK"),r=o("tyNb"),d=o("mrSG"),c=o("tk/3"),l=o("XNiG"),b=o("1G5W"),u=o("fXoL"),g=o("E+NS"),m=o("5dVO"),h=o("ndxW"),p=o("3Pt+"),f=o("3LrJ"),v=["adImagesModalClose"],y=["identityImagesModalClose"];function _(e,t){if(1&e){var i=u.Rb();u.Qb(0,"ul"),u.Qb(1,"li"),u.Qb(2,"a"),u.Lb(3,"i",45),u.Pb(),u.Pb(),u.Qb(4,"li"),u.Lb(5,"img",46),u.cc(6,"server"),u.Pb(),u.Qb(7,"li"),u.Jc(8),u.Pb(),u.Qb(9,"li"),u.Qb(10,"a",47),u.Xb("click",(function(){u.zc(i);var e=t.$implicit,a=t.index;return u.bc().deleteAdImage(e,a)})),u.Jc(11,"-"),u.Pb(),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit,n=t.index;u.yb(5),u.jc("src",u.dc(6,2,a),u.Cc),u.yb(3),u.Lc("Ad Image ",n+1,"/10 ")}}function P(e,t){if(1&e){var i=u.Rb();u.Qb(0,"div",48),u.Qb(1,"label",49),u.Lb(2,"img",50),u.Qb(3,"input",51),u.Xb("click",(function(){u.zc(i);var e=t.$implicit,a=t.index;return u.bc().ad_image_selection_change(e.imagePath,a)})),u.Pb(),u.Lb(4,"span",52),u.Pb(),u.Pb()}if(2&e){var a=t.$implicit;u.yb(2),u.jc("src",a.imgPath,u.Cc)}}function I(e,t){if(1&e&&(u.Qb(0,"div",53),u.Qb(1,"label",49),u.Lb(2,"img",50),u.cc(3,"server"),u.Pb(),u.Pb()),2&e){var i=t.$implicit;u.yb(2),u.jc("src",u.dc(3,1,i),u.Cc)}}function w(e,t){if(1&e&&(u.Qb(0,"div",48),u.Qb(1,"label",49),u.Lb(2,"img",50),u.Pb(),u.Pb()),2&e){var i=t.$implicit;u.yb(2),u.jc("src",i.imgPath,u.Cc)}}var Q,k,x,A=[{path:"",component:(Q=function(){function t(e,a,n,o,s){i(this,t),this.ps=e,this.router=a,this.loader=n,this.ar=o,this.ss=s,this.submitting=!1,this.currentSelectedAdImages=[],this.newlyAddedAdImages=0,this.maxAdImages=10,this.currentSelectedIdentityImages=[],this.newlyAddedIdentityImages=0,this.unsub$=new l.a,this.uploadedAdImages=[],this.uploadedIdentityImages=[]}var n,o,s;return n=t,(o=[{key:"ngOnInit",value:function(){this.ps.newPage(5),this.getUserSession(),this.get_ad_data_from_service()}},{key:"getUserSession",value:function(){var e=this;this.ss.getUserSessionObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"get_ad_data_from_service",value:function(){var e=this;this.load(),this.ps.AdObservable().pipe(Object(b.a)(this.unsub$)).subscribe((function(t){e.ad=t,e.stopload(),e.ad_initialized()&&e.preset_images(t)}))}},{key:"ad_initialized",value:function(){var e;return!!(null===(e=this.ad)||void 0===e?void 0:e._id)||(this.ps.newMessage("info","Ad Not Initialized","Please start a new ad by selecting category"),this.router.navigate(["../select-location"],{relativeTo:this.ar}),!1)}},{key:"preset_images",value:function(e){e.adImages instanceof Array&&(this.uploadedAdImages=e.adImages,this.maxAdImages=10-this.uploadedAdImages.length),e.identityImages instanceof Array&&(this.uploadedIdentityImages=e.identityImages)}},{key:"uploadAdImages",value:function(e){var t=this;this.load();var i=e;this.ps.save_ad_images(i).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){t.handle_ad_image_upload_http_events(e,i)}),this.handle_error.bind(this))}},{key:"handle_ad_image_upload_http_events",value:function(e,t){if(e.type==c.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total));else if(e instanceof c.f){var i=e.body;this.stopload(),i.status?this.handle_ad_images_upload_success(i,t):this.ps.newMessage("error","Couldn't Upload",i.message)}}},{key:"handle_ad_images_upload_success",value:function(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedAdImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedAdImages=[],this.adImagesModalCloseButton.nativeElement.click()}},{key:"uploadIdentityImages",value:function(e){var t=this;if(!(this.ad.identityImages.length>0)||confirm("A photo identity image is already Uploaded, Do You want to ReUpload?")){var i=e;this.ps.save_identity_images(i).pipe(Object(b.a)(this.unsub$)).subscribe((function(e){t.handle_identity_images_upload_http_events(e,i)}),(function(e){t.handle_error(e)}))}}},{key:"handle_identity_images_upload_http_events",value:function(e,t){if(e.type==c.d.UploadProgress)this.loader.load(Math.round(100*e.loaded/e.total),"Uploading.....");else if(e instanceof c.f){var i=e.body;this.stopload(),i.status?this.handle_identity_images_upload_success(i,t):this.ps.newMessage("error","Couldn't Upload",i.message)}}},{key:"handle_identity_images_upload_success",value:function(e,t){this.ps.newMessage("success","Images Uploaded","All the images are successfully uploaded"),this.newlyAddedIdentityImages+=t.length,this.ps.NewAdData(e.data),this.currentSelectedIdentityImages=[],this.identityImagesModalCloseButton.nativeElement.click()}},{key:"nextPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"../choose-grocery";this.router.navigate([e],{relativeTo:this.ar.parent})}},{key:"prevPage",value:function(){this.router.navigate(["../../contact-details/step4"],{relativeTo:this.ar})}},{key:"checkUnuploadedFiles",value:function(){return this.currentSelectedAdImages.length>0||this.currentSelectedIdentityImages.length>0}},{key:"select_new_image_for_ad_images",value:function(t,i){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,o,s,r,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:this.submitting=!0,n=t.target.files,o=e(n),a.prev=3,o.s();case 5:if((s=o.n()).done){a.next=17;break}if(r=s.value,!(this.currentSelectedAdImages.length<=10-this.uploadedAdImages.length)){a.next=14;break}return a.next=10,this.convertToBase64(r);case 10:d=a.sent,this.currentSelectedAdImages.push({imgPath:d,blob:r,selected:!0}),a.next=15;break;case 14:this.ps.newMessage("info","Cannot Add More","Maximum number of images reached.");case 15:a.next=5;break;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(3),o.e(a.t0);case 22:return a.prev=22,o.f(),a.finish(22);case 25:i.reset(),this.submitting=!1;case 26:case"end":return a.stop()}}),a,this,[[3,19,22,25]])})))}},{key:"select_new_image_for_identity_images",value:function(e,t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.target.files[0],i.next=3,this.convertToBase64(a);case 3:n=i.sent,this.currentSelectedIdentityImages=[{imgPath:n,blob:a}],t.reset();case 5:case"end":return i.stop()}}),i,this)})))}},{key:"convertToBase64",value:function(e){return new Promise((function(t,i){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(){i("error in parsing")}}))}},{key:"ad_image_selection_change",value:function(e,t){var i;if((null===(i=this.currentSelectedAdImages[t])||void 0===i?void 0:i.imgPath)==e)this.currentSelectedAdImages[t].selected=!this.currentSelectedAdImages[t].selected;else{var a=this.currentSelectedAdImages.find((function(t){return t.imgPath==e}));a.selected=!a.selected}}},{key:"finalize_selected_ad_images",value:function(){var e=this.currentSelectedAdImages.map((function(e){if(1==e.selected)return e.blob}));this.uploadAdImages(e)}},{key:"finalize_selected_identity_images",value:function(){this.uploadIdentityImages([this.currentSelectedIdentityImages[0].blob])}},{key:"confirm_to_discard_selected_images",value:function(){return!1}},{key:"deleteAdImage",value:function(e,t){var i=this;this.load(),this.ps.deleteAdImage(e).pipe(Object(b.a)(this.unsub$)).subscribe((function(a){a.status?(i.ps.newMessage("success","Delete Ad Image","Image was deleted from server"),i.remove_image_from_views(e,t),i.ad.adImages=i.uploadedAdImages,i.ps.NewAdData(i.ad)):(i.ps.newMessage("error","Failed To Delete",a.message),i.stopload())}),this.handle_error.bind(this))}},{key:"remove_image_from_views",value:function(e,t){if(this.uploadedAdImages[t]==e)this.uploadedAdImages.splice(t,1);else{var i=this.uploadedAdImages.indexOf(e);this.uploadedAdImages.splice(i,1)}}},{key:"handle_error",value:function(e){e.error instanceof ErrorEvent?this.ps.newMessage("error","Error Occured","sorry some error occured"):this.ps.newMessage("error","Couldn't Save",e.error.message),this.stopload()}},{key:"openFileDialog",value:function(e){e.click()}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){var e,t;this.unsub$.next(!0),this.unsub$.complete(),null===(e=this.adImagesModalCloseButton)||void 0===e||e.nativeElement.click(),null===(t=this.identityImagesModalCloseButton)||void 0===t||t.nativeElement.click()}}])&&a(n.prototype,o),s&&a(n,s),t}(),Q.\u0275fac=function(e){return new(e||Q)(u.Kb(g.a),u.Kb(r.f),u.Kb(m.a),u.Kb(r.a),u.Kb(h.a))},Q.\u0275cmp=u.Eb({type:Q,selectors:[["app-photos"]],viewQuery:function(e,t){var i;1&e&&(u.Qc(v,!0),u.Qc(y,!0)),2&e&&(u.vc(i=u.Yb())&&(t.adImagesModalCloseButton=i.first),u.vc(i=u.Yb())&&(t.identityImagesModalCloseButton=i.first))},decls:100,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"delivery-form"],[1,"col-lg-12"],[1,"upload-img","text-center"],["data-toggle","modal","data-name1","photo","id","pic1","data-target",".adImg-modal"],["aria-hidden","true",1,"fa","fa-picture-o"],["data-toggle","modal","data-name","photo","id","pic","data-target",".identityImg-modal"],[1,"img-list"],[1,"img-sub-list"],["id","show_image"],[4,"ngFor","ngForOf"],[1,"top-tip"],[1,"fa","fa-info-circle"],[1,"d-footer","c-footer"],["type","button",1,"btn","btn-prev",3,"click"],[1,"fa","fa-angle-left"],[1,"btn","btn-next",3,"click"],[1,"fa","fa-angle-right"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","adImg-modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["adImagesInputForm",""],[1,"modal-header","text-left",2,"border-bottom","none"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["adImagesModalClose",""],["aria-hidden","true"],[1,"modal-body"],[1,"upload-file"],["id","saved-pictures",1,"moderation__grid"],[1,"row","gallery-img-id"],["class","col-sm-2 selectedImages",4,"ngFor","ngForOf"],["id","prepend_div",1,"col-sm-2"],["for","gallery-photo-add",1,"label-head"],["type","file","name","adImages","multiple","","id","gallery-photo-add","accept","image/jpg, image/png",3,"change"],[1,"modal-footer"],["type","button","name","submit",1,"btn","btn-select",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","identityImg-modal","fade","bd-example-modal-lg"],["identityImagesInputForm",""],["identityImagesModalClose",""],["class","col-sm-2 uploadedImages",4,"ngFor","ngForOf"],["for","gallery-photo-add-identity",1,"label-head"],["type","file","name","identityImages","id","gallery-photo-add-identity","accept","image/jpg, image/png",2,"display","none",3,"change"],[1,"fa","fa-bars"],["alt","Images",3,"src"],["href","javascript:void(0)",1,"minus-btn",3,"click"],[1,"col-sm-2","selectedImages"],[1,"image-with-selection"],[1,"image-with-selection__image",3,"src"],["type","checkbox","checked","",1,"image-with-selection__checkbox",3,"click"],[1,"image-with-selection__checkmark"],[1,"col-sm-2","uploadedImages"]],template:function(e,t){if(1&e){var i=u.Rb();u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"form"),u.Qb(4,"div",3),u.Qb(5,"div",0),u.Qb(6,"div",1),u.Qb(7,"div",4),u.Qb(8,"div",5),u.Qb(9,"ul"),u.Qb(10,"li",6),u.Lb(11,"i",7),u.Jc(12," Add Pictures"),u.Qb(13,"span"),u.Jc(14),u.Pb(),u.Pb(),u.Qb(15,"li",8),u.Lb(16,"i",7),u.Jc(17," Profile ID"),u.Qb(18,"span"),u.Jc(19,"Photo"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(20,"div",9),u.Qb(21,"div",10),u.Qb(22,"span",11),u.Hc(23,_,12,4,"ul",12),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(24,"div",13),u.Qb(25,"h3"),u.Lb(26,"i",14),u.Jc(27," Top tip for a successful advertisement "),u.Pb(),u.Qb(28,"p"),u.Jc(29," It's obvious that adding a good photo will increase your ad's potential for success, but it's equally important to have agood number of photos, especially from different angles,perspectives,and locations. Experiment. "),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(30,"div",15),u.Qb(31,"ul"),u.Qb(32,"li"),u.Qb(33,"button",16),u.Xb("click",(function(){return t.prevPage()})),u.Lb(34,"i",17),u.Jc(35,"Previous step"),u.Pb(),u.Pb(),u.Qb(36,"li"),u.Qb(37,"button",18),u.Xb("click",(function(){return t.nextPage("/"+t.session.type)})),u.Jc(38," Save & Exit "),u.Pb(),u.Pb(),u.Qb(39,"li"),u.Qb(40,"button",18),u.Xb("click",(function(){return t.nextPage()})),u.Jc(41," Next step "),u.Lb(42,"i",19),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(43,"div",20),u.Qb(44,"div",21),u.Qb(45,"div",22),u.Qb(46,"div",22),u.Qb(47,"form",null,23),u.Qb(49,"div",24),u.Qb(50,"h5",25),u.Jc(51,"Select from your computer"),u.Pb(),u.Qb(52,"button",26,27),u.Qb(54,"span",28),u.Jc(55,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(56,"div",29),u.Qb(57,"div",30),u.Qb(58,"div",31),u.Qb(59,"div",32),u.Hc(60,P,5,1,"div",33),u.Qb(61,"div",34),u.Qb(62,"label",35),u.Qb(63,"span"),u.Jc(64,"+"),u.Pb(),u.Jc(65,"Add"),u.Pb(),u.Qb(66,"input",36),u.Xb("change",(function(e){u.zc(i);var a=u.wc(48);return t.select_new_image_for_ad_images(e,a)})),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(67,"div",37),u.Qb(68,"button",38),u.Xb("click",(function(){return t.finalize_selected_ad_images()})),u.Jc(69,"Use selected Pics "),u.Lb(70,"i",19),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(71,"div",39),u.Qb(72,"div",21),u.Qb(73,"div",22),u.Qb(74,"div",22),u.Qb(75,"form",null,40),u.Qb(77,"div",24),u.Qb(78,"h5",25),u.Jc(79,"Provide To Passport Like Photos No Head Or Face Covering. For Verification Delivery And Cash Pickups"),u.Pb(),u.Qb(80,"button",26,41),u.Qb(82,"span",28),u.Jc(83,"\xd7"),u.Pb(),u.Pb(),u.Pb(),u.Qb(84,"div",29),u.Qb(85,"div",30),u.Qb(86,"div",31),u.Qb(87,"div",32),u.Hc(88,I,4,3,"div",42),u.Hc(89,w,3,1,"div",33),u.Qb(90,"div",34),u.Qb(91,"label",43),u.Qb(92,"span"),u.Jc(93,"+"),u.Pb(),u.Jc(94,"Add"),u.Pb(),u.Qb(95,"input",44),u.Xb("change",(function(e){u.zc(i);var a=u.wc(76);return t.select_new_image_for_identity_images(e,a)})),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(96,"div",37),u.Qb(97,"button",38),u.Xb("click",(function(){return t.finalize_selected_identity_images()})),u.Jc(98,"Use selected Pics "),u.Lb(99,"i",19),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&e&&(u.Cb("submitting",t.submitting),u.yb(14),u.Lc("",10-t.uploadedAdImages.length," Left"),u.yb(9),u.ic("ngForOf",t.uploadedAdImages),u.yb(37),u.ic("ngForOf",t.currentSelectedAdImages),u.yb(28),u.ic("ngForOf",t.uploadedIdentityImages),u.yb(1),u.ic("ngForOf",t.currentSelectedIdentityImages))},directives:[p.A,p.o,p.p,s.m],pipes:[f.a],styles:['.container[_ngcontent-%COMP%]{margin-right:0;margin-left:0;padding-left:0;padding-right:0;max-width:100%!important}.submitting[_ngcontent-%COMP%]{position:relative}.submitting[_ngcontent-%COMP%]:before{content:" ";width:100%;height:100%;background:hsla(0,0%,100%,.6);position:absolute;top:0;left:0;z-index:1111}.error[_ngcontent-%COMP%]{color:red}button.btn.btn-select[_ngcontent-%COMP%]{color:#fff;font-weight:700;background:#01768a;padding:9px 30px 5px}.image-with-selection__checkmark[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;width:18px;height:18px;top:4.5px;right:4.5px;border:1.5px solid hsla(0,0%,100%,.9);background-color:rgba(0,0,0,.5);z-index:10;border-radius:50%}.image-with-selection__checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute}.image-with-selection__checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]:after{left:6.5px;top:3.5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}.image-with-selection[_ngcontent-%COMP%]{width:100%;border-radius:6px;overflow:hidden;display:flex;position:relative;margin-right:15px;margin-bottom:15px}.image-with-selection__checkbox[_ngcontent-%COMP%]:checked ~ .image-with-selection__checkmark[_ngcontent-%COMP%]{background-color:#58a688;box-shadow:0 2px 9px 0 rgba(0,0,0,.76);border:none}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:4px 0 0;margin-top:1px\\9;line-height:normal}.image-with-selection__image[_ngcontent-%COMP%]{width:100px;height:100px}']}),Q)}],M=((k=function e(){i(this,e)}).\u0275mod=u.Ib({type:k}),k.\u0275inj=u.Hb({factory:function(e){return new(e||k)},imports:[[r.j.forChild(A)],r.j]}),k),C=o("qxW0"),O=((x=function e(){i(this,e)}).\u0275mod=u.Ib({type:x}),x.\u0275inj=u.Hb({factory:function(e){return new(e||x)},imports:[[s.b,M,p.j,C.a]]}),x)},mrSG:function(e,t,i){"use strict";function a(e,t,i,a){return new(i||(i=Promise))((function(n,o){function s(e){try{d(a.next(e))}catch(t){o(t)}}function r(e){try{d(a.throw(e))}catch(t){o(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,r)}d((a=a.apply(e,t||[])).next())}))}i.d(t,"a",(function(){return a}))}}])}();