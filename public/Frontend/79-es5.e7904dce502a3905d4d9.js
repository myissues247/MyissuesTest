!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{Pr6m:function(t,o,i){"use strict";i.r(o),i.d(o,"FoodbankContactDetailsModule",(function(){return E}));var r,a,s,b=i("ofXK"),l=i("tyNb"),c=i("fXoL"),d=((r=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Eb({type:r,selectors:[["app-foodbank-contact-details"]],decls:1,vars:0,template:function(e,t){1&e&&c.Lb(0,"router-outlet")},directives:[l.k],styles:[""]}),r),u=i("3Pt+"),p=i("XNiG"),m=i("1G5W"),h=i("E+NS"),v=i("ndxW"),f=i("5dVO"),y=["next"],P=((a=function(){function t(n,o,i,r,a,s){e(this,t),this.ps=n,this.ss=o,this.router=i,this.fb=r,this.ar=a,this.loader=s,this.step1Form=this.fb.group({eligibilityCriteria:["",u.y.compose([u.y.required,u.y.pattern(/^(Yes|No)$/i)])],firstVisitToFoodbank:[""],firstName:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z]+ *$/)])],lastName:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z]+ *$/)])],dob:[null,u.y.required],gender:["male",u.y.required],maritalStatus:["single",u.y.required],contactInfo:this.fb.group({address:["",u.y.required],city:["",u.y.required],postalCode:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z0-9 ]{6,8}$/)])],housingType:["Own home",u.y.required],phone:["",u.y.compose([u.y.required,u.y.pattern(/^\+?[0-9]{10,13}$/)])],email:["",u.y.compose([u.y.required,u.y.email])],specialInstruction:["",u.y.maxLength(50)],languageSpoken:["",u.y.compose([u.y.required,u.y.pattern(/^[a-zA-Z, ]+$/)])],deliveryPreference:["Deliver to My Home (between 10:00 AM to 7:00 PM)",u.y.required]})}),this.isModified=!1,this.submitting=!1,this.unsub$=new p.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){if(!t._id)return e.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),e.router.navigate(["../select-location"],{relativeTo:e.ar}),!1;e.ad=t,e.preset_input_values()})),this.ss.getUserSessionObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"buttonEventFromParent",value:function(){var e=this;this.ps.checkSubmition().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){var n,o;"save-next"==t?null===(o=null===(n=e.submitButtonRef)||void 0===n?void 0:n.nativeElement)||void 0===o||o.click():"prev"==t?e.prevPage():e.nextNoSave()}))}},{key:"preset_input_values",value:function(){var e=this.ad,t={eligibilityCriteria:e.eligibilityCriteria,firstVisitToFoodbank:e.firstVisitToFoodbank,firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.gender,maritalStatus:e.maritalStatus,contactInfo:e.contactInfo},n=t.contactInfo.languageSpoken;n instanceof Array&&(t.contactInfo.languageSpoken=null==n?void 0:n.join(", "));var o=JSON.parse(JSON.stringify(t));this.step1Form.patchValue(o),this.contactInfoGroup.city.value||(this.contactInfoGroup.city.value=this.ad.city)}},{key:"save",value:function(e){var t=this;this.load();var n=this.step1Form.value;n.contactInfo.languageSpoken=this.step1Form.value.contactInfo.languageSpoken.split(/, */),this.ps.save_contact_details_step1(this.ad._id,n).subscribe((function(n){t.stopload(),n.status?(t.ps.newMessage("success","Ad was updated",n.message),t.ps.NewAdData(n.data),t.router.navigate([e],{relativeTo:t.ar})):t.ps.newMessage("error","Ad not updated",n.message)}),this.handle_error.bind(this))}},{key:"prevPage",value:function(){this.router.navigate(["../../steps/ad-content"],{relativeTo:this.ar})}},{key:"nextPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"../step2";if("INVALID"==this.step1Form.status)return this.ps.newMessage("error","Invalid Form Data","Please fill the form correctly");this.save(e)}},{key:"nextNoSave",value:function(){this.router.navigate(["../step2"],{relativeTo:this.ar})}},{key:"handle_error",value:function(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}},{key:"firstNameInput",get:function(){return this.step1Form.controls.firstName}},{key:"lastNameInput",get:function(){return this.step1Form.controls.lastName}},{key:"eligibilityCriteriaInput",get:function(){return this.step1Form.controls.eligibilityCriteria}},{key:"dobInput",get:function(){return this.step1Form.controls.dob}},{key:"maritalStatusInput",get:function(){return this.step1Form.controls.maritalStatus}},{key:"genderInput",get:function(){return this.step1Form.controls.gender}},{key:"firstVisitToFoodbankInput",get:function(){return this.step1Form.controls.firstVisitToFoodbank}},{key:"contactInfoGroup",get:function(){return this.step1Form.controls.contactInfo.controls}}]),t}()).\u0275fac=function(e){return new(e||a)(c.Kb(h.a),c.Kb(v.a),c.Kb(l.f),c.Kb(u.d),c.Kb(l.a),c.Kb(f.a))},a.\u0275cmp=c.Eb({type:a,selectors:[["app-step1"]],viewQuery:function(e,t){var n;1&e&&c.Qc(y,!0),2&e&&c.vc(n=c.Yb())&&(t.submitButtonRef=n.first)},features:[c.xb([u.d])],decls:332,vars:37,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[3,"formGroup","ngSubmit"],["step1FormRef","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"text-center","var-sub-head"],[1,"form-head"],[1,"form-input"],[1,"del-label"],[1,"form-group"],["name","eligibilityCriteria","type","text","formControlName","eligibilityCriteria","placeholder","Yes/No",1,"form-control","capitalize"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["name","firstVisitToFoodbank","type","text","formControlName","firstVisitToFoodbank",1,"form-control"],[1,"errors"],["name","lastName","type","text","formControlName","lastName",1,"form-control"],["name","firstName","type","text","formControlName","firstName",1,"form-control"],["name","dob","type","date","formControlName","dob",1,"form-control"],[1,"col-lg-4"],[1,"city-checkbx-list"],[1,"city-radio"],["name","gender","type","radio","value","female","checked","checked","formControlName","gender"],[1,"checkmark"],["name","gender","type","radio","value","male","formControlName","gender"],["name","gender","type","radio","value","transgender","formControlName","gender"],["name","gender","type","radio","value","other","formControlName","gender"],["name","gender","type","radio","value","undisclosed","formControlName","gender"],["name","maritalStatus","type","radio","value","single","checked","checked","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","married","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","common-law","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","divorced","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","separated","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","widowed","formControlName","maritalStatus"],["name","maritalStatus","type","radio","value","undisclosed","formControlName","maritalStatus"],["formGroupName","contactInfo",1,"form-contact"],[1,"form-subnote"],["name","address","type","text","formControlName","address",1,"form-control"],["name","city","type","text","formControlName","city",1,"form-control"],["name","postalCode","type","text","formControlName","postalCode",1,"form-control"],[1,"col-lg-6"],["name","housingType","type","radio","value","Own home","checked","checked","formControlName","housingType"],["name","housingType","type","radio","value","Private rental","formControlName","housingType"],["name","housingType","type","radio","value","Emergency shelter","formControlName","housingType"],["name","housingType","type","radio","value","Band owned (reserve lands)","formControlName","housingType"],["name","housingType","type","radio","formControlName","housingType"],["name","housingType","type","radio","value","Group home/youth shelter","formControlName","housingType"],["name","housingType","type","radio","value","Staying with family/friends","formControlName","housingType"],["name","housingType","type","radio","value","On the street","formControlName","housingType"],["name","housingType","type","radio","value","Social rental housing (subsidized housing provided through Peel Living)","formControlName","housingType"],["name","housingType","type","radio","value","other","formControlName","housingType"],["name","phone","type","text","formControlName","phone",1,"form-control"],["name","email","type","email","formControlName","email",1,"form-control"],["name","specialInstruction","type","text","formControlName","specialInstruction",1,"form-control"],["name","languageSpoken","type","text","formControlName","languageSpoken",1,"form-control"],["name","deliveryPreference","type","radio","value","Deliver to My Home (between 10:00 AM to 7:00 PM)","checked","checked","formControlName","deliveryPreference"],["name","deliveryPreference","type","radio","value","Nearest Pick up Location to me (between 9:30 AM to 4:30 PM)","formControlName","deliveryPreference"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../../steps/ad-details",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e&&(c.Qb(0,"section",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form",3,4),c.Xb("ngSubmit",(function(){return t.nextPage()})),c.Qb(5,"div",5),c.Qb(6,"div",6),c.Qb(7,"div",2),c.Qb(8,"div",7),c.Qb(9,"h4",8),c.Jc(10," Any information provided below is used by myissues to serve your best needs. "),c.Pb(),c.Qb(11,"h3",9),c.Jc(12," Food Bank Client Application "),c.Pb(),c.Qb(13,"div",10),c.Qb(14,"label",11),c.Jc(15," Please let us know your reason for applying to this program, you may refer to the "),c.Pb(),c.Qb(16,"div",12),c.Qb(17,"label",11),c.Jc(18," eligibility criteria listed above "),c.Qb(19,"span"),c.Jc(20,"*"),c.Pb(),c.Pb(),c.Lb(21,"input",13),c.Qb(22,"div",14),c.Qb(23,"div",15),c.Jc(24,"Field can't be empty"),c.Pb(),c.Qb(25,"div",15),c.Jc(26,"Please enter either Yes or No"),c.Pb(),c.Pb(),c.Pb(),c.Qb(27,"div",12),c.Qb(28,"label",11),c.Jc(29," If applicable, please give us an estimation of when you first visited a food bank "),c.Pb(),c.Lb(30,"input",16),c.Qb(31,"p"),c.Jc(32,"This applies to any food bank in any city or country"),c.Pb(),c.Qb(33,"div",17),c.Qb(34,"div",15),c.Jc(35,"Field can't be empty"),c.Pb(),c.Pb(),c.Pb(),c.Qb(36,"div",12),c.Qb(37,"label",11),c.Jc(38," Last name "),c.Qb(39,"span"),c.Jc(40,"*"),c.Pb(),c.Pb(),c.Lb(41,"input",18),c.Qb(42,"div",14),c.Qb(43,"div",15),c.Jc(44,"Field can't be empty"),c.Pb(),c.Qb(45,"div",15),c.Jc(46,"Please enter valid value(only alphabets)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(47,"div",12),c.Qb(48,"label",11),c.Jc(49," First name "),c.Qb(50,"span"),c.Jc(51,"*"),c.Pb(),c.Pb(),c.Lb(52,"input",19),c.Qb(53,"div",14),c.Qb(54,"div",15),c.Jc(55,"Field can't be empty"),c.Pb(),c.Qb(56,"div",15),c.Jc(57,"Please enter valid value(only alphabets)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(58,"div",12),c.Qb(59,"label",11),c.Jc(60," Date of birth "),c.Qb(61,"span"),c.Jc(62,"*"),c.Pb(),c.Pb(),c.Lb(63,"input",20),c.Qb(64,"div",17),c.Qb(65,"div",15),c.Jc(66,"Field can't be empty"),c.Pb(),c.Pb(),c.Pb(),c.Qb(67,"div",12),c.Qb(68,"label",11),c.Jc(69," Gender "),c.Qb(70,"span"),c.Jc(71,"*"),c.Pb(),c.Pb(),c.Qb(72,"div",2),c.Qb(73,"div",21),c.Qb(74,"div",22),c.Qb(75,"label",23),c.Jc(76," Female "),c.Lb(77,"input",24),c.Lb(78,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(79,"div",21),c.Qb(80,"div",22),c.Qb(81,"label",23),c.Jc(82," Male "),c.Lb(83,"input",26),c.Lb(84,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(85,"div",21),c.Qb(86,"div",22),c.Qb(87,"label",23),c.Jc(88," Transgender "),c.Lb(89,"input",27),c.Lb(90,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(91,"div",21),c.Qb(92,"div",22),c.Qb(93,"label",23),c.Jc(94," Other "),c.Lb(95,"input",28),c.Lb(96,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(97,"div",21),c.Qb(98,"div",22),c.Qb(99,"label",23),c.Jc(100," Undisclosed "),c.Lb(101,"input",29),c.Lb(102,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(103,"div",17),c.Qb(104,"div",15),c.Jc(105,"Please select one of the option"),c.Pb(),c.Pb(),c.Pb(),c.Qb(106,"div",12),c.Qb(107,"label",11),c.Jc(108," Marital State "),c.Qb(109,"span"),c.Jc(110,"*"),c.Pb(),c.Pb(),c.Qb(111,"div",2),c.Qb(112,"div",21),c.Qb(113,"div",22),c.Qb(114,"label",23),c.Jc(115," Single "),c.Lb(116,"input",30),c.Lb(117,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(118,"div",21),c.Qb(119,"div",22),c.Qb(120,"label",23),c.Jc(121," Married "),c.Lb(122,"input",31),c.Lb(123,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(124,"div",21),c.Qb(125,"div",22),c.Qb(126,"label",23),c.Jc(127," Common-law "),c.Lb(128,"input",32),c.Lb(129,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(130,"div",21),c.Qb(131,"div",22),c.Qb(132,"label",23),c.Jc(133," Divorced "),c.Lb(134,"input",33),c.Lb(135,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(136,"div",21),c.Qb(137,"div",22),c.Qb(138,"label",23),c.Jc(139," Separated "),c.Lb(140,"input",34),c.Lb(141,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(142,"div",21),c.Qb(143,"div",22),c.Qb(144,"label",23),c.Jc(145," Widowed "),c.Lb(146,"input",35),c.Lb(147,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(148,"div",21),c.Qb(149,"div",22),c.Qb(150,"label",23),c.Jc(151," Undisclosed "),c.Lb(152,"input",36),c.Lb(153,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(154,"div",17),c.Qb(155,"div",15),c.Jc(156,"Please select one of the options"),c.Pb(),c.Pb(),c.Pb(),c.Qb(157,"fieldset",37),c.Qb(158,"legend"),c.Jc(159,"Contact information"),c.Pb(),c.Qb(160,"p",38),c.Jc(161,"You must reside in Mississauga to access this program."),c.Pb(),c.Qb(162,"div",12),c.Qb(163,"label",11),c.Jc(164," Address "),c.Qb(165,"span"),c.Jc(166,"*"),c.Pb(),c.Pb(),c.Lb(167,"input",39),c.Qb(168,"div",17),c.Qb(169,"div",15),c.Jc(170,"Field can't be empty"),c.Pb(),c.Pb(),c.Pb(),c.Qb(171,"div",12),c.Qb(172,"label",11),c.Jc(173," City "),c.Qb(174,"span"),c.Jc(175,"*"),c.Pb(),c.Pb(),c.Lb(176,"input",40),c.Qb(177,"div",14),c.Qb(178,"div",15),c.Jc(179,"Field can't be empty"),c.Pb(),c.Qb(180,"div",15),c.Jc(181,"Please enter valid value(only alphabets)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(182,"div",12),c.Qb(183,"label",11),c.Jc(184," Postal Code "),c.Qb(185,"span"),c.Jc(186,"*"),c.Pb(),c.Pb(),c.Lb(187,"input",41),c.Qb(188,"div",14),c.Qb(189,"div",15),c.Jc(190,"Field can't be empty"),c.Pb(),c.Qb(191,"div",15),c.Jc(192,"Please enter valid value(only alphanumeric values 6 characters long)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(193,"div",12),c.Qb(194,"label",11),c.Jc(195," Housing type "),c.Pb(),c.Qb(196,"div",2),c.Qb(197,"div",42),c.Qb(198,"div",22),c.Qb(199,"label",23),c.Jc(200," Own home "),c.Lb(201,"input",43),c.Lb(202,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(203,"div",42),c.Qb(204,"div",22),c.Qb(205,"label",23),c.Jc(206," Private rental "),c.Lb(207,"input",44),c.Lb(208,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(209,"div",42),c.Qb(210,"div",22),c.Qb(211,"label",23),c.Jc(212," Emergency shelter "),c.Lb(213,"input",45),c.Lb(214,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(215,"div",42),c.Qb(216,"div",22),c.Qb(217,"label",23),c.Jc(218," Band owned (reserve lands) "),c.Lb(219,"input",46),c.Lb(220,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(221,"div",42),c.Qb(222,"div",22),c.Qb(223,"label",23),c.Jc(224," Rooming house (multi-tenant house) "),c.Lb(225,"input",47),c.Lb(226,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(227,"div",42),c.Qb(228,"div",22),c.Qb(229,"label",23),c.Jc(230," Group home/youth shelter "),c.Lb(231,"input",48),c.Lb(232,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(233,"div",42),c.Qb(234,"div",22),c.Qb(235,"label",23),c.Jc(236," Staying with family/friends "),c.Lb(237,"input",49),c.Lb(238,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(239,"div",42),c.Qb(240,"div",22),c.Qb(241,"label",23),c.Jc(242," On the street "),c.Lb(243,"input",50),c.Lb(244,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(245,"div",42),c.Qb(246,"div",22),c.Qb(247,"label",23),c.Jc(248," Social rental housing (subsidized housing provided through Peel Living) "),c.Lb(249,"input",51),c.Lb(250,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(251,"div",42),c.Qb(252,"div",22),c.Qb(253,"label",23),c.Jc(254," Other "),c.Lb(255,"input",52),c.Lb(256,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(257,"div",17),c.Qb(258,"div",15),c.Jc(259,"Please select one of the options"),c.Pb(),c.Pb(),c.Pb(),c.Qb(260,"div",12),c.Qb(261,"label",11),c.Jc(262," Phone number "),c.Qb(263,"span"),c.Jc(264,"*"),c.Pb(),c.Pb(),c.Lb(265,"input",53),c.Qb(266,"div",14),c.Qb(267,"div",15),c.Jc(268,"Field can't be empty"),c.Pb(),c.Qb(269,"div",15),c.Jc(270,"Please enter valid value"),c.Pb(),c.Pb(),c.Pb(),c.Qb(271,"div",12),c.Qb(272,"label",11),c.Jc(273," Email address "),c.Pb(),c.Lb(274,"input",54),c.Qb(275,"div",14),c.Qb(276,"div",15),c.Jc(277,"Field can't be empty"),c.Pb(),c.Qb(278,"div",15),c.Jc(279,"Please enter valid value"),c.Pb(),c.Pb(),c.Pb(),c.Qb(280,"div",12),c.Qb(281,"label",11),c.Jc(282," Please provide any special instructions to reach your home, such as your buzzer number or parking instructions. "),c.Pb(),c.Lb(283,"input",55),c.Qb(284,"div",14),c.Qb(285,"div",15),c.Jc(286,"Field can't be empty"),c.Pb(),c.Qb(287,"div",15),c.Jc(288,"Please enter valid value"),c.Pb(),c.Pb(),c.Pb(),c.Qb(289,"div",12),c.Qb(290,"label",11),c.Jc(291," Language(s) spoken "),c.Qb(292,"span"),c.Jc(293,"*"),c.Pb(),c.Pb(),c.Lb(294,"input",56),c.Qb(295,"p"),c.Jc(296,"Please list all language(s) that you speak proficiently (use comma(,) seperated words) "),c.Pb(),c.Qb(297,"div",14),c.Qb(298,"div",15),c.Jc(299,"Field can't be empty"),c.Pb(),c.Qb(300,"div",15),c.Jc(301,"Please enter valid value"),c.Pb(),c.Pb(),c.Pb(),c.Qb(302,"div",12),c.Qb(303,"label",11),c.Jc(304," How would you prefer to receive a weekly delivery from us? "),c.Pb(),c.Qb(305,"div",2),c.Qb(306,"div",42),c.Qb(307,"div",22),c.Qb(308,"label",23),c.Jc(309," Deliver to My Home (between 10:00 AM to 7:00 PM) "),c.Lb(310,"input",57),c.Lb(311,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Qb(312,"div",42),c.Qb(313,"div",22),c.Qb(314,"label",23),c.Jc(315," Nearest Pick up Location to me (between 9:30 AM to 4:30 PM) "),c.Lb(316,"input",58),c.Lb(317,"span",25),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(318,"div",17),c.Qb(319,"div",15),c.Jc(320,"Please select one of the options"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(321,"div",59),c.Qb(322,"ul"),c.Qb(323,"li"),c.Qb(324,"button",60),c.Lb(325,"i",61),c.Jc(326," Previous step "),c.Pb(),c.Pb(),c.Qb(327,"li"),c.Qb(328,"button",62,63),c.Jc(330," Next step "),c.Lb(331,"i",64),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e){var n=c.wc(4);c.yb(3),c.ic("formGroup",t.step1Form),c.yb(3),c.Cb("submitting",t.submitting),c.yb(16),c.ic("hidden",!(n.submitted&&t.eligibilityCriteriaInput.errors)),c.yb(1),c.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.eligibilityCriteriaInput.errors&&t.eligibilityCriteriaInput.errors.pattern)),c.yb(9),c.ic("hidden",!(n.submitted&&null!=t.firstVisitToFoodbankInput.errors&&t.firstVisitToFoodbankInput.errors.required)),c.yb(8),c.ic("hidden",!(n.submitted&&t.lastNameInput.errors)),c.yb(1),c.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.lastNameInput.errors&&t.lastNameInput.errors.pattern)),c.yb(8),c.ic("hidden",!(n.submitted&&t.firstNameInput.errors)),c.yb(1),c.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.firstNameInput.errors&&t.firstNameInput.errors.pattern)),c.yb(9),c.ic("hidden",!(n.submitted&&null!=t.dobInput.errors&&t.dobInput.errors.required)),c.yb(39),c.ic("hidden",!(n.submitted&&null!=t.genderInput.errors&&t.genderInput.errors.required)),c.yb(51),c.ic("hidden",!(n.submitted&&null!=t.maritalStatusInput.errors&&t.maritalStatusInput.errors.required)),c.yb(14),c.ic("hidden",!(n.submitted&&null!=t.contactInfoGroup.address.errors&&t.contactInfoGroup.address.errors.required)),c.yb(8),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.city.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.city.errors&&t.contactInfoGroup.city.errors.pattern)),c.yb(8),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.postalCode.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.postalCode.errors&&t.contactInfoGroup.postalCode.errors.pattern)),c.yb(67),c.ic("hidden",!(n.submitted&&null!=t.contactInfoGroup.housingType.errors&&t.contactInfoGroup.housingType.errors.required)),c.yb(8),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.phone.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.phone.errors&&t.contactInfoGroup.phone.errors.pattern)),c.yb(6),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.email.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.email.errors&&t.contactInfoGroup.email.errors.email)),c.yb(6),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.specialInstruction.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.specialInstruction.errors&&t.contactInfoGroup.specialInstruction.errors.pattern)),c.yb(10),c.ic("hidden",!(n.submitted&&t.contactInfoGroup.languageSpoken.errors)),c.yb(1),c.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.contactInfoGroup.languageSpoken.errors&&t.contactInfoGroup.languageSpoken.errors.pattern)),c.yb(19),c.ic("hidden",!(n.submitted&&null!=t.contactInfoGroup.deliveryPreference.errors&&t.contactInfoGroup.deliveryPreference.errors.required))}},directives:[u.A,u.o,u.h,u.c,u.n,u.f,u.u,u.i,l.g],styles:[""]}),a),g=["next"],Q=((s=function(){function t(n,o,i,r,a){e(this,t),this.ps=n,this.ss=o,this.router=i,this.ar=r,this.loader=a,this.submitting=!1,this.unsub$=new p.a,this.init_form_data()}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.ps.AdObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){if(!t._id)return e.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),e.router.navigate(["../select-location"],{relativeTo:e.ar}),!1;e.ad=t,e.preset_input_values()})),this.ss.getUserSessionObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"ngAfterViewInit",value:function(){this.buttonEventFromParent()}},{key:"buttonEventFromParent",value:function(){var e=this;this.ps.checkSubmition().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){var n,o;"save-next"==t?null===(o=null===(n=e.submitButtonRef)||void 0===n?void 0:n.nativeElement)||void 0===o||o.click():"prev"==t?e.prevPage():e.nextNoSave()}))}},{key:"preset_input_values",value:function(){this.householdMembers=Object.assign(Object.assign({},this.householdMembers),this.ad.householdMembers),this.education=Object.assign(Object.assign({},this.education),this.ad.education),this.fill_empty_options_and_selectors()}},{key:"fill_empty_options_and_selectors",value:function(){for(var e in this.householdMembers)this.householdMembers[e]=this.householdMembers[e]||"";this.education.level=this.education.level||"grade 0-8"}},{key:"save",value:function(){var e=this;this.load(),this.ps.save_contact_details_step2(this.ad._id,{householdMembers:this.householdMembers,education:this.education}).subscribe((function(t){e.stopload(),t.status?(e.ps.newMessage("success","Details were saved",t.message),e.ps.NewAdData(t.data),e.router.navigate(["../step3"],{relativeTo:e.ar})):e.ps.newMessage("error","Details not saved",t.message)}),this.handle_error.bind(this))}},{key:"nextPage",value:function(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.save()}},{key:"nextNoSave",value:function(){this.router.navigate(["../step3"],{relativeTo:this.ar})}},{key:"prevPage",value:function(){this.router.navigate(["../step1"],{relativeTo:this.ar})}},{key:"handle_error",value:function(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}},{key:"init_form_data",value:function(){this.householdMembers={numChildren:null,numAdults:null,numSeniors:null},this.education={level:"grade 0-8",country:null}}}]),t}()).\u0275fac=function(e){return new(e||s)(c.Kb(h.a),c.Kb(v.a),c.Kb(l.f),c.Kb(l.a),c.Kb(f.a))},s.\u0275cmp=c.Eb({type:s,selectors:[["app-step2"]],viewQuery:function(e,t){var n;1&e&&c.Qc(g,!0),2&e&&c.vc(n=c.Yb())&&(t.submitButtonRef=n.first)},decls:152,vars:19,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[3,"ngSubmit"],["step2Form","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"select-wrap"],["name","numChildren","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["name","numAdults","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["name","numSeniors","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["valueu","3"],[1,"col-lg-6"],[1,"city-checkbx-list"],[1,"city-radio"],["type","radio","name","level","value","grade 0-8","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"checkmark"],["type","radio","name","level","value","grade 9-11","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","grade 12","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","post secondary (some)","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","trade certificate/professional accreditation","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","college diploma","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","university degree","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Phd","required","","ngModel","",3,"ngModel","ngModelChange"],["type","radio","name","level","value","Undisclosed","required","","ngModel","",3,"ngModel","ngModelChange"],[1,"errors"],[1,"error",3,"hidden"],[1,"col-sm-12"],["type","text","name","country","pattern","^[a-zA-Z]+ *$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["countryInput","ngModel"],[1,"errors",3,"hidden"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step1",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"]],template:function(e,t){if(1&e){var n=c.Rb();c.Qb(0,"section",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form",3,4),c.Xb("ngSubmit",(function(){c.zc(n);var e=c.wc(4);return t.nextPage(e)})),c.Qb(5,"div",5),c.Qb(6,"div",6),c.Qb(7,"div",2),c.Qb(8,"div",7),c.Qb(9,"div",8),c.Qb(10,"fieldset",9),c.Qb(11,"legend"),c.Jc(12,"Household members"),c.Pb(),c.Qb(13,"p",10),c.Jc(14,"Please list the number of household member(s), if any, reside in your household."),c.Pb(),c.Qb(15,"div",11),c.Qb(16,"label",12),c.Jc(17," Number of children or youth (0-17 years) "),c.Pb(),c.Qb(18,"div",13),c.Qb(19,"select",14),c.Xb("ngModelChange",(function(e){return t.householdMembers.numChildren=e})),c.Qb(20,"option",15),c.Jc(21,"Select Option..."),c.Pb(),c.Qb(22,"option",16),c.Jc(23,"0"),c.Pb(),c.Qb(24,"option",17),c.Jc(25,"1"),c.Pb(),c.Qb(26,"option",18),c.Jc(27,"2"),c.Pb(),c.Qb(28,"option",19),c.Jc(29,"3"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(30,"div",11),c.Qb(31,"label",12),c.Jc(32," Number of adults (18-64 years) "),c.Pb(),c.Qb(33,"div",13),c.Qb(34,"select",20),c.Xb("ngModelChange",(function(e){return t.householdMembers.numAdults=e})),c.Qb(35,"option",15),c.Jc(36,"Select Option..."),c.Pb(),c.Qb(37,"option",16),c.Jc(38,"0"),c.Pb(),c.Qb(39,"option",17),c.Jc(40,"1"),c.Pb(),c.Qb(41,"option",18),c.Jc(42,"2"),c.Pb(),c.Qb(43,"option",19),c.Jc(44,"3"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(45,"div",11),c.Qb(46,"label",12),c.Jc(47," Number of seniors (65+ years) "),c.Pb(),c.Qb(48,"div",13),c.Qb(49,"select",21),c.Xb("ngModelChange",(function(e){return t.householdMembers.numSeniors=e})),c.Qb(50,"option",15),c.Jc(51,"Select Option..."),c.Pb(),c.Qb(52,"option",16),c.Jc(53,"0"),c.Pb(),c.Qb(54,"option",17),c.Jc(55,"1"),c.Pb(),c.Qb(56,"option",18),c.Jc(57,"2"),c.Pb(),c.Qb(58,"option",22),c.Jc(59,"3"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(60,"fieldset",9),c.Qb(61,"legend"),c.Jc(62,"Education"),c.Pb(),c.Qb(63,"p",10),c.Jc(64," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),c.Pb(),c.Qb(65,"div",11),c.Qb(66,"label",12),c.Jc(67," What is the highest level of education that you have completed? "),c.Qb(68,"span"),c.Jc(69,"*"),c.Pb(),c.Pb(),c.Qb(70,"div",2),c.Qb(71,"div",23),c.Qb(72,"div",24),c.Qb(73,"label",25),c.Jc(74," Grade 0-8 "),c.Qb(75,"input",26),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(76,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(77,"div",23),c.Qb(78,"div",24),c.Qb(79,"label",25),c.Jc(80," Grade 9-11 "),c.Qb(81,"input",28),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(82,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(83,"div",23),c.Qb(84,"div",24),c.Qb(85,"label",25),c.Jc(86," Grade 12 "),c.Qb(87,"input",29),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(88,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(89,"div",23),c.Qb(90,"div",24),c.Qb(91,"label",25),c.Jc(92," Post secondary (some) "),c.Qb(93,"input",30),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(94,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(95,"div",23),c.Qb(96,"div",24),c.Qb(97,"label",25),c.Jc(98," Trade certificate/professional accreditation "),c.Qb(99,"input",31),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(100,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(101,"div",23),c.Qb(102,"div",24),c.Qb(103,"label",25),c.Jc(104," College diploma "),c.Qb(105,"input",32),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(106,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(107,"div",23),c.Qb(108,"div",24),c.Qb(109,"label",25),c.Jc(110," University degree "),c.Qb(111,"input",33),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(112,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(113,"div",23),c.Qb(114,"div",24),c.Qb(115,"label",25),c.Jc(116," PhD "),c.Qb(117,"input",34),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(118,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(119,"div",23),c.Qb(120,"div",24),c.Qb(121,"label",25),c.Jc(122," Undisclosed "),c.Qb(123,"input",35),c.Xb("ngModelChange",(function(e){return t.education.level=e})),c.Pb(),c.Lb(124,"span",27),c.Pb(),c.Pb(),c.Pb(),c.Qb(125,"div",36),c.Qb(126,"span",37),c.Jc(127,"Please select one of the options"),c.Pb(),c.Pb(),c.Qb(128,"div",38),c.Qb(129,"div",11),c.Qb(130,"label",12),c.Jc(131," Please tell us which country you completed your highest level of education in? "),c.Qb(132,"span"),c.Jc(133,"*"),c.Pb(),c.Pb(),c.Qb(134,"input",39,40),c.Xb("ngModelChange",(function(e){return t.education.country=e})),c.Pb(),c.Qb(136,"div",41),c.Qb(137,"span",37),c.Jc(138,"Field can't be empty"),c.Pb(),c.Qb(139,"span",37),c.Jc(140,"Invalid field value (only alphabets)"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(141,"div",42),c.Qb(142,"ul"),c.Qb(143,"li"),c.Qb(144,"button",43),c.Lb(145,"i",44),c.Jc(146," Previous step "),c.Pb(),c.Pb(),c.Qb(147,"li"),c.Qb(148,"button",45,46),c.Jc(150," Next step "),c.Lb(151,"i",47),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var o=c.wc(4),i=c.wc(135);c.yb(6),c.Cb("submitting",t.submitting),c.yb(13),c.ic("ngModel",t.householdMembers.numChildren),c.yb(15),c.ic("ngModel",t.householdMembers.numAdults),c.yb(15),c.ic("ngModel",t.householdMembers.numSeniors),c.yb(26),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(6),c.ic("ngModel",t.education.level),c.yb(3),c.ic("hidden",!(o.submitted&&!t.education.level)),c.yb(8),c.ic("ngModel",t.education.country),c.yb(2),c.ic("hidden",!o.submitted),c.yb(1),c.ic("hidden",!(null!=i.errors&&i.errors.required)),c.yb(2),c.ic("hidden",!(null!=i.errors&&i.errors.pattern))}},directives:[u.A,u.o,u.p,u.x,u.n,u.q,u.r,u.z,u.u,u.c,u.w,u.t,l.g],styles:[""]}),s),k=["next"];function J(e,t){if(1&e){var n=c.Rb();c.Ob(0),c.Qb(1,"div",27),c.Qb(2,"label",28),c.Jc(3),c.Qb(4,"input",29),c.Xb("ngModelChange",(function(e){return c.zc(n),t.$implicit.checked=e})),c.Pb(),c.Lb(5,"span",30),c.Pb(),c.Pb(),c.Nb()}if(2&e){var o=t.$implicit;c.yb(3),c.Lc(" ",o.name," "),c.yb(1),c.kc("name","source_",o.name,""),c.ic("ngModel",o.checked)}}var M,I=((M=function(){function t(n,o,i,r,a){e(this,t),this.ps=n,this.ss=o,this.router=i,this.ar=r,this.loader=a,this.submitting=!1,this.unsub$=new p.a,this.init_form_data()}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.ps.AdObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){if(!t._id)return e.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),e.router.navigate(["../select-location"],{relativeTo:e.ar}),!1;e.ad=t,e.preset_input_data()})),this.ss.getUserSessionObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"buttonEventFromParent",value:function(){var e=this;this.ps.checkSubmition().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){var n,o;"save-next"==t?null===(o=null===(n=e.submitButtonRef)||void 0===n?void 0:n.nativeElement)||void 0===o||o.click():"prev"==t?e.prevPage():e.nextNoSave()}))}},{key:"ngAfterViewInit",value:function(){this.buttonEventFromParent()}},{key:"preset_input_data",value:function(){var e=this;this.componentForm=Object.assign(Object.assign({},this.componentForm),this.ad.monthlyIncome),this.componentForm.sources instanceof Array||(this.componentForm.sources=[]),this.componentForm.sources.length>0&&(this.sources[0].checked=!1),this.componentForm.sources.map((function(t){var n=e.sources.find((function(e){return e.name==t.name}));n&&(n.checked=!0)}))}},{key:"save",value:function(){var e=this;this.load();var t=this.prepare_form_data();this.ps.save_contact_details_step3(this.ad._id,t).subscribe((function(t){e.stopload(),t.status?(e.ps.newMessage("success","Details were saved",t.message),e.ps.NewAdData(t.data),e.router.navigate(["../step4"],{relativeTo:e.ar})):e.ps.newMessage("error","Details not saved",t.message)}),this.handle_error.bind(this))}},{key:"prepare_form_data",value:function(){var e=this.sources.filter((function(e){return e.checked}));return Object.assign(Object.assign({},this.componentForm),{sources:e})}},{key:"nextPage",value:function(e){if("INVALID"==e.form.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_source_combination()||this.save()}},{key:"nextNoSave",value:function(){this.router.navigate(["../step4"],{relativeTo:this.ar})}},{key:"prevPage",value:function(){this.router.navigate(["../step3"],{relativeTo:this.ar})}},{key:"wrong_source_combination",value:function(){var e=!1;this.sources[0].checked&&(e=!0);var t=this.sources.find((function(e){return"no income"!=e.name.toLowerCase()&&e.checked}));return e||t?!(!e||!t||(this.ps.newMessage("error","Invalid Form Details","Wrong Source Combination"),0)):(this.ps.newMessage("error","Invalid Form Details","Please select one or more income source"),!0)}},{key:"handle_error",value:function(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"init_form_data",value:function(){this.componentForm={sources:[],estimatedMonthlyIncome:null,monthlyHouseholdExpenses:null},this.sources=[{_id:null,name:"No income",checked:!0},{_id:null,name:"Ontario Disability Support Program (ODSP)",checked:!1},{_id:null,name:"Ontario Works (OW)",checked:!1},{_id:null,name:"Old Age Security (OAS)",checked:!1},{_id:null,name:"Canada Pension Plan (CCP)",checked:!1},{_id:null,name:"Pensions",checked:!1},{_id:null,name:"Employment Insurance (EI)",checked:!1},{_id:null,name:"Workplace Safety & Insurance Board (WSIB)",checked:!1},{_id:null,name:"Spouse/Family support",checked:!1},{_id:null,name:"Employed: Full time",checked:!1},{_id:null,name:"Employed: Part-time",checked:!1},{_id:null,name:"Child support",checked:!1},{_id:null,name:"Child tax benefit",checked:!1},{_id:null,name:"Scholarship",checked:!1},{_id:null,name:"Student loans",checked:!1},{_id:null,name:"Universal Child Benefit",checked:!1},{_id:null,name:"Other",checked:!1}]}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}}]),t}()).\u0275fac=function(e){return new(e||M)(c.Kb(h.a),c.Kb(v.a),c.Kb(l.f),c.Kb(l.a),c.Kb(f.a))},M.\u0275cmp=c.Eb({type:M,selectors:[["app-step3"]],viewQuery:function(e,t){var n;1&e&&c.Qc(k,!0),2&e&&c.vc(n=c.Yb())&&(t.submitButtonRef=n.first)},decls:60,vars:9,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[1,"col-12","px-0",3,"ngSubmit"],["step3Form","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-subnote"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","estimatedMonthlyIncome","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["estimatedMonthlyIncome","ngModel"],[1,"errors",3,"hidden"],[1,"error",3,"hidden"],["type","text","name","monthlyHouseholdExpenses","pattern","^[0-9]+$","required","","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["monthlyHouseholdExpenses","ngModel"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step2",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],[1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox","ngModel","",3,"name","ngModel","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e){var n=c.Rb();c.Qb(0,"section",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form",3,4),c.Xb("ngSubmit",(function(){c.zc(n);var e=c.wc(4);return t.nextPage(e)})),c.Qb(5,"div",5),c.Qb(6,"div",6),c.Qb(7,"div",2),c.Qb(8,"div",7),c.Qb(9,"div",8),c.Qb(10,"fieldset",9),c.Qb(11,"legend"),c.Jc(12,"Monthly income"),c.Pb(),c.Qb(13,"p",10),c.Jc(14," We collect this data for programming and reporting purposes. For both these purposes, the information is used in an anonymous and aggregate manner to protect your privacy. "),c.Pb(),c.Qb(15,"div",11),c.Qb(16,"label",12),c.Jc(17," Please select all sources of your monthly income "),c.Qb(18,"span"),c.Jc(19,"*"),c.Pb(),c.Pb(),c.Qb(20,"div",2),c.Qb(21,"div",13),c.Hc(22,J,6,3,"ng-container",14),c.Qb(23,"div",11),c.Qb(24,"label",12),c.Jc(25," Please provide an estimate of your total monthly income "),c.Qb(26,"span"),c.Jc(27,"*"),c.Pb(),c.Pb(),c.Qb(28,"input",15,16),c.Xb("ngModelChange",(function(e){return t.componentForm.estimatedMonthlyIncome=e})),c.Pb(),c.Qb(30,"div",17),c.Qb(31,"span",18),c.Jc(32,"Field can't be empty"),c.Pb(),c.Qb(33,"span",18),c.Jc(34,"Please enter valid input(only numbers)"),c.Pb(),c.Pb(),c.Pb(),c.Qb(35,"div",11),c.Qb(36,"label",12),c.Jc(37," Please provide an estimate of your total monthly household expenses "),c.Qb(38,"span"),c.Jc(39,"*"),c.Pb(),c.Pb(),c.Qb(40,"input",19,20),c.Xb("ngModelChange",(function(e){return t.componentForm.monthlyHouseholdExpenses=e})),c.Pb(),c.Qb(42,"p"),c.Jc(43," Such as rent/mortgage, utilities, phone, internet, vehicle, insurance, childcare, child support, debt payments, food, medical, personal, or transit expenses "),c.Pb(),c.Qb(44,"div",17),c.Qb(45,"span",18),c.Jc(46,"Field can't be empty"),c.Pb(),c.Qb(47,"span",18),c.Jc(48,"Please enter valid input(only numbers)"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(49,"div",21),c.Qb(50,"ul"),c.Qb(51,"li"),c.Qb(52,"button",22),c.Lb(53,"i",23),c.Jc(54," Previous step "),c.Pb(),c.Pb(),c.Qb(55,"li"),c.Qb(56,"button",24,25),c.Jc(58," Next step "),c.Lb(59,"i",26),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){var o=c.wc(4),i=c.wc(29),r=c.wc(41);c.yb(22),c.ic("ngForOf",t.sources),c.yb(6),c.ic("ngModel",t.componentForm.estimatedMonthlyIncome),c.yb(2),c.ic("hidden",!o.submitted),c.yb(1),c.ic("hidden",!(null!=i.errors&&i.errors.required)),c.yb(2),c.ic("hidden",!(null!=i.errors&&i.errors.pattern)),c.yb(7),c.ic("ngModel",t.componentForm.monthlyHouseholdExpenses),c.yb(4),c.ic("hidden",!o.submitted),c.yb(1),c.ic("hidden",!(null!=r.errors&&r.errors.required)),c.yb(2),c.ic("hidden",!(null!=r.errors&&r.errors.pattern))}},directives:[u.A,u.o,u.p,b.m,u.c,u.t,u.w,u.n,u.q,l.g,u.a],styles:[""]}),M),C=["next"],_=function(){return{standalone:!0}};function F(e,t){if(1&e){var n=c.Rb();c.Ob(0),c.Qb(1,"div",26),c.Qb(2,"label",27),c.Jc(3),c.Qb(4,"input",28),c.Xb("ngModelChange",(function(e){return c.zc(n),t.$implicit.checked=e})),c.Pb(),c.Lb(5,"span",29),c.Pb(),c.Pb(),c.Nb()}if(2&e){var o=t.$implicit;c.yb(3),c.Lc(" ",o.name," "),c.yb(1),c.jc("name",o.name),c.ic("ngModel",o.checked)("ngModelOptions",c.mc(4,_))}}var w,L,N,x=((w=function(){function t(n,o,i,r,a,s){e(this,t),this.ps=n,this.ss=o,this.fb=i,this.router=r,this.ar=a,this.loader=s,this.componentForm=this.fb.group({additionalDietaryInfo:["",u.y.required],fullname:["",u.y.compose([u.y.required,u.y.pattern(/^[a-z ]+$/i)])],phone:["",u.y.compose([u.y.required,u.y.pattern(/^\+?[0-9]{10,13}$/)])]}),this.submitting=!1,this.unsub$=new p.a,this.init_form_data()}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.buttonEventFromParent(),this.ps.AdObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){if(!t._id)return e.ps.newMessage("error","Ad Not Initialized","The Ad is not initialized, please select a location"),e.router.navigate(["../select-location"],{relativeTo:e.ar}),!1;e.ad=t,e.preset_input_data()})),this.ss.getUserSessionObservable().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){e.session=t}))}},{key:"buttonEventFromParent",value:function(){var e=this;this.ps.checkSubmition().pipe(Object(m.a)(this.unsub$)).subscribe((function(t){var n,o;"save-next"==t?null===(o=null===(n=e.submitButtonRef)||void 0===n?void 0:n.nativeElement)||void 0===o||o.click():"prev"==t?e.prevPage():e.nextNoSave()}))}},{key:"preset_input_data",value:function(){var e,t=this,n=this.ad.dietaryConsideration,o=null;n instanceof Object&&(o=Object.assign({},n)),this.componentForm.patchValue(o||{});var i=null===(e=this.ad.dietaryConsideration)||void 0===e?void 0:e.needs;i instanceof Array||(i=[]),i.length>0&&(this.needs[0].checked=!1),i.map((function(e){var n=t.needs.find((function(t){return t.name==e.name}));n&&(n.checked=!0)}))}},{key:"save",value:function(){var e=this;this.load();var t=this.prepare_form_data();this.ps.save_contact_details_step4(this.ad._id,t).subscribe((function(t){e.stopload(),t.status?(e.ps.newMessage("success","Details were saved",t.message),e.ps.NewAdData(t.data),e.router.navigate(["../../steps/photos"],{relativeTo:e.ar})):e.ps.newMessage("error","Details not saved",t.message)}),this.handle_error.bind(this))}},{key:"prepare_form_data",value:function(){var e=this.needs.filter((function(e){return e.checked})),t=this.componentForm.value;return{fullname:t.fullname,additionalDietaryInfo:t.additionalDietaryInfo,phone:t.phone,needs:e}}},{key:"nextPage",value:function(){if("INVALID"==this.componentForm.status)return this.ps.newMessage("error","Invalid Form Details","Please fill correct details");this.wrong_need_combination()||this.save()}},{key:"nextNoSave",value:function(){this.router.navigate(["../../steps/photos"],{relativeTo:this.ar})}},{key:"prevPage",value:function(){this.router.navigate(["../step3"],{relativeTo:this.ar})}},{key:"wrong_need_combination",value:function(){return!this.needs.find((function(e){return e.checked}))&&(this.ps.newMessage("error","Invalid Form Details","Please select one or more income need"),!0)}},{key:"handle_error",value:function(e){this.stopload(),e.error instanceof ErrorEvent?this.ps.newMessage("error","Error occured","sorry couldn't connect to the URL"):this.ps.newMessage("error","Error occured",e.error.message)}},{key:"load",value:function(){this.submitting=!0,this.loader.start()}},{key:"stopload",value:function(){this.submitting=!1,this.loader.stop()}},{key:"init_form_data",value:function(){this.needs=[{_id:null,name:"Diabetic",checked:!0},{_id:null,name:"Fish only",checked:!1},{_id:null,name:"Halal",checked:!1},{_id:null,name:"Kosher",checked:!1},{_id:null,name:"Milk allergy",checked:!1},{_id:null,name:"No pork",checked:!1},{_id:null,name:"Peanut allergy",checked:!1},{_id:null,name:"Egg allergy",checked:!1},{_id:null,name:"Pregnant",checked:!1},{_id:null,name:"Sesame allergy",checked:!1},{_id:null,name:"Vegan",checked:!1},{_id:null,name:"Vegetarian",checked:!1},{_id:null,name:"Wheat allergy",checked:!1},{_id:null,name:"Other",checked:!1}]}},{key:"ngOnDestroy",value:function(){this.unsub$.next(!0),this.unsub$.complete()}}]),t}()).\u0275fac=function(e){return new(e||w)(c.Kb(h.a),c.Kb(v.a),c.Kb(u.d),c.Kb(l.f),c.Kb(l.a),c.Kb(f.a))},w.\u0275cmp=c.Eb({type:w,selectors:[["app-step4"]],viewQuery:function(e,t){var n;1&e&&c.Qc(C,!0),2&e&&c.vc(n=c.Yb())&&(t.submitButtonRef=n.first)},features:[c.xb([u.d])],decls:65,vars:9,consts:[[1,"d-header","px-0"],[1,"container-fluid"],[1,"row"],[1,"col-12","px-0",3,"formGroup","ngSubmit"],["step4FormRef","ngForm"],[1,"col-sm-12","px-0"],[1,"delivery-form","mt-0"],[1,"col-lg-8","mx-auto"],[1,"form-input"],[1,"form-contact"],[1,"form-group"],[1,"del-label"],[1,"col-lg-12"],[4,"ngFor","ngForOf"],["type","text","name","additionalDietaryInfo","formControlName","additionalDietaryInfo",1,"form-control"],[1,"errors"],[1,"error",3,"hidden"],["type","text","name","fullname","placeholder","firstname lastname","formControlName","fullname",1,"form-control"],[1,"errors",3,"hidden"],["type","text","name","phone","placeholder","9999999999","formControlName","phone",1,"form-control"],[1,"d-footer",2,"display","none"],["type","button","routerLink","../step3",1,"btn","btn-prev"],[1,"fa","fa-angle-left"],["type","submit",1,"btn","btn-next"],["next",""],[1,"fa","fa-angle-right"],[1,"city-checkbx-list"],[1,"city-checkbox"],["type","checkbox",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"checkmark"]],template:function(e,t){if(1&e&&(c.Qb(0,"section",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"form",3,4),c.Xb("ngSubmit",(function(){return t.nextPage()})),c.Qb(5,"div",5),c.Qb(6,"div",6),c.Qb(7,"div",2),c.Qb(8,"div",7),c.Qb(9,"div",8),c.Qb(10,"fieldset",9),c.Qb(11,"legend"),c.Jc(12,"Dietary considerations"),c.Pb(),c.Qb(13,"div",10),c.Qb(14,"label",11),c.Jc(15," What, if any, dietary needs do you have? "),c.Pb(),c.Qb(16,"div",2),c.Qb(17,"div",12),c.Hc(18,F,6,5,"ng-container",13),c.Qb(19,"div",10),c.Qb(20,"label",11),c.Jc(21," Please provide any additional dietary information "),c.Qb(22,"span"),c.Jc(23,"*"),c.Pb(),c.Pb(),c.Lb(24,"input",14),c.Qb(25,"div",15),c.Qb(26,"span",16),c.Jc(27," Field can't be left empty. "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(28,"fieldset",9),c.Qb(29,"legend"),c.Jc(30,"Dietary considerations"),c.Pb(),c.Qb(31,"div",10),c.Qb(32,"label",11),c.Jc(33," What, if any, dietary needs do you have? "),c.Pb(),c.Qb(34,"div",2),c.Qb(35,"div",12),c.Qb(36,"div",10),c.Qb(37,"label",11),c.Jc(38," Full name "),c.Pb(),c.Lb(39,"input",17),c.Qb(40,"div",18),c.Qb(41,"span",16),c.Jc(42," Field can't be left empty "),c.Pb(),c.Qb(43,"span",16),c.Jc(44," Invalid field value (only alphabets) "),c.Pb(),c.Pb(),c.Pb(),c.Qb(45,"div",10),c.Qb(46,"label",11),c.Jc(47," Phone number "),c.Pb(),c.Lb(48,"input",19),c.Qb(49,"div",18),c.Qb(50,"span",16),c.Jc(51," Field can't be left empty "),c.Pb(),c.Qb(52,"span",16),c.Jc(53," Invalid field value (only numbers) "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(54,"div",20),c.Qb(55,"ul"),c.Qb(56,"li"),c.Qb(57,"button",21),c.Lb(58,"i",22),c.Jc(59," Previous step "),c.Pb(),c.Pb(),c.Qb(60,"li"),c.Qb(61,"button",23,24),c.Jc(63," Next Step "),c.Lb(64,"i",25),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e){var n=c.wc(4);c.yb(3),c.ic("formGroup",t.componentForm),c.yb(15),c.ic("ngForOf",t.needs),c.yb(8),c.ic("hidden",!(n.submitted&&null!=t.componentForm.controls.additionalDietaryInfo.errors&&t.componentForm.controls.additionalDietaryInfo.errors.required)),c.yb(14),c.ic("hidden",!n.submitted),c.yb(1),c.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.componentForm.controls.fullname.errors&&t.componentForm.controls.fullname.errors.pattern)),c.yb(6),c.ic("hidden",!n.submitted),c.yb(1),c.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.required)),c.yb(2),c.ic("hidden",!(null!=t.componentForm.controls.phone.errors&&t.componentForm.controls.phone.errors.pattern))}},directives:[u.A,u.o,u.h,b.m,u.c,u.n,u.f,l.g,u.a,u.q],styles:[""]}),w),S=i("RYz/"),O=[{path:"",component:d,children:[{path:"",redirectTo:"step1",pathMatch:"full"},{path:"step1",canActivate:[S.a],component:P,data:{moveToStep:4}},{path:"step2",canActivate:[S.a],component:Q,data:{moveToStep:5}},{path:"step3",canActivate:[S.a],component:I,data:{moveToStep:6}},{path:"step4",canActivate:[S.a],component:x,data:{moveToStep:7}}]}],T=((L=function t(){e(this,t)}).\u0275mod=c.Ib({type:L}),L.\u0275inj=c.Hb({factory:function(e){return new(e||L)},imports:[[l.j.forChild(O)],l.j]}),L),q=i("qxW0"),A=i("Gxio"),G=i("FMpt"),E=((N=function t(){e(this,t)}).\u0275mod=c.Ib({type:N}),N.\u0275inj=c.Hb({factory:function(e){return new(e||N)},imports:[[b.b,T,u.j,u.v,q.a,A.b,G.a]]}),N)}}])}();